{
  "version": 3,
  "sources": ["../../lib/utils/string.ts", "../../tmp/constants/calendars.ts", "../../tmp/constants/locales.ts", "../../lib/constants/colors.ts", "../../lib/constants/cycles.ts", "../../lib/constants/general-calendar-names.ts", "../../lib/constants/martyrology-metadata.ts", "../../lib/constants/months.ts", "../../lib/constants/periods.ts", "../../lib/constants/precedences.ts", "../../lib/constants/ranks.ts", "../../lib/constants/seasons.ts", "../../lib/constants/weekdays.ts", "../../lib/models/bundle.ts", "../../lib/utils/dates.ts", "../../lib/models/liturgical-day.ts", "../../lib/models/calendar.ts", "../../lib/types/liturgical-day.ts", "../../lib/models/liturgical-day-def.ts", "../../lib/models/calendar-def.ts", "../../node_modules/@babel/runtime/helpers/esm/typeof.js", "../../node_modules/@babel/runtime/helpers/esm/defineProperty.js", "../../node_modules/@babel/runtime/helpers/esm/objectSpread.js", "../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js", "../../node_modules/@babel/runtime/helpers/esm/createClass.js", "../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js", "../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js", "../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js", "../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js", "../../node_modules/@babel/runtime/helpers/esm/inherits.js", "../../node_modules/i18next/dist/esm/i18next.js", "../../lib/general-calendar/proper-of-saints.ts", "../../lib/general-calendar/proper-of-time.ts", "../../lib/utils/numbers.ts", "../../lib/models/config.ts", "../../lib/models/liturgical-day-config.ts", "../../lib/types/bundle.ts", "../../lib/types/calendar.ts", "../../lib/types/calendar-def.ts", "../../lib/types/common.ts", "../../lib/types/config.ts", "../../lib/types/liturgical-day-config.ts", "../../lib/types/locale.ts", "../../lib/types/martyrology.ts", "../../lib/index.ts", "../../lib/exports.ts"],
  "sourcesContent": ["/**\n * Convert a string literal to SCREAMING_SNAKE_CASE.\n * @param string\n */\nexport const toScreamingSnakeCase = (string: string): string =>\n  string\n    .replace(/(.)([A-Z][a-z]+)/, '$1_$2')\n    .replace(/([A-Z][a-z]+)([0-9])/, '$1_$2')\n    .replace(/([a-z0-9])([A-Z])/, '$1_$2')\n    .toUpperCase();\n\n/**\n * Convert a class name from camelCase to kebab-case, replacing the _ namespace separator to a dot.\n * @param string\n */\nexport const toPackageName = (string: string): string =>\n  string\n    .replace(/_/g, '.')\n    .replace(/([^.])([A-Z][a-z]+)/g, '$1-$2')\n    .replace(/([A-Z][a-z]+)([0-9])/g, '$1-$2')\n    .replace(/([a-z0-9])([A-Z])/g, '$1_$2')\n    .toLowerCase();\n\n/**\n * Convert the string to camelCase\n * @param string\n */\nexport const toCamelCase = (string: string): string =>\n  string.toLowerCase().replace(/((?:-|_|\\s)\\w)/g, (k: string) => k[1].toUpperCase());\n\n/**\n * Convert the string to PascalCase\n * @param string\n */\nexport const toPascalCase = (string: string): string =>\n  capitalize(string.toLowerCase().replace(/((?:-|_|\\s)\\w)/g, (k: string) => k[1].toUpperCase()));\n\n/**\n * Converts the first character in the string to an uppercase equivalent.\n * @param string\n */\nexport const capitalize = (string: string): string => string.charAt(0).toUpperCase() + string.slice(1);\n\n/**\n * Converts the first character in the string, and the first character after un _, to a lowercase equivalent.\n * @param string\n */\nexport const uncapitalize = (string: string): string =>\n  string.charAt(0).toLowerCase() + string.slice(1).replace(/(_[A-Z]+)/g, (v) => v.toLowerCase());\n", "import { toPackageName } from '../../lib/utils/string';\n\nexport const CALENDAR_VAR_NAMES: string[] = [\n  'Americas',\n  'Argentina',\n  'Australia',\n  'Austria',\n  'Belgium',\n  'Bolivia',\n  'BosniaHerzegovina',\n  'Brazil',\n  'Canada',\n  'Chile',\n  'China',\n  'CostaRica',\n  'Croatia',\n  'CzechRepublic',\n  'Denmark',\n  'England',\n  'Europe',\n  'Finland',\n  'France',\n  'France_Paris',\n  'France_SaintDenis',\n  'GeneralRoman',\n  'Germany',\n  'Greece',\n  'Guatemala',\n  'Hungary',\n  'India',\n  'Ireland',\n  'Italy',\n  'Japan',\n  'Lebanon',\n  'Lithuania',\n  'Malta',\n  'Mexico',\n  'Netherlands',\n  'NewZealand',\n  'Norway',\n  'Panama',\n  'Paraguay',\n  'Peru',\n  'Philippines',\n  'Poland',\n  'Portugal',\n  'PuertoRico',\n  'Romania',\n  'Russia',\n  'Scotland',\n  'Singapore',\n  'Slovakia',\n  'Slovenia',\n  'Spain',\n  'SriLanka',\n  'Sweden',\n  'Switzerland',\n  'Ukraine',\n  'UnitedStates',\n  'Uruguay',\n  'Venezuela',\n  'Vietnam',\n  'Wales',\n];\n\nexport const CALENDAR_PKG_NAMES: string[] = CALENDAR_VAR_NAMES.map(\n  (c) => `@romcal/calendar.${toPackageName(c)}`\n);\n", "import { toPackageName } from '../../lib/utils/string';\n\nexport const LOCALE_VAR_NAMES: string[] = [\n  'Cs',\n  'EnGb',\n  'EnIe',\n  'En',\n  'Es',\n  'Fr',\n  'It',\n  'La',\n  'Pl',\n  'PtBr',\n  'Sk',\n];\n\nexport const LOCALE_KEYS: string[] = LOCALE_VAR_NAMES.map((c) =>\n  toPackageName(c)\n);\n", "/**\n * Liturgical colors that can be used as metadata for celebrations.\n */\nexport enum Colors {\n  Red = 'RED',\n  Rose = 'ROSE',\n  Purple = 'PURPLE',\n  Green = 'GREEN',\n  White = 'WHITE',\n  Gold = 'GOLD',\n  Black = 'BLACK',\n}\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[LITURGICAL_COLORS]]\n */\nexport const COLORS = Object.keys(Colors).filter(\n  (key) => typeof Colors[key as keyof typeof Colors] === 'string',\n) as Array<Uppercase<keyof typeof Colors>>;\n\nexport type Color = typeof COLORS[number];\n\n/**\n * Check if a value is a liturgical color.\n * @param maybeColor\n */\nexport const isColor = (maybeColor: unknown): boolean => {\n  return typeof maybeColor === 'string' && COLORS.includes(maybeColor as Color);\n};\n", "import { ScreamingSnakeCase } from '../types/common';\nimport { toScreamingSnakeCase } from '../utils/string';\n\n/**\n * Liturgical Day cycle that can be used as metadata for liturgical days.\n */\nexport enum ProperCycles {\n  ProperOfTime = 'PROPER_OF_TIME',\n  ProperOfSaints = 'PROPER_OF_SAINTS',\n}\n\n/**\n * Sundays cycle that can be used as metadata for liturgical days.\n */\nexport enum SundaysCycles {\n  YearA = 'YEAR_A',\n  YearB = 'YEAR_B',\n  YearC = 'YEAR_C',\n}\n\n/**\n * Weekdays cycle that can be used as metadata for liturgical days.\n */\nexport enum WeekdaysCycles {\n  Year1 = 'YEAR_1',\n  Year2 = 'YEAR_2',\n}\n\n/**\n * Psalter weeks that can be used as metadata for liturgical days.\n */\nexport enum PsalterWeeksCycles {\n  Week1 = 'WEEK_1',\n  Week2 = 'WEEK_2',\n  Week3 = 'WEEK_3',\n  Week4 = 'WEEK_4',\n}\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[LITURGICAL_DAY_CYCLES]]\n */\nexport const PROPER_CYCLE = Object.keys(ProperCycles)\n  .filter((key) => typeof ProperCycles[key as keyof typeof ProperCycles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof ProperCycles>>;\n\nexport type ProperCycle = typeof PROPER_CYCLE[number];\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[SUNDAY_CYCLES]]\n */\nexport const SUNDAYS_CYCLE = Object.keys(SundaysCycles)\n  .filter((key) => typeof SundaysCycles[key as keyof typeof SundaysCycles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof SundaysCycles>>;\n\nexport type SundaysCycle = typeof SUNDAYS_CYCLE[number];\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[WEEKDAY_CYCLES]]\n */\nexport const WEEKDAYS_CYCLE = Object.keys(WeekdaysCycles)\n  .filter((key) => typeof WeekdaysCycles[key as keyof typeof WeekdaysCycles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof WeekdaysCycles>>;\n\nexport type WeekdaysCycle = typeof WEEKDAYS_CYCLE[number];\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[PSALTER_WEEKS]]\n */\nexport const PSALTER_WEEKS = Object.keys(PsalterWeeksCycles)\n  .filter((key) => typeof PsalterWeeksCycles[key as keyof typeof PsalterWeeksCycles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof PsalterWeeksCycles>>;\n\nexport type PsalterWeeksCycle = typeof PSALTER_WEEKS[number];\n", "export const PROPER_OF_TIME_NAME = 'ProperOfTime';\nexport const GENERAL_ROMAN_NAME = 'GeneralRoman';\n", "import { ScreamingSnakeCase } from '../types/common';\nimport { toScreamingSnakeCase } from '../utils/string';\n\n/**\n * Canonization level of a person.\n */\n\nexport enum CanonizationLevels {\n  Blessed = 'BLESSED',\n  Saint = 'SAINT',\n}\n\nexport const CANONIZATION_LEVEL = Object.keys(CanonizationLevels)\n  .filter((key) => typeof CanonizationLevels[key as keyof typeof CanonizationLevels] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof CanonizationLevels>>;\n\nexport type CanonizationLevel = typeof CANONIZATION_LEVEL[number];\n\n/**\n * Titles of Saints and Blessed from the Martyrology catalog.\n */\nexport enum Titles {\n  Abbess = 'ABBESS',\n  Abbot = 'ABBOT',\n  Apostle = 'APOSTLE',\n  Archangel = 'ARCHANGEL',\n  Bishop = 'BISHOP',\n  Deacon = 'DEACON',\n  DoctorOfTheChurch = 'DOCTOR_OF_THE_CHURCH',\n  Empress = 'EMPRESS',\n  Evangelist = 'EVANGELIST',\n  FirstBishop = 'FIRST_BISHOP',\n  Hermit = 'HERMIT',\n  King = 'KING',\n  Martyr = 'MARTYR',\n  Missionary = 'MISSIONARY',\n  Monk = 'MONK',\n  MotherAndQueenOfChile = 'MOTHER_AND_QUEEN_OF_CHILE',\n  ParentsOfTheBlessedVirginMary = 'PARENTS_OF_THE_BLESSED_VIRGIN_MARY',\n  Pope = 'POPE',\n  Patriarch = 'PATRIARCH',\n  Pilgrim = 'PILGRIM',\n  Priest = 'PRIEST',\n  Prophet = 'PROPHET',\n  ProtoMartyrOfOceania = 'PROTO_MARTYR_OF_OCEANIA',\n  Queen = 'QUEEN',\n  QueenOfPoland = 'QUEEN_OF_POLAND',\n  Religious = 'RELIGIOUS',\n  SlavicMissionary = 'SLAVIC_MISSIONARY',\n  SpouseOfTheBlessedVirginMary = 'SPOUSE_OF_THE_BLESSED_VIRGIN_MARY',\n  TheFirstMartyr = 'THE_FIRST_MARTYR',\n  Virgin = 'VIRGIN',\n}\n\nexport const TITLES = Object.keys(Titles)\n  .filter((key) => typeof Titles[key as keyof typeof Titles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof Titles>>;\n\nexport type Title = typeof TITLES[number];\n\n/**\n * Return true if the provided title contain at least one Martyr title\n * @param titles\n */\nexport const isMartyr = (titles: (Title | PatronTitle)[]): boolean => {\n  return (\n    titles.includes(Titles.Martyr) ||\n    titles.includes(Titles.TheFirstMartyr) ||\n    titles.includes(Titles.ProtoMartyrOfOceania)\n  );\n};\n\n/**\n *  Patron Titles of Saints and Blessed from the Martyrology catalog.\n */\nexport enum PatronTitles {\n  CopatronOfEurope = 'COPATRON_OF_EUROPE',\n  CopatronOfIreland = 'COPATRON_OF_IRELAND',\n  CopatronOfCanada = 'COPATRON_OF_CANADA',\n  CopatronessOfEurope = 'COPATRONESS_OF_EUROPE',\n  CopatronessOfFrance = 'COPATRONESS_OF_FRANCE',\n  CopatronessOfIreland = 'COPATRONESS_OF_IRELAND',\n  CopatronessOfItalyAndEurope = 'COPATRONESS_OF_ITALY_AND_EUROPE',\n  CopatronessOfThePhilippines = 'COPATRONESS_OF_THE_PHILIPPINES',\n  PatronOfCanada = 'PATRON_OF_CANADA',\n  PatronOfEngland = 'PATRON_OF_ENGLAND',\n  PatronOfEurope = 'PATRON_OF_EUROPE',\n  PatronOfIreland = 'PATRON_OF_IRELAND',\n  PatronOfItaly = 'PATRON_OF_ITALY',\n  PatronOfOceania = 'PATRON_OF_OCEANIA',\n  PatronOfPoland = 'PATRON_OF_POLAND',\n  PatronOfRussia = 'PATRON_OF_RUSSIA',\n  PatronOfScotland = 'PATRON_OF_SCOTLAND',\n  PatronOfSpain = 'PATRON_OF_SPAIN',\n  PatronOfTheCzechNation = 'PATRON_OF_THE_CZECH_NATION',\n  PatronOfTheDiocese = 'PATRON_OF_THE_DIOCESE',\n  PatronOfWales = 'PATRON_OF_WALES',\n  PatronessOfAlsace = 'PATRONESS_OF_ALSACE',\n  PatronessOfArgentina = 'PATRONESS_OF_ARGENTINA',\n  PatronessOfBrazil = 'PATRONESS_OF_BRAZIL',\n  PatronessOfHungary = 'PATRONESS_OF_HUNGARY',\n  PatronessOfPuertoRico = 'PATRONESS_OF_PUERTO_RICO',\n  PatronessOfSlovakia = 'PATRONESS_OF_SLOVAKIA',\n  PatronessOfTheAmericas = 'PATRONESS_OF_THE_AMERICAS',\n  PatronessOfThePhilippines = 'PATRONESS_OF_THE_PHILIPPINES',\n  PatronessOfTheProvinceOfQuebec = 'PATRONESS_OF_THE_PROVINCE_OF_QUEBEC',\n  PatronessOfTheUSA = 'PATRONESS_OF_THE_U_S_A',\n}\n\nexport const PATRON_TITLES = Object.keys(PatronTitles)\n  .filter((key) => typeof PatronTitles[key as keyof typeof PatronTitles] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof PatronTitles>>;\n\nexport type PatronTitle = typeof PATRON_TITLES[number];\n\n/**\n * Determine if a Saint or a Blessed is a male or a female.\n */\nexport enum Sexes {\n  Male = 'MALE',\n  Female = 'FEMALE',\n}\n\nexport const SEXES = Object.keys(Sexes)\n  .filter((key) => typeof Sexes[key as keyof typeof Sexes] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof Sexes>>;\n\nexport type Sex = typeof SEXES[number];\n", "export type Months = [string, string, string, string, string, string, string, string, string, string, string, string];\n\nexport const MONTHS: Months = [\n  'january',\n  'february',\n  'march',\n  'april',\n  'may',\n  'june',\n  'july',\n  'august',\n  'september',\n  'october',\n  'november',\n  'december',\n];\n", "import { ScreamingSnakeCase } from '../types/common';\nimport { toScreamingSnakeCase } from '../utils/string';\n\nexport enum Periods {\n  ChristmasOctave = 'CHRISTMAS_OCTAVE',\n  DaysBeforeEpiphany = 'DAYS_BEFORE_EPIPHANY',\n  DaysFromEpiphany = 'DAYS_FROM_EPIPHANY',\n  ChristmasToPresentationOfTheLord = 'CHRISTMAS_TO_PRESENTATION_OF_THE_LORD',\n  PresentationOfTheLordToHolyThursday = 'PRESENTATION_OF_THE_LORD_TO_HOLY_THURSDAY',\n  HolyWeek = 'HOLY_WEEK',\n  EasterOctave = 'EASTER_OCTAVE',\n  EarlyOrdinaryTime = 'EARLY_ORDINARY_TIME',\n  LateOrdinaryTime = 'LATE_ORDINARY_TIME',\n}\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[LITURGICAL_PERIODS]]\n */\nexport const PERIODS = Object.keys(Periods)\n  .filter((key) => typeof Periods[key as keyof typeof Periods] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof Periods>>;\n\nexport type Period = typeof PERIODS[number];\n", "/**\n * List of the precedence of the Liturgical Days (UNLY #59)\n * Order is important: higher precedence type first, lower precedence type at the end.\n * @readonly\n */\nexport class Precedences {\n  // Note: there is a limit of 63 chars per name because of string literal typing & Pascal to Snake case\n\n  /**\n   * 1 - The Paschal Triduum of the Passion and Resurrection of the Lord.\n   */\n  static Triduum_1: 'TRIDUUM_1' = 'TRIDUUM_1';\n\n  /**\n   * 2 - The Nativity of the Lord, the Epiphany, the Ascension, or Pentecost.\n   */\n  static ProperOfTimeSolemnity_2: 'PROPER_OF_TIME_SOLEMNITY_2' = 'PROPER_OF_TIME_SOLEMNITY_2';\n  /**\n   * 2 - A Sunday of Advent, Lent, or Easter.\n   */\n  static PrivilegedSunday_2: 'PRIVILEGED_SUNDAY_2' = 'PRIVILEGED_SUNDAY_2';\n  /**\n   * 2 - Ash Wednesday.\n   */\n  static AshWednesday_2: 'ASH_WEDNESDAY_2' = 'ASH_WEDNESDAY_2';\n  /**\n   * 2 - A weekday of Holy Week from Monday up to and including Thursday.\n   */\n  static WeekdayOfHolyWeek_2: 'WEEKDAY_OF_HOLY_WEEK_2' = 'WEEKDAY_OF_HOLY_WEEK_2';\n  /**\n   * 2 - A day within the Octave of Easter.\n   */\n  static WeekdayOfEasterOctave_2: 'WEEKDAY_OF_EASTER_OCTAVE_2' = 'WEEKDAY_OF_EASTER_OCTAVE_2';\n\n  /**\n   * 3 - A Solemnity inscribed in the General Calendar, whether of the Lord, of the Blessed Virgin Mary, or of a Saint.\n   */\n  static GeneralSolemnity_3: 'GENERAL_SOLEMNITY_3' = 'GENERAL_SOLEMNITY_3';\n\n  /**\n   * 3 - The Commemoration of All the Faithful Departed.\n   */\n  static CommemorationOfAllTheFaithfulDeparted_3: 'COMMEMORATION_OF_ALL_THE_FAITHFUL_DEPARTED_3' =\n    'COMMEMORATION_OF_ALL_THE_FAITHFUL_DEPARTED_3';\n\n  /**\n   * 4 - Proper Solemnity.\n   * */\n\n  /**\n   * 4a - A proper Solemnity of the principal Patron of the place, city, or state.\n   */\n  static ProperSolemnity_PrincipalPatron_4a: 'PROPER_SOLEMNITY__PRINCIPAL_PATRON_4A' =\n    'PROPER_SOLEMNITY__PRINCIPAL_PATRON_4A';\n  /**\n   * 4b - The Solemnity of the dedication and of the anniversary of the dedication of the own church.\n   */\n  static ProperSolemnity_DedicationOfTheOwnChurch_4b: 'PROPER_SOLEMNITY__DEDICATION_OF_THE_OWN_CHURCH_4B' =\n    'PROPER_SOLEMNITY__DEDICATION_OF_THE_OWN_CHURCH_4B';\n  /**\n   * 4c - The solemnity of the title of the own church.\n   */\n  static ProperSolemnity_TitleOfTheOwnChurch_4c: 'PROPER_SOLEMNITY__TITLE_OF_THE_OWN_CHURCH_4C' =\n    'PROPER_SOLEMNITY__TITLE_OF_THE_OWN_CHURCH_4C';\n  /**\n   *  4d - A Solemnity either of the Title\n   *  or of the Founder\n   *  or of the principal Patron of an Order or Congregation.\n   */\n  static ProperSolemnity_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_4d: 'PROPER_SOLEMNITY__TITLE_OR_FOUNDER_OR_PRIMARY_PATRON_OF_A_RELIGIOUS_ORG_4D' =\n    'PROPER_SOLEMNITY__TITLE_OR_FOUNDER_OR_PRIMARY_PATRON_OF_A_RELIGIOUS_ORG_4D';\n\n  /**\n   * 5 - A Feast of the Lord inscribed in the General Calendar.\n   */\n  static GeneralLordFeast_5: 'GENERAL_LORD_FEAST_5' = 'GENERAL_LORD_FEAST_5';\n\n  /**\n   * 6 - A Sunday of Christmas Time or a Sunday in Ordinary Time.\n   */\n  static UnprivilegedSunday_6: 'UNPRIVILEGED_SUNDAY_6' = 'UNPRIVILEGED_SUNDAY_6';\n\n  /**\n   * 7 - A Feast of the Blessed Virgin Mary or of a Saint in the General Calendar.\n   */\n  static GeneralFeast_7: 'GENERAL_FEAST_7' = 'GENERAL_FEAST_7';\n\n  /**\n   * 8 - Proper Feast\n   */\n\n  /**\n   * 8a - The Proper Feast of the principal Patron of the diocese.\n   */\n  static ProperFeast_PrincipalPatronOfADiocese_8a: 'PROPER_FEAST__PRINCIPAL_PATRON_OF_A_DIOCESE_8A' =\n    'PROPER_FEAST__PRINCIPAL_PATRON_OF_A_DIOCESE_8A';\n\n  /**\n   * 8b - The Proper Feast of the anniversary of the dedication of the cathedral church\n   */\n  static ProperFeast_DedicationOfTheCathedralChurch_8b: 'PROPER_FEAST__DEDICATION_OF_THE_CATHEDRAL_CHURCH_8B' =\n    'PROPER_FEAST__DEDICATION_OF_THE_CATHEDRAL_CHURCH_8B';\n\n  /**\n   * 8c - The Proper Feast of the principal Patron of a region or province, or a country, or of a wider territory.\n   */\n  static ProperFeast_PrincipalPatronOfARegion_8c: 'PROPER_FEAST__PRINCIPAL_PATRON_OF_A_REGION_8C' =\n    'PROPER_FEAST__PRINCIPAL_PATRON_OF_A_REGION_8C';\n\n  /**\n   * 8d - The Proper Feast of the Title, Founder, or principal Patron of an Order or Congregation\n   * and of a religious province, without prejudice to the prescriptions given under no. 4.\n   */\n  static ProperFeast_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_8d: 'PROPER_SOLEMNITY__TITLE_OR_FOUNDER_OR_PRIMARY_PATRON_OF_A_RELIGIOUS_ORG_4D' =\n    'PROPER_SOLEMNITY__TITLE_OR_FOUNDER_OR_PRIMARY_PATRON_OF_A_RELIGIOUS_ORG_4D';\n\n  /**\n   * 8e - Other Feast, proper to an individual church.\n   */\n  static ProperFeast_ToAnIndividualChurch_8e: 'PROPER_FEAST__TO_AN_INDIVIDUAL_CHURCH_8E' =\n    'PROPER_FEAST__TO_AN_INDIVIDUAL_CHURCH_8E';\n\n  /**\n   * 8f - Other Proper Feast\n   * inscribed in the Calendar of each diocese or Order or Congregation.\n   */\n  static ProperFeast_8f: 'PROPER_FEAST_8F' = 'PROPER_FEAST_8F';\n\n  /**\n   * 9 - Privileged Weekday\n   *\n   * - A Weekday of Advent from December 17 up to and including December 24.\n   * - A Day within the Octave of Christmas.\n   * - A Weekday of Lent.\n   */\n  static PrivilegedWeekday_9: 'PRIVILEGED_WEEKDAY_9' = 'PRIVILEGED_WEEKDAY_9';\n\n  /**\n   * 10 - Obligatory Memorials in the General Calendar.\n   */\n  static GeneralMemorial_10: 'GENERAL_MEMORIAL_10' = 'GENERAL_MEMORIAL_10';\n\n  /**\n   * 11 - Proper Obligatory Memorial.\n   */\n\n  /**\n   * 11a - Proper Obligatory Memorial of a secondary Patron\n   * of the place, diocese, region, or religious province.\n   */\n  static ProperMemorial_SecondPatron_11a: 'PROPER_MEMORIAL__SECOND_PATRON_11A' = 'PROPER_MEMORIAL__SECOND_PATRON_11A';\n\n  /**\n   * 11b - Other Proper Obligatory Memorial\n   * inscribed in the Calendar of each diocese, or Order or congregation.\n   */\n  static ProperMemorial_11b: 'PROPER_MEMORIAL_11B' = 'PROPER_MEMORIAL_11B';\n\n  /**\n   * 13 - Weekday\n   *\n   * A Weekday of Advent up to and including December 16.\n   * A Weekday of Christmas Time from January 2 until the Saturday after the Epiphany.\n   * A Weekday of the Easter Time from Monday after the Octave of Easter up to and including the The Saturday before Pentecost.\n   * A Weekday in Ordinary Time.\n   */\n  static Weekday_13: 'WEEKDAY_13' = 'WEEKDAY_13';\n\n  /**\n   * 12 - Optional Memorial\n   *\n   * Optional Memorial, which, however, may be celebrated, in the special manner described in the\n   * General Instruction of the Roman Missal and of the Liturgy of the Hours, even on the days listed in no. 9.\n   *\n   * **Note:**\n   * Optional Memorials (12) are placed after the weekday (13):\n   * - For computing performance reasons (sorting performance).\n   * - Because as long as they are not celebrated, the Weekday still takes precedence.\n   *   The Optional Memorials remains outputted for convenient reasons or any custom usage of romcal generated data.\n   *   The output or Optional Memorials can be disabled with the `strictMode: true`.\n   */\n  static OptionalMemorial_12: 'OPTIONAL_MEMORIAL_12' = 'OPTIONAL_MEMORIAL_12';\n}\n\nexport const PRECEDENCES = [\n  Precedences.Triduum_1,\n  Precedences.ProperOfTimeSolemnity_2,\n  Precedences.PrivilegedSunday_2,\n  Precedences.AshWednesday_2,\n  Precedences.WeekdayOfHolyWeek_2,\n  Precedences.WeekdayOfEasterOctave_2,\n  Precedences.GeneralSolemnity_3,\n  Precedences.CommemorationOfAllTheFaithfulDeparted_3,\n  Precedences.ProperSolemnity_PrincipalPatron_4a,\n  Precedences.ProperSolemnity_DedicationOfTheOwnChurch_4b,\n  Precedences.ProperSolemnity_TitleOfTheOwnChurch_4c,\n  Precedences.ProperSolemnity_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_4d,\n  Precedences.GeneralLordFeast_5,\n  Precedences.UnprivilegedSunday_6,\n  Precedences.GeneralFeast_7,\n  Precedences.ProperFeast_PrincipalPatronOfADiocese_8a,\n  Precedences.ProperFeast_DedicationOfTheCathedralChurch_8b,\n  Precedences.ProperFeast_PrincipalPatronOfARegion_8c,\n  Precedences.ProperFeast_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_8d,\n  Precedences.ProperFeast_ToAnIndividualChurch_8e,\n  Precedences.ProperFeast_8f,\n  Precedences.PrivilegedWeekday_9,\n  Precedences.GeneralMemorial_10,\n  Precedences.ProperMemorial_SecondPatron_11a,\n  Precedences.ProperMemorial_11b,\n  Precedences.Weekday_13,\n  Precedences.OptionalMemorial_12,\n];\n\nexport type Precedence = typeof PRECEDENCES[number];\n", "import { Precedence, Precedences } from './precedences';\n\n/**\n * Rank of liturgical days.\n * @readonly\n * @enum {string}\n */\nexport enum Ranks {\n  /**\n   * Solemnities are counted among the most important days, whose celebration\n   * begins with First Vespers (Evening Prayer I) on the preceding day. Some Solemnities\n   * are also endowed with their own Vigil Mass, which is to be used on the evening of the\n   * preceding day, if an evening Mass is celebrated. (UNLY #11)\n   */\n  Solemnity = 'SOLEMNITY',\n\n  /**\n   * On the first day of each week, which is known as the Day of the Lord or the Lord\u2019s\n   * Day, the Church, by an apostolic tradition that draws its origin from the very day of\n   * the Resurrection of Christ, celebrates the Paschal Mystery. Hence, Sunday must be\n   * considered the primordial feast day. (UNLY #4)\n   */\n  Sunday = 'SUNDAY',\n\n  /**\n   * Feasts are celebrated within the limits of the natural day; accordingly they have\n   * no First Vespers (Evening Prayer I), except in the case of Feasts of the Lord that fall\n   * on a Sunday in Ordinary Time or in Christmas Time and which replace the Sunday\n   * Office. (UNLY #13)\n   */\n  Feast = 'FEAST',\n\n  /**\n   * Memorials are either obligatory or optional; their observance is integrated into\n   * the celebration of the occurring weekday in accordance with the norms set forth in the\n   * General Instruction of the Roman Missal and of the Liturgy of the Hours.\n   * Obligatory Memorials which fall on weekdays of Lent may only be celebrated as\n   * Optional Memorials.\n   * If several Optional Memorials are inscribed in the Calendar on the same day, only\n   * one may be celebrated, the others being omitted. (UNLY #14)\n   */\n  Memorial = 'MEMORIAL',\n\n  /**\n   * The days of the week that follow Sunday are called weekdays; however, they are\n   * celebrated differently according to the importance of each.\n   *\n   * a. Ash Wednesday and the weekdays of Holy Week, from Monday up to and including\n   *    Thursday, take precedence over all other celebrations.\n   * b. The weekdays of Advent from 17 December up to and including 24 December\n   *    and all the weekdays of Lent have precedence over Obligatory Memorials.\n   * c. Other weekdays give way to all Solemnities and Feasts and are combined with\n   *    Memorials.\n   *\n   *  (UNLY #16)\n   */\n  Weekday = 'WEEKDAY',\n}\n\nexport const RANKS = Object.keys(Ranks).filter((key) => typeof Ranks[key as keyof typeof Ranks] === 'string') as Array<\n  Uppercase<keyof typeof Ranks>\n>;\n\nexport type Rank = typeof RANKS[number];\n\nexport const RanksFromPrecedence: Record<Precedence, Rank> = {\n  [Precedences.Triduum_1]: Ranks.Weekday,\n  [Precedences.ProperOfTimeSolemnity_2]: Ranks.Solemnity,\n  [Precedences.PrivilegedSunday_2]: Ranks.Sunday,\n  [Precedences.AshWednesday_2]: Ranks.Weekday,\n  [Precedences.WeekdayOfHolyWeek_2]: Ranks.Weekday,\n  [Precedences.WeekdayOfEasterOctave_2]: Ranks.Solemnity,\n  [Precedences.GeneralSolemnity_3]: Ranks.Solemnity,\n  [Precedences.CommemorationOfAllTheFaithfulDeparted_3]: Ranks.Feast,\n  [Precedences.ProperSolemnity_PrincipalPatron_4a]: Ranks.Solemnity,\n  [Precedences.ProperSolemnity_DedicationOfTheOwnChurch_4b]: Ranks.Solemnity,\n  [Precedences.ProperSolemnity_TitleOfTheOwnChurch_4c]: Ranks.Solemnity,\n  [Precedences.ProperSolemnity_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_4d]: Ranks.Solemnity,\n  [Precedences.GeneralLordFeast_5]: Ranks.Feast,\n  [Precedences.UnprivilegedSunday_6]: Ranks.Sunday,\n  [Precedences.GeneralFeast_7]: Ranks.Feast,\n  [Precedences.ProperFeast_PrincipalPatronOfADiocese_8a]: Ranks.Feast,\n  [Precedences.ProperFeast_DedicationOfTheCathedralChurch_8b]: Ranks.Feast,\n  [Precedences.ProperFeast_PrincipalPatronOfARegion_8c]: Ranks.Feast,\n  [Precedences.ProperFeast_TitleOrFounderOrPrimaryPatronOfAReligiousOrg_8d]: Ranks.Feast,\n  [Precedences.ProperFeast_ToAnIndividualChurch_8e]: Ranks.Feast,\n  [Precedences.ProperFeast_8f]: Ranks.Feast,\n  [Precedences.PrivilegedWeekday_9]: Ranks.Weekday,\n  [Precedences.GeneralMemorial_10]: Ranks.Memorial,\n  [Precedences.ProperMemorial_SecondPatron_11a]: Ranks.Memorial,\n  [Precedences.ProperMemorial_11b]: Ranks.Memorial,\n  [Precedences.OptionalMemorial_12]: Ranks.Memorial,\n  [Precedences.Weekday_13]: Ranks.Weekday,\n};\n", "import { ScreamingSnakeCase } from '../types/common';\nimport { toScreamingSnakeCase } from '../utils/string';\n\n/**\n * Liturgical seasons are segments of time that when combined, form the liturgical year.\n * Liturgical seasons are distinguished by specific names that signify the character\n * of the season.\n */\nexport enum Seasons {\n  Advent = 'ADVENT',\n  ChristmasTime = 'CHRISTMAS_TIME',\n  Lent = 'LENT',\n  PaschalTriduum = 'PASCHAL_TRIDUUM',\n  EasterTime = 'EASTER_TIME',\n  OrdinaryTime = 'ORDINARY_TIME',\n}\n\n/**\n * A dynamically generated constant consisting of all the enum keys in [[LITURGICAL_SEASONS]]\n */\nexport const SEASONS = Object.keys(Seasons)\n  .filter((key) => typeof Seasons[key as keyof typeof Seasons] === 'string')\n  .map((key) => toScreamingSnakeCase(key)) as Array<ScreamingSnakeCase<keyof typeof Seasons>>;\n\nexport type Season = typeof SEASONS[number];\n", "export type Weekdays = [string, string, string, string, string, string, string];\n\nexport const WEEKDAYS: Weekdays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n", "import { BaseRomcalBundle } from '../types/bundle';\nimport { BundleInputs, ParticularConfig } from '../types/calendar-def';\nimport { Key } from '../types/common';\nimport { Locale } from '../types/locale';\nimport { MartyrologyCatalog } from '../types/martyrology';\n\nexport class RomcalBundle implements BaseRomcalBundle {\n  calendarName: Key;\n  particularConfig: ParticularConfig;\n  inputs: BundleInputs;\n  martyrology: MartyrologyCatalog;\n  i18n: Locale;\n\n  constructor(input: BaseRomcalBundle) {\n    this.calendarName = input.calendarName;\n    this.particularConfig = input.particularConfig;\n    this.inputs = input.inputs;\n    this.martyrology = input.martyrology;\n    this.i18n = input.i18n;\n  }\n}\n", "import { Seasons } from '../constants/seasons';\nimport { RomcalConfig } from '../models/config';\n\nexport const getUtcDate = (year: number, month: number, date: number): Date => {\n  return new Date(Date.UTC(year, month - 1, date, 0, 0, 0, 0));\n};\n\nexport const getUtcDateFromString = (dateStr: string): Date => {\n  const [year, month, date] = dateStr.split('-').map((n) => parseInt(n, 10));\n  return getUtcDate(year, month, date);\n};\n\nexport const addDays = (date: Date, days: number): Date => {\n  return new Date(date.valueOf() + 864e5 * days); // 864e5 = 24 * 60 * 60 * 1000\n};\n\nexport const subtractsDays = (date: Date, days: number): Date => {\n  return new Date(date.valueOf() - 864e5 * days);\n};\n\nexport const isSameDate = (date1: Date, date2: Date): boolean => {\n  return (\n    date1 &&\n    date2 &&\n    date1.getFullYear() === date2.getFullYear() &&\n    date1.getMonth() === date2.getMonth() &&\n    date1.getDate() === date2.getDate()\n  );\n};\n\nexport const dateDifference = (date1: Date, date2: Date): number => {\n  return Math.abs(Math.floor((date2.getTime() - date1.getTime()) / (1000 * 60 * 60 * 24)));\n};\n\nexport const startOfWeek = (date: Date): Date => {\n  return subtractsDays(date, date.getDay());\n};\n\nexport const isValidDate = (maybeDate: unknown): boolean => {\n  // it is a date\n  if (Object.prototype.toString.call(maybeDate) === '[object Date]') {\n    if (isNaN((maybeDate as Date).getTime())) return false; // date is not valid\n    return true; // date is valid\n  }\n  // not a date\n  return false;\n};\n\nexport const daysInMonth = (date: Date): number => {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n};\n\n/**\n * For a given date, get the ISO week number\n * @param date\n */\nexport const getWeekNumber = (date: Date): number => {\n  const newYear = new Date(date.getFullYear(), 0, 1);\n  let day = newYear.getDay(); // The day of week the year begins on\n  day = day >= 0 ? day : day + 7;\n  const dayNum =\n    Math.floor(\n      (date.getTime() - newYear.getTime() - (date.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) /\n        86400000,\n    ) + 1;\n  let weekNum;\n  // If the year starts before the middle of a week\n  if (day < 4) {\n    weekNum = Math.floor((dayNum + day - 1) / 7) + 1;\n    if (weekNum > 52) {\n      const nYear = new Date(date.getFullYear() + 1, 0, 1);\n      let nDay = nYear.getDay();\n      nDay = nDay >= 0 ? nDay : nDay + 7;\n      // If the next year starts before the middle of the week, it is week #1 of that year\n      weekNum = nDay < 4 ? 1 : 53;\n    }\n  } else {\n    weekNum = Math.floor((dayNum + day - 1) / 7);\n  }\n  return weekNum;\n};\n\n/**\n * This algorithm is based on the algorithm of Oudin (1940) and quoted in\n * \"Explanatory Supplement to the Astronomical Almanac\", P. Kenneth\n * Seidelmann, editor.\n *\n * @param year The year on which to check when Easter falls (integer)\n */\nexport const computeGregorianEasterDate = (year: number): Record<string, number> => {\n  const Y = year;\n  const C = Math.floor(Y / 100);\n  const N = Y - 19 * Math.floor(Y / 19);\n  const K = Math.floor((C - 17) / 25);\n  let I = C - Math.floor(C / 4) - Math.floor((C - K) / 3) + 19 * N + 15;\n\n  I = I - 30 * Math.floor(I / 30);\n  I = I - Math.floor(I / 28) * (1 - Math.floor(I / 28) * Math.floor(29 / (I + 1)) * Math.floor((21 - N) / 11));\n\n  let J = Y + Math.floor(Y / 4) + I + 2 - C + Math.floor(C / 4);\n  J = J - 7 * Math.floor(J / 7);\n\n  const L = I - J;\n  const M = 3 + Math.floor((L + 40) / 44);\n  const D = L + 28 - 31 * Math.floor(M / 4);\n\n  return { year: Y, month: M, day: D };\n};\n\n/**\n * Returns a range of dates between a given start and end date included\n * @param start The start date\n * @param end The end date\n * @returns An array of dates representing the range\n */\nexport const rangeOfDays = (start: Date, end: Date): Date[] => {\n  const days = dateDifference(start, end);\n  const range: Date[] = [];\n  Array.from(new Array(days + 1), (_x, i) => {\n    range.push(addDays(start, i));\n  });\n  return range;\n};\n\n/**\n * Determines if a given date exists within a range of dates.\n * @param range The range to search against\n * @param date The date to search for in the range\n * @returns `true` if the date exists in tha range or false if otherwise\n */\nexport const rangeContainsDate = (range: Date[], date: Date): boolean => {\n  return range.map((date) => date.toISOString()).includes(date.toISOString());\n};\n\nexport class Dates {\n  readonly #config: RomcalConfig;\n  readonly #year: number;\n  readonly #isLiturgicalYear: boolean;\n\n  constructor(config: RomcalConfig, year: number) {\n    this.#config = config;\n    this.#year = year;\n    this.#isLiturgicalYear = this.#config.scope === 'liturgical';\n  }\n\n  /**\n   * ADVENT\n   */\n\n  /**\n   * Get all the dates occurring in the season of Advent\n   * The length of Advent depends upon the day of the week on which Christmas occurs\n   * @param year Gregorian year\n   */\n  allDatesOfAdvent = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date[] => {\n    if (this.#allDatesOfAdvent[year]) return this.#allDatesOfAdvent[year];\n    const start = this.firstSundayOfAdvent(year);\n    const end = subtractsDays(this.christmas(year), 1);\n    return (this.#allDatesOfAdvent[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfAdvent: Record<string, Date[]> = {};\n\n  /**\n   * Get the all 4 Sundays of Advent\n   * @param year Gregorian year\n   */\n  allSundaysOfAdvent = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date[] => {\n    if (this.#allSundaysOfAdvent[year]) return this.#allSundaysOfAdvent[year];\n    const firstSunday = this.firstSundayOfAdvent(year);\n    return (this.#allSundaysOfAdvent[year] = [\n      firstSunday,\n      addDays(firstSunday, 7),\n      addDays(firstSunday, 14),\n      addDays(firstSunday, 21),\n    ]);\n  };\n  #allSundaysOfAdvent: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of the first Sunday of Advent\n   * (the start of Advent depends upon the day of the week on which Christmas occurs)\n   * @param year Gregorian year\n   */\n  firstSundayOfAdvent = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date => {\n    if (this.#firstSundayOfAdvent[year]) return this.#firstSundayOfAdvent[year];\n    return (this.#firstSundayOfAdvent[year] = Dates.firstSundayOfAdvent(year));\n  };\n  #firstSundayOfAdvent: Record<string, Date> = {};\n\n  /**\n   * Get the date of the first Sunday of Advent\n   * (the start of Advent depends upon the day of the week on which Christmas occurs)\n   * @param year Gregorian year\n   */\n  static firstSundayOfAdvent = (year: number): Date => {\n    switch (Dates.christmas(year).getDay()) {\n      case 0: // Sunday\n        return getUtcDate(year, 11, 27);\n      case 1: // Monday\n        return getUtcDate(year, 12, 3);\n      case 2: // Tuesday\n        return getUtcDate(year, 12, 2);\n      case 3: // Wednesday\n        return getUtcDate(year, 12, 1);\n      case 4: // Thursday\n        return getUtcDate(year, 11, 30);\n      case 5: // Friday\n        return getUtcDate(year, 11, 29);\n      default:\n        // Saturday\n        return getUtcDate(year, 11, 28);\n    }\n  };\n\n  /**\n   * Get the date of an unprivileged weekdays of Advent (until 16 December).\n   * @param dow Day of week, from 1 to 6\n   * @param week Nth week of season, from 1 to 4\n   * @param year Gregorian year\n   */\n  unprivilegedWeekdayOfAdvent = (\n    dow: number,\n    week: number,\n    year = this.#isLiturgicalYear ? this.#year - 1 : this.#year,\n  ): Date | null => {\n    const id = `${year}_${week}_${dow}`;\n    if (this.#unprivilegedWeekdayOfAdvent[id] !== undefined) {\n      return this.#unprivilegedWeekdayOfAdvent[id];\n    }\n    if (dow < 1 || dow > 6 || week < 1 || week > 4) return (this.#unprivilegedWeekdayOfAdvent[id] = null);\n    let date: Date | null = addDays(this.firstSundayOfAdvent(year), (week - 1) * 7 + dow);\n    if (date!.getDate() >= 17 && date!.getMonth() === 11 && date!.getDay() !== 0) date = null;\n    return (this.#unprivilegedWeekdayOfAdvent[id] = date);\n  };\n  #unprivilegedWeekdayOfAdvent: Record<string, Date | null> = {};\n\n  /**\n   * Get the date of a privileged weekday within Advent, from 17 to 24 December,\n   * Sundays excluded.\n   * @param day Nth day of month\n   * @param year Gregorian year\n   */\n  privilegedWeekdayOfAdvent = (\n    day: number,\n    year = this.#isLiturgicalYear ? this.#year - 1 : this.#year,\n  ): Date | null => {\n    const id = `${year}_${day}`;\n    if (this.#privilegedWeekdayOfAdvent[id] !== undefined) {\n      return this.#privilegedWeekdayOfAdvent[id];\n    }\n    if (day < 17 || day > 24) return (this.#privilegedWeekdayOfAdvent[id] = null);\n    let date: Date | null = getUtcDate(year, 12, day);\n    if (date.getDay() === 0) date = null;\n    return (this.#privilegedWeekdayOfAdvent[id] = date);\n  };\n  #privilegedWeekdayOfAdvent: Record<string, Date | null> = {};\n\n  /**\n   * Get the date of a Sundays of Advent (1st to 4th).\n   * @param week Nth week of season, from 1 to 4\n   * @param year Gregorian year\n   */\n  sundayOfAdvent = (week: number, year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date | null => {\n    const id = `${year}_${week}`;\n    if (this.#sundayOfAdvent[id] !== undefined) return this.#sundayOfAdvent[id];\n    if (week < 1 || week > 4) return (this.#sundayOfAdvent[id] = null);\n    return (this.#sundayOfAdvent[id] = addDays(this.firstSundayOfAdvent(year), 7 * (week - 1)));\n  };\n  #sundayOfAdvent: Record<string, Date | null> = {};\n\n  /**\n   * CHRISTMAS TIME\n   */\n\n  /**\n   * Get the date of Christmas\n   * (in the Roman Rite, Christmas always falls on December 25).\n   * @param year Gregorian year\n   */\n  christmas = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date => {\n    if (this.#christmas[year]) return this.#christmas[year];\n    return (this.#christmas[year] = Dates.christmas(year));\n  };\n  #christmas: Record<string, Date> = {};\n\n  /**\n   * Get the date of Christmas\n   * (in the Roman Rite, Christmas always falls on December 25).\n   * @param year Gregorian year\n   */\n  static christmas = (year: number): Date => {\n    return getUtcDate(year, 12, 25);\n  };\n\n  /**\n   * Get all the dates occurring in the octave of Christmas\n   * (from Christmas to Mary Mother of God, inclusive)\n   * @param year Gregorian year\n   */\n  allDatesInOctaveOfChristmas = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date[] => {\n    if (this.#allDatesInOctaveOfChristmas[year]) return this.#allDatesInOctaveOfChristmas[year];\n    return (this.#allDatesInOctaveOfChristmas[year] = rangeOfDays(\n      this.christmas(year),\n      addDays(this.christmas(year), 6),\n    ).concat(this.maryMotherOfGod(year)));\n  };\n  #allDatesInOctaveOfChristmas: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of the nth weekday within the Octave of the Nativity of the Lord.\n   * Sundays and the feast of the Holy Family are excluded.\n   * @param dayOfOctave Nth day within the Octave\n   * @param year Gregorian year\n   */\n  weekdayWithinOctaveOfChristmas = (\n    dayOfOctave: number,\n    year = this.#isLiturgicalYear ? this.#year - 1 : this.#year,\n  ): Date | null => {\n    const id = `${year}_${dayOfOctave}`;\n    if (this.#weekdayWithinOctaveOfChristmas[id] !== undefined) {\n      return this.#weekdayWithinOctaveOfChristmas[id];\n    }\n    if (dayOfOctave < 1 || dayOfOctave > 8) return (this.#weekdayWithinOctaveOfChristmas[id] = null);\n    let date: Date | null = addDays(this.christmas(year), dayOfOctave - 1);\n    if (isSameDate(date, this.holyFamily(year))) date = null;\n    return (this.#weekdayWithinOctaveOfChristmas[id] = date);\n  };\n  #weekdayWithinOctaveOfChristmas: Record<string, Date | null> = {};\n\n  /**\n   * Get all the dates occurring in the season of Christmas.\n   *\n   * *In different Churches, the Christmas Season might end on Jan. 6\n   * (the traditional date of the Feast of the Epiphany), or might last\n   * until the Feast of the Baptism of the Lord (usually the Sunday after\n   * Epiphany), or might even last all the way to Feb. 2 (the Feast of the\n   * Presentation of the Lord, 40 days after Dec. 25) (Candlemass).*\n   *\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  allDatesOfChristmasTime = (\n    year = this.#isLiturgicalYear ? this.#year - 1 : this.#year,\n    epiphanyOnSunday = this.#config.epiphanyOnSunday,\n  ): Date[] => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#allDatesOfChristmasTime[id]) return this.#allDatesOfChristmasTime[id];\n    const start = this.christmas(year);\n    const end = this.baptismOfTheLord(year + 1, epiphanyOnSunday);\n    return (this.#allDatesOfChristmasTime[id] = rangeOfDays(start, end));\n  };\n  #allDatesOfChristmasTime: Record<string, Date[]> = {};\n\n  /**\n   * Get the second Sunday after the Octave of the Nativity of the Lord,\n   * which is not the Epiphany or the Baptism of the Lord.\n   * This can occur only when Epiphany is celebrated the 6 January.\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  secondSundayAfterChristmas = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date | null => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#secondSundayAfterChristmas[id] !== undefined) {\n      return this.#secondSundayAfterChristmas[id];\n    }\n    if (epiphanyOnSunday) return (this.#secondSundayAfterChristmas[id] = null);\n    const date =\n      this.allDatesBeforeEpiphany(year, epiphanyOnSunday).find((d) => d.getDay() === 0) ??\n      this.allDatesAfterEpiphany(year, epiphanyOnSunday).find((d) => d.getDay() === 0);\n    return (this.#secondSundayAfterChristmas[id] = date ?? null);\n  };\n  #secondSundayAfterChristmas: Record<string, Date | null> = {};\n\n  /**\n   * Get all the date before Epiphany (and from January 2)\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  allDatesBeforeEpiphany = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date[] => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#allDatesBeforeEpiphany[id]) return this.#allDatesBeforeEpiphany[id];\n    const start = addDays(this.maryMotherOfGod(year), 1);\n    const epiphany = this.epiphany(year, epiphanyOnSunday);\n\n    // If there are no days between Mary, Mother of God and Epiphany\n    if (isSameDate(start, epiphany)) return (this.#allDatesBeforeEpiphany[id] = []);\n\n    const end = subtractsDays(epiphany, 1);\n    return (this.#allDatesBeforeEpiphany[id] = rangeOfDays(start, end));\n  };\n  #allDatesBeforeEpiphany: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of a weekday before Epiphany (and from January 2)\n   * @param day Nth day of month\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  weekdayBeforeEpiphany = (\n    day: number,\n    year = this.#year,\n    epiphanyOnSunday = this.#config.epiphanyOnSunday,\n  ): Date | null => {\n    const id = `${day}_${year}_${epiphanyOnSunday.toString()}`;\n    if (this.#weekdayBeforeEpiphany[id] !== undefined) return this.#weekdayBeforeEpiphany[id];\n    if (day < 2 || day > 8) return (this.#weekdayBeforeEpiphany[id] = null);\n    return (this.#weekdayBeforeEpiphany[id] =\n      this.allDatesBeforeEpiphany(year, epiphanyOnSunday).find((d) => d.getDate() === day) ?? null);\n  };\n  #weekdayBeforeEpiphany: Record<string, Date | null> = {};\n\n  /**\n   * Get the date of Epiphany\n   *\n   * Depending of the countries or regions:*\n   * - Epiphany is celebrated on the first Sunday after the first Saturday in January,\n   *   which means it can fall on any day from January 2 to January 8.\n   * - *Epiphany is always celebrated on Jan 6.\n   *\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  epiphany = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#epiphany[id]) return this.#epiphany[id];\n\n    // Get the first day of the year\n    const firstDay = getUtcDate(year, 1, 1);\n    let date = getUtcDate(year, 1, 6);\n\n    if (epiphanyOnSunday) {\n      switch (firstDay.getDay()) {\n        // If first day of the year is a Saturday, Mary Mother of God is on that day\n        // and Epiphany is on the next day\n        case 6:\n          date = addDays(firstDay, 1);\n          break;\n        // If first day of the year is a Sunday, Mary Mother of God is on that Sunday and\n        // the Sunday proceeding will be Epiphany\n        case 0:\n          date = addDays(firstDay, 7);\n          break;\n        // If first day of the year is on a weekday (i.e. Monday - Friday),\n        // Epiphany will be celebrated on the Sunday proceeding\n        default:\n          date = startOfWeek(addDays(firstDay, 7));\n          break;\n      }\n    }\n\n    return (this.#epiphany[id] = date);\n  };\n  #epiphany: Record<string, Date> = {};\n\n  /**\n   * Get all the dates after Epiphany, until the day before the Baptism of the Lord.\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  allDatesAfterEpiphany = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date[] => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#allDatesAfterEpiphany[id]) return this.#allDatesAfterEpiphany[id];\n    const start = addDays(this.epiphany(year, epiphanyOnSunday), 1);\n    const baptismOfTheLord = this.baptismOfTheLord(year, epiphanyOnSunday);\n\n    // If there are no days between Epiphany and Baptism of the Lord\n    if (isSameDate(start, baptismOfTheLord)) return (this.#allDatesAfterEpiphany[id] = []);\n\n    const end = subtractsDays(baptismOfTheLord, 1);\n    return (this.#allDatesAfterEpiphany[id] = rangeOfDays(start, end));\n  };\n  #allDatesAfterEpiphany: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of a weekday after Epiphany (and before the Baptism of the Lord)\n   * @param dow Day of week\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  weekdayAfterEpiphany = (\n    dow: number,\n    year = this.#year,\n    epiphanyOnSunday = this.#config.epiphanyOnSunday,\n  ): Date | null => {\n    const id = `${dow}_${year}_${epiphanyOnSunday.toString()}`;\n    if (this.#weekdayAfterEpiphany[id] !== undefined) return this.#weekdayAfterEpiphany[id];\n    if (dow < 1 || dow > 6) return (this.#weekdayAfterEpiphany[id] = null);\n    return (this.#weekdayAfterEpiphany[id] =\n      this.allDatesAfterEpiphany(year, epiphanyOnSunday).find((d) => d.getDay() === dow) ?? null);\n  };\n  #weekdayAfterEpiphany: Record<string, Date | null> = {};\n\n  /**\n   * LENT\n   */\n\n  /**\n   * Get the date of Ash Wednesday\n   *\n   * *Ash Wednesday, a day of fasting, is the first day of Lent in Western\n   * Christianity. It occurs 46 days (40 fasting days, if the 6 Sundays,\n   * which are not days of fast, are excluded) before Easter and can fall\n   * as early as 4 February or as late as 10 March.*\n   *\n   * @param year Gregorian year\n   */\n  ashWednesday = (year = this.#year): Date => {\n    if (this.#ashWednesday[year]) return this.#ashWednesday[year];\n    return (this.#ashWednesday[year] = subtractsDays(this.easterSunday(year), 46));\n  };\n  #ashWednesday: Record<string, Date> = {};\n\n  /**\n   * Get all the Sunday of Lent\n   * @param year Gregorian year\n   */\n  allSundaysOfLent = (year = this.#year): Date[] => {\n    if (this.#allSundaysOfLent[year]) return this.#allSundaysOfLent[year];\n    const firstSunday = addDays(this.ashWednesday(year), 4);\n    return (this.#allSundaysOfLent[year] = [\n      firstSunday,\n      addDays(firstSunday, 7),\n      addDays(firstSunday, 14),\n      addDays(firstSunday, 21),\n      addDays(firstSunday, 28),\n      addDays(firstSunday, 35),\n    ]);\n  };\n  #allSundaysOfLent: Record<string, Date[]> = {};\n\n  /**\n   * Get all the dates occurring in Lent (from Ash Wednesday and runs until the day before Holy Thursday)\n   * @param year Gregorian year\n   */\n  allDatesOfLent = (year = this.#year): Date[] => {\n    if (this.#allDatesOfLent[year]) return this.#allDatesOfLent[year];\n    const start = this.ashWednesday(year);\n    const end = this.holyThursday(year);\n    return (this.#allDatesOfLent[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfLent: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of Palm Sunday\n   * @param year Gregorian year\n   */\n  palmSunday = (year = this.#year): Date => {\n    if (this.#palmSunday[year]) return this.#palmSunday[year];\n    return (this.#palmSunday[year] = subtractsDays(this.easterSunday(year), 7));\n  };\n  #palmSunday: Record<string, Date> = {};\n\n  /**\n   * HOLY WEEK\n   */\n\n  /**\n   * Get the date of Holy Thursday (or Maundy Thursday)\n   * @param year Gregorian year\n   */\n  holyThursday = (year = this.#year): Date => {\n    if (this.#holyThursday[year]) return this.#holyThursday[year];\n    return (this.#holyThursday[year] = subtractsDays(this.easterSunday(year), 3));\n  };\n  #holyThursday: Record<string, Date> = {};\n\n  /**\n   * Get the date of Good Friday (or Holy Friday)\n   *\n   * *Good Friday is a Christian religious holiday commemorating the crucifixion\n   * of Jesus Christ and his death at Calvary. The holiday is observed during Holy Week as part of the\n   * Paschal Triduum on the Friday preceding Easter Sunday*\n   *\n   * @param year Gregorian year\n   */\n  goodFriday = (year = this.#year): Date => {\n    if (this.#goodFriday[year]) return this.#goodFriday[year];\n    return (this.#goodFriday[year] = subtractsDays(this.easterSunday(year), 2));\n  };\n  #goodFriday: Record<string, Date> = {};\n\n  /**\n   * Get the date of Holy Saturday\n   *\n   * *Holy Saturday (Latin: Sabbatum Sanctum) i.e. the Saturday of Holy Week, also known as the\n   * Great Sabbath, Black Saturday, or Easter Eve,[1] and called \"Joyous Saturday\" or \"the\n   * Saturday of Light\" among Coptic Christians, is the day after Good Friday. It is the day\n   * before Easter and the last day of Holy Week in which Christians prepare for Easter.\n   * It commemorates the day that Jesus Christ's body lay in the tomb and the Harrowing of Hell.*\n   *\n   * @param year Gregorian year\n   */\n  holySaturday = (year = this.#year): Date => {\n    if (this.#holySaturday[year]) return this.#holySaturday[year];\n    return (this.#holySaturday[year] = subtractsDays(this.easterSunday(year), 1));\n  };\n  #holySaturday: Record<string, Date> = {};\n\n  /**\n   * Get all the date occurring during Holy Week\n   *\n   * *Holy Week is the week just before Easter.\n   * In the west, it is also the last week of Lent, and includes\n   * Palm Sunday, Holy Wednesday, Maundy Thursday (Holy Thursday),\n   * Good Friday (Holy Friday), and Holy Saturday.\n   * It does not include Easter Sunday.*\n   *\n   * @param year Gregorian year\n   */\n  allDatesOfHolyWeek = (year = this.#year): Date[] => {\n    if (this.#allDatesOfHolyWeek[year]) return this.#allDatesOfHolyWeek[year];\n    const start = this.palmSunday(year);\n    const end = this.holySaturday(year);\n    return (this.#allDatesOfHolyWeek[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfHolyWeek: Record<string, Date[]> = {};\n\n  /**\n   * PASCHAL TRIDUUM\n   */\n\n  /**\n   * Get all the dates occurring in the Paschal Triduum\n   *\n   * The Paschal Triduum of the Passion and Resurrection of the Lord begins with the\n   * evening Mass of the Lord\u2019s Supper, has its centre in the Easter Vigil, and closes with\n   * Vespers (Evening Prayer) of the Sunday of the Resurrection.\n   *\n   * @param year Gregorian year\n   */\n  allDatesOfPaschalTriduum = (year = this.#year): Date[] => {\n    if (this.#allDatesOfPaschalTriduum[year]) return this.#allDatesOfPaschalTriduum[year];\n    const start = this.holyThursday(year);\n    const end = this.easterSunday(year);\n    return (this.#allDatesOfPaschalTriduum[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfPaschalTriduum: Record<string, Date[]> = {};\n\n  /**\n   * EASTER TIME\n   */\n\n  /**\n   * Get the date of Easter\n   * @param year Gregorian year\n   */\n  easterSunday = (year = this.#year): Date => {\n    if (this.#easter[year]) return this.#easter[year];\n    const { month, day } = computeGregorianEasterDate(year);\n    return (this.#easter[year] = getUtcDate(year, month, day));\n  };\n  #easter: Record<string, Date> = {};\n\n  /**\n   * Get all the dates occurring during the octave of Easter\n   * from Easter Sunday until the Sunday following Easter (Divine Mercy Sunday), inclusive.\n   * @param year Gregorian year\n   */\n  allDatesInOctaveOfEaster = (year = this.#year): Date[] => {\n    if (this.#allDatesInOctaveOfEaster[year]) return this.#allDatesInOctaveOfEaster[year];\n    const start = this.easterSunday(year);\n    const end = this.divineMercySunday(year);\n    return (this.#allDatesInOctaveOfEaster[year] = rangeOfDays(start, end));\n  };\n  #allDatesInOctaveOfEaster: Record<string, Date[]> = {};\n\n  /**\n   * Get all the Sunday of Easter\n   *\n   * Easter Time is the period of fifty days from Easter Sunday to Pentecost Sunday (inclusive).\n   * All Sundays in this period are counted as Sundays of Easter.\n   *\n   * @param year Gregorian year\n   */\n  allSundaysOfEaster = (year = this.#year): Date[] => {\n    if (this.#allSundaysOfEaster[year]) return this.#allSundaysOfEaster[year];\n    const firstSunday = this.easterSunday(year);\n    return (this.#allSundaysOfEaster[year] = [\n      firstSunday,\n      addDays(firstSunday, 7),\n      addDays(firstSunday, 14),\n      addDays(firstSunday, 21),\n      addDays(firstSunday, 28),\n      addDays(firstSunday, 35),\n      addDays(firstSunday, 42),\n      addDays(firstSunday, 49),\n    ]);\n  };\n  #allSundaysOfEaster: Record<string, Date[]> = {};\n\n  weekdayOrSundayOfEasterTime = (\n    dow: number,\n    week: number,\n    year = this.#year,\n    ascensionOnSunday = this.#config.ascensionOnSunday,\n  ): Date | null => {\n    const id = `${year}_${ascensionOnSunday}_${week}_${dow}`;\n    if (this.#weekdayOrSundayOfEasterTime[id] !== undefined) {\n      return this.#weekdayOrSundayOfEasterTime[id];\n    }\n    if (week < 1 || week > 7 || dow < 0 || dow > 6) {\n      return (this.#weekdayOrSundayOfEasterTime[id] = null);\n    }\n    const date = addDays(this.easterSunday(year), (week - 1) * 7 + dow);\n    const ascension = this.ascension(year, ascensionOnSunday);\n    return (this.#weekdayOrSundayOfEasterTime[id] = isSameDate(ascension, date) ? null : date);\n  };\n  #weekdayOrSundayOfEasterTime: Record<string, Date | null> = {};\n\n  /**\n   * Get all the dates occurring in Easter Time.\n   * Easter Time is the period of fifty days from Easter Sunday to Pentecost Sunday.\n   * @param year Gregorian year\n   */\n  allDatesOfEasterTime = (year = this.#year): Date[] => {\n    if (this.#allDatesOfEasterTime[year]) return this.#allDatesOfEasterTime[year];\n    const start = this.easterSunday(year);\n    const end = this.pentecostSunday(year);\n    return (this.#allDatesOfEasterTime[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfEasterTime: Record<string, Date[]> = {};\n\n  /**\n   * Get the date of Divine Mercy Sunday\n   * (the Sunday after Easter, in the Octave of Easter)\n   * @param year Gregorian year\n   */\n  divineMercySunday = (year = this.#year): Date => {\n    if (this.#divineMercySunday[year]) return this.#divineMercySunday[year];\n    return (this.#divineMercySunday[year] = addDays(this.easterSunday(year), 7));\n  };\n  #divineMercySunday: Record<string, Date> = {};\n\n  /**\n   * Get the date of Pentecost\n   * (occurs 49 days after Easter)\n   * @param year Gregorian year\n   */\n  pentecostSunday = (year = this.#year): Date => {\n    if (this.#pentecostSunday[year]) return this.#pentecostSunday[year];\n    return (this.#pentecostSunday[year] = addDays(this.easterSunday(year), 49));\n  };\n  #pentecostSunday: Record<string, Date> = {};\n\n  //==================================================================================\n  // Ordinary Time\n  //==================================================================================\n\n  /**\n   * Get all the dates occurring in Ordinary Time\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  allDatesOfOrdinaryTime = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date[] => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#allDatesOfOrdinaryTime[id]) return this.#allDatesOfOrdinaryTime[id];\n    return (this.#allDatesOfOrdinaryTime[id] = [\n      ...this.allDatesOfEarlyOrdinaryTime(year, epiphanyOnSunday),\n      ...this.allDatesOfLateOrdinaryTime(year),\n    ]);\n  };\n  #allDatesOfOrdinaryTime: Record<string, Date[]> = {};\n\n  /**\n   * Get all the dates of the Ordinary Time, from the day after the Christmas Time\n   * till the day before Ash Wednesday.\n   *\n   * *Ordinary Time in the early part of the year begins\n   * the day after the Baptism of the Lord and concludes\n   * the day before Ash Wednesday.*\n   *\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  allDatesOfEarlyOrdinaryTime = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date[] => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#allDatesOfEarlyOrdinaryTime[id]) return this.#allDatesOfEarlyOrdinaryTime[id];\n    const start = addDays(this.baptismOfTheLord(year, epiphanyOnSunday), 1);\n    const end = subtractsDays(this.ashWednesday(year), 1);\n    return (this.#allDatesOfEarlyOrdinaryTime[id] = rangeOfDays(start, end));\n  };\n  #allDatesOfEarlyOrdinaryTime: Record<string, Date[]> = {};\n\n  /**\n   * Get all Sundays that fall within the period of early Ordinary Time\n   * @param year Gregorian year\n   */\n  sundaysOfEarlyOrdinaryTime = (year = this.#year): Date[] => {\n    if (this.#sundaysOfEarlyOrdinaryTime[year]) return this.#sundaysOfEarlyOrdinaryTime[year];\n    return (this.#sundaysOfEarlyOrdinaryTime[year] = this.allDatesOfEarlyOrdinaryTime(year).filter(\n      (d) => d.getDay() === 0,\n    ));\n  };\n  #sundaysOfEarlyOrdinaryTime: Record<string, Date[]> = {};\n\n  /**\n   * Get all the dates of Ordinary Time after Pentecost to the day before the\n   * First Sunday of Advent.\n   * @param year Gregorian year\n   */\n  allDatesOfLateOrdinaryTime = (year = this.#year): Date[] => {\n    if (this.#allDatesOfLateOrdinaryTime[year]) return this.#allDatesOfLateOrdinaryTime[year];\n    const start = addDays(this.pentecostSunday(year), 1);\n    const end = subtractsDays(this.firstSundayOfAdvent(year), 1);\n    return (this.#allDatesOfLateOrdinaryTime[year] = rangeOfDays(start, end));\n  };\n  #allDatesOfLateOrdinaryTime: Record<string, Date[]> = {};\n\n  /**\n   * Gets all the Sundays that fall within the period of late Ordinary Time\n   * @param year Gregorian year\n   */\n  allSundaysOfLateOrdinaryTime = (year = this.#year): Date[] => {\n    if (this.#allSundaysOfLateOrdinaryTime[year]) return this.#allSundaysOfLateOrdinaryTime[year];\n    return (this.#allSundaysOfLateOrdinaryTime[year] = this.allDatesOfLateOrdinaryTime(year).filter(\n      (d) => d.getDay() === 0,\n    ));\n  };\n  #allSundaysOfLateOrdinaryTime: Record<string, Date[]> = {};\n\n  christTheKingSunday = (year = this.#year): Date => {\n    /**\n     * Get the date of the Solemnity of Christ the King\n     *\n     * *The Solemnity of Christ the King is always the 34th (and last) Sunday of Ordinary Time\n     * and is the week before the First Sunday of Advent. The Sundays of Ordinary Time in the\n     * latter part of the year are numbered backwards from Christ the King to Pentecost.*\n     */\n    if (this.#christTheKingSunday[year]) return this.#christTheKingSunday[year];\n    return (this.#christTheKingSunday[year] = subtractsDays(this.firstSundayOfAdvent(year), 7));\n  };\n  #christTheKingSunday: Record<string, Date> = {};\n\n  dateOfOrdinaryTime = (\n    dow: number,\n    week: number,\n    year = this.#year,\n    epiphanyOnSunday = this.#config.epiphanyOnSunday,\n  ): Date | null => {\n    const id = year + epiphanyOnSunday.toString();\n\n    if (this.#dateOfOrdinaryTime[id] === undefined) {\n      const early = this.allDatesOfEarlyOrdinaryTime(year, epiphanyOnSunday);\n      const late = this.allDatesOfLateOrdinaryTime(year);\n      const lateOrdinaryStartWeekCount = Math.floor(35 - (late.length + 1) / 7);\n\n      const trinitySunday = this.trinitySunday(year).getTime();\n      const corpusChristi = this.corpusChristi(year).getTime();\n      const mostSacredHeartOfJesus = this.mostSacredHeartOfJesus(year).getTime();\n\n      const groupBy = (dates: Date[], isEarlyOrdinaryTime: boolean) =>\n        dates.reduce((result: Record<string, Record<string, Date | null>>, item, idx) => {\n          const week = isEarlyOrdinaryTime\n            ? // Early Ordinary Time\n              item.getDay() === 0\n              ? Math.floor(idx / 7) + 2\n              : Math.floor(idx / 7) + 1\n            : // Late Ordinary Time\n            item.getDay() === 0\n            ? lateOrdinaryStartWeekCount + Math.floor(idx / 7) + 1\n            : lateOrdinaryStartWeekCount + Math.floor(idx / 7);\n\n          const dateTime = item.getTime();\n          const date =\n            dateTime === trinitySunday || dateTime === corpusChristi || dateTime === mostSacredHeartOfJesus\n              ? null\n              : item;\n\n          return { ...result, [week]: { ...(result[week] || []), [item.getDay()]: date } };\n        }, {});\n\n      this.#dateOfOrdinaryTime[id] = {\n        ...groupBy(early, true),\n        ...groupBy(late, false),\n      };\n    }\n\n    return (this.#dateOfOrdinaryTime[id][week] && this.#dateOfOrdinaryTime[id][week][dow]) ?? null;\n  };\n  #dateOfOrdinaryTime: Record<string, Record<string, Record<string, Date | null>>> = {};\n\n  //==================================================================================\n  // Fixed and movable Solemnities\n  //==================================================================================\n\n  /**\n   * Get the date of the Solemnity of Mary, Holy Mother of God\n   *\n   * *The Solemnity of Mary, the Holy Mother of God is a\n   * feast day of the Blessed Virgin Mary under the aspect\n   * of her motherhood of Jesus Christ, whom Christians\n   * see as the Lord, Son of God. It is celebrated by\n   * the Latin Rite of the Catholic Church on 1 January,\n   * the Octave (8th) day of Christmas, and in some\n   * countries is a Holy day of obligation.*\n   *\n   * @param year Gregorian year\n   */\n  maryMotherOfGod = (year = this.#year): Date => {\n    if (this.#maryMotherOfGod[year]) return this.#maryMotherOfGod[year];\n    return (this.#maryMotherOfGod[year] = getUtcDate(year, 1, 1));\n  };\n  #maryMotherOfGod: Record<string, Date> = {};\n\n  /**\n   * Get the date of the celebration of the Annunciation\n   *\n   * *Occurs on March 25th, moved to Monday after Divine Mercy Sunday\n   * if it is within Holy Week or Easter Octave*\n   *\n   * @param year Gregorian year\n   */\n  annunciation = (year = this.#year): Date => {\n    if (this.#annunciation[year]) return this.#annunciation[year];\n\n    let date = getUtcDate(year, 3, 25);\n\n    // If it occurs during Holy Week or the Octave of Easter\n    // it is transferred to the Monday of the Second Week of Easter.\n    const palmSunday = this.palmSunday(year);\n    const divineMercySunday = this.divineMercySunday(year);\n    if (date.getTime() >= palmSunday.getTime() && date.getTime() <= divineMercySunday.getTime()) {\n      date = addDays(divineMercySunday, 1);\n    }\n\n    return (this.#annunciation[year] = date);\n  };\n  #annunciation: Record<string, Date> = {};\n\n  /**\n   * Get the date of the celebration of the birth of John the Baptist\n   *\n   * *The Nativity of St John the Baptist on June 24 comes three months after\n   * the celebration on March 25 of the Annunciation, when the Archangel Gabriel\n   * told Our Lady that her cousin Elizabeth was in her sixth month of pregnancy,\n   * and six months before the Christmas celebration of the birth of Jesus.\n   * The purpose of these festivals is not to celebrate the exact dates of these\n   * events, but simply to commemorate them in an interlinking way.\n   * The Nativity of St. John the Baptist anticipates the feast of Christmas.*\n   *\n   * @param year Gregorian year\n   */\n  nativityOfJohnTheBaptist = (year = this.#year): Date => {\n    if (this.#nativityOfJohnTheBaptist[year]) return this.#nativityOfJohnTheBaptist[year];\n    return (this.#nativityOfJohnTheBaptist[year] = getUtcDate(year, 6, 24));\n  };\n  #nativityOfJohnTheBaptist: Record<string, Date> = {};\n\n  /**\n   * Get the date of the solemnity of Saints Peter and Paul\n   *\n   * *The Feast of Saints Peter and Paul or Solemnity of Saints Peter and Paul is a\n   * liturgical feast in honour of the martyrdom in Rome of the apostles Saint Peter\n   * and Saint Paul, which is observed on 29 June. The celebration is of ancient origin,\n   * the date selected being the anniversary either of their death or of the translation\n   * of their relics.*\n   *\n   * @param year Gregorian year\n   */\n  peterAndPaulApostles = (year = this.#year): Date => {\n    if (this.#peterAndPaulApostles[year]) return this.#peterAndPaulApostles[year];\n    return (this.#peterAndPaulApostles[year] = getUtcDate(year, 6, 29));\n  };\n  #peterAndPaulApostles: Record<string, Date> = {};\n\n  /**\n   * Get the date of the celebration of the Assumption\n   *\n   * *The Latin Catholic Feast of the Assumption is celebrated on August 15\n   * was the bodily taking up of the Virgin Mary into Heaven at the end\n   * of her earthly life.*\n   *\n   * @param year Gregorian year\n   */\n  assumption = (year = this.#year): Date => {\n    if (this.#assumption[year]) return this.#assumption[year];\n    return (this.#assumption[year] = getUtcDate(year, 8, 15));\n  };\n  #assumption: Record<string, Date> = {};\n\n  /**\n   * Get the date of the solemnity of All Saints\n   *\n   * *All Saints' Day is a solemnity celebrated on 1 November by the Roman\n   * Catholic Church of Latin rite in honour of all the saints, known\n   * and unknown.*\n   *\n   * @param year Gregorian year\n   */\n  allSaints = (year = this.#year): Date => {\n    if (this.#allSaints[year]) return this.#allSaints[year];\n    return (this.#allSaints[year] = getUtcDate(year, 11, 1));\n  };\n  #allSaints: Record<string, Date> = {};\n\n  /**\n   * Get the date of the celebration of the Immaculate Conception\n   *\n   * *The Catholic Church celebrates the Feast of the Immaculate Conception on December 8\n   * The Immaculate Conception, according to the teaching of the Catholic Church, was the\n   * conception of the Blessed Virgin Mary in the womb of her mother, Saint Anne, free from\n   * original sin by virtue of the foreseen merits of her son Jesus Christ. The Catholic\n   * Church teaches that Mary was conceived by normal biological means, but God acted upon\n   * her soul (keeping her \"immaculate\") at the time of her conception.*\n   *\n   * @param year Gregorian year\n   *\n   */\n  immaculateConceptionOfMary = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date => {\n    if (this.#immaculateConceptionOfMary[year]) return this.#immaculateConceptionOfMary[year];\n    let date = getUtcDate(year, 12, 8);\n    // If this solemnity falls on a Sunday, is transferred to the\n    // following Monday.\n    if (date.getDay() === 0) date = addDays(date, 1);\n    return (this.#immaculateConceptionOfMary[year] = date);\n  };\n  #immaculateConceptionOfMary: Record<string, Date> = {};\n\n  /**\n   * Get the date of the solemnity of Ascension\n   *\n   * *In 1999, an Indult for the Transfer of the Solemnity of the Ascension was issued by the\n   * United States Conference of Catholic Bishops allowing each ecclesiastical province to\n   * determine if the Ascension should be celebrated on its proper Thursday (39 days after\n   * Easter) or on the Seventh Sunday of Easter (42 days after Easter). The following\n   * provinces of the United States have retained the celebration of Ascension on its proper\n   * Thursday. All other provinces of the United States have transferred the celebration of\n   * the Ascension to the Seventh Sunday of Easter.*\n   *\n   * @param year Gregorian year\n   * @param ascensionOnSunday Is Ascension is fixed on a Sunday\n   */\n  ascension = (year = this.#year, ascensionOnSunday = this.#config.ascensionOnSunday): Date => {\n    const id = year + ascensionOnSunday.toString();\n    if (this.#ascension[id]) return this.#ascension[id];\n    return (this.#ascension[id] = ascensionOnSunday\n      ? // If specified, move Ascension to Sunday\n        addDays(this.easterSunday(year), 42)\n      : // else by default, Ascension on Thursday\n        addDays(this.easterSunday(year), 39));\n  };\n  #ascension: Record<string, Date> = {};\n\n  /**\n   * Get the date of the Solemnity of Trinity Sunday\n   * (occurs 56 days after Easter)\n   * @param year Gregorian year\n   */\n  trinitySunday = (year = this.#year): Date => {\n    if (this.#trinitySunday[year]) return this.#trinitySunday[year];\n    return (this.#trinitySunday[year] = addDays(this.easterSunday(year), 56));\n  };\n  #trinitySunday: Record<string, Date> = {};\n\n  /**\n   * Get the date of the solemnity of Corpus Christi\n   *\n   * *The Solemnity of Corpus Christi occurs 60 days after Easter, if it is celebrated on Thursday\n   * of the Seventh Week of Easter. In those places where Corpus Christi is not a holiday, it is\n   * transferred to the following Sunday (63 days after Easter).*\n   *\n   * If second argument is false, Corpus Christi is moved to the Thursday of the 7th Week of Easter.\n   *\n   * @param year Gregorian year\n   * @param corpusChristiOnSunday Is Corpus Christi is fixed on a Sunday\n   */\n  corpusChristi = (year = this.#year, corpusChristiOnSunday = this.#config.corpusChristiOnSunday): Date => {\n    const id = year + corpusChristiOnSunday.toString();\n    if (this.#corpusChristi[id]) return this.#corpusChristi[id];\n    return (this.#corpusChristi[id] = corpusChristiOnSunday\n      ? // By default Corpus Christi on Sunday\n        addDays(this.easterSunday(year), 63)\n      : // If specified, move Corpus Christi to Thursday\n        addDays(this.easterSunday(year), 60));\n  };\n  #corpusChristi: Record<string, Date> = {};\n\n  /**\n   * Get the date of the Solemnity of the Sacred Heart of Jesus\n   * (occurs 68 days after Easter)\n   * @param year Gregorian year\n   */\n  mostSacredHeartOfJesus = (year = this.#year): Date => {\n    if (this.#mostSacredHeartOfJesus[year]) return this.#mostSacredHeartOfJesus[year];\n    return (this.#mostSacredHeartOfJesus[year] = addDays(this.easterSunday(year), 68));\n  };\n  #mostSacredHeartOfJesus: Record<string, Date> = {};\n\n  /**\n   * Get the date of the celebration of the Immaculate Heart of Mary\n   * (occurs 69 days after Easter)\n   * @param year Gregorian year\n   */\n  immaculateHeartOfMary = (year = this.#year): Date => {\n    if (this.#immaculateHeartOfMary[year]) return this.#immaculateHeartOfMary[year];\n    return (this.#immaculateHeartOfMary[year] = addDays(this.easterSunday(year), 69));\n  };\n  #immaculateHeartOfMary: Record<string, Date> = {};\n\n  /**\n   * FEASTS OF THE LORD\n   * If a fixed date Feast of the Lord occurs on a Sunday in Ordinary Time,\n   * the feast is celebrated in place of the Sunday.\n   * (e.g., Presentation of the Lord, 1992).\n   */\n\n  /**\n   * Feast of the Holy Family\n   *\n   * If Christmas falls on a Sunday, then Holy Family is celebrated on December 30.\n   * Otherwise, Holy Family is the Sunday after Christmas.\n   *\n   * @param year Gregorian year\n   */\n  holyFamily = (year = this.#isLiturgicalYear ? this.#year - 1 : this.#year): Date => {\n    if (this.#holyFamily[year]) return this.#holyFamily[year];\n    return (this.#holyFamily[year] =\n      this.christmas(year).getDay() === 0\n        ? // If Christmas is on Sunday, then Holy Family is on the 30th Dec\n          getUtcDate(year, 12, 30)\n        : // Holy Family is 1 week after Christmas when Christmas is on a weekday\n          startOfWeek(addDays(this.christmas(year), 7)));\n  };\n  #holyFamily: Record<string, Date> = {};\n\n  /**\n   * Get the date of the Baptism of the Lord\n   *\n   * *The Baptism of the Lord (or the Baptism of Christ) is the feast day\n   * commemorating the baptism of Jesus in the Jordan River by John the\n   * Baptist. Originally the baptism of Christ was celebrated on Epiphany,\n   * which commemorates the coming of the Magi, the baptism of Christ, and\n   * the wedding at Cana. Over time in the West, however, the celebration of\n   * the baptism of the Lord came to be commemorated as a distinct feast from\n   * Epiphany. It is celebrated in Anglican and Lutheran Churches on the first\n   * Sunday following The Epiphany of Our Lord (6 January).*\n   *\n   * @param year Gregorian year\n   * @param epiphanyOnSunday Is Epiphany is fixed on a Sunday\n   */\n  baptismOfTheLord = (year = this.#year, epiphanyOnSunday = this.#config.epiphanyOnSunday): Date => {\n    const id = year + epiphanyOnSunday.toString();\n    if (this.#baptismOfTheLord[id]) return this.#baptismOfTheLord[id];\n\n    const epiphany = this.epiphany(year, epiphanyOnSunday);\n\n    // If Epiphany is celebrated on Jan. 6\n    // the Baptism of the Lord occurs on the Sunday following Jan. 6.\n    if (epiphany.getDate() === 6) {\n      return startOfWeek(addDays(epiphany, 7));\n    }\n    // If Epiphany occurs on Sunday Jan. 7 or Sunday Jan. 8,\n    //  then the Baptism of the Lord is the next day (Monday)\n    if ((epiphany.getDay() === 0 && epiphany.getDate() === 7) || epiphany.getDate() === 8) {\n      return addDays(epiphany, 1);\n    }\n    // If Epiphany occurs before Jan. 6, the Sunday\n    // following Epiphany is the Baptism of the Lord.\n    return (this.#baptismOfTheLord[id] = startOfWeek(addDays(epiphany, 7)));\n  };\n  #baptismOfTheLord: Record<string, Date> = {};\n\n  /**\n   * Get the date of the Presentation of the Lord\n   *\n   * *In the Roman Catholic Church, the Feast of the Presentation of the Lord is\n   * a Feast Day occurring between the Feast of the Conversion of St. Paul the\n   * Apostle on 25 January and the Feast of the Chair of St. Peter the Apostle on\n   * 22 February. In some Western liturgical churches, Vespers (or Compline) on the\n   * Feast of the Presentation marks the end of the Epiphany season.*\n   *\n   * @param year Gregorian year\n   */\n  presentationOfTheLord = (year = this.#year): Date => {\n    if (this.#presentationOfTheLord[year]) return this.#presentationOfTheLord[year];\n    return (this.#presentationOfTheLord[year] = getUtcDate(year, 2, 2));\n  };\n  #presentationOfTheLord: Record<string, Date> = {};\n\n  /**\n   * Get the date for the Transfiguration of our Lord.\n   * @param year Gregorian year\n   */\n  transfiguration = (year = this.#year): Date => {\n    if (this.#transfiguration[year]) return this.#transfiguration[year];\n    return (this.#transfiguration[year] = getUtcDate(year, 8, 6));\n  };\n  #transfiguration: Record<string, Date> = {};\n\n  /**\n   * Get the date for The Exultation of The Holy Cross.\n   * @param year Gregorian year\n   */\n  exaltationOfTheHolyCross = (year = this.#year): Date => {\n    if (this.#exaltationOfTheHolyCross[year]) return this.#exaltationOfTheHolyCross[year];\n    return (this.#exaltationOfTheHolyCross[year] = getUtcDate(year, 9, 14));\n  };\n  #exaltationOfTheHolyCross: Record<string, Date> = {};\n\n  startOfSeasons = (year = this.#year): Record<Seasons, Date> => {\n    if (this.#startOfSeasons[year]) return this.#startOfSeasons[year];\n    return (this.#startOfSeasons[year] = {\n      [Seasons.Advent]: this.firstSundayOfAdvent(year - 1),\n      [Seasons.ChristmasTime]: this.christmas(year - 1),\n      [Seasons.Lent]: this.ashWednesday(year),\n      [Seasons.PaschalTriduum]: this.holyThursday(year),\n      [Seasons.EasterTime]: this.easterSunday(year),\n      [Seasons.OrdinaryTime]: addDays(this.baptismOfTheLord(year), 1),\n    });\n  };\n  #startOfSeasons: Record<number, Record<Seasons, Date>> = {};\n\n  endOfSeasons = (year = this.#year): Record<Seasons, Date> => {\n    if (this.#endOfSeasons[year]) return this.#endOfSeasons[year];\n    return (this.#endOfSeasons[year] = {\n      [Seasons.Advent]: getUtcDate(year - 1, 12, 24),\n      [Seasons.ChristmasTime]: this.baptismOfTheLord(year),\n      [Seasons.Lent]: this.holyThursday(year),\n      [Seasons.PaschalTriduum]: this.easterSunday(year),\n      [Seasons.EasterTime]: this.pentecostSunday(year),\n      [Seasons.OrdinaryTime]: addDays(this.christTheKingSunday(year), 6),\n    });\n  };\n  #endOfSeasons: Record<number, Record<Seasons, Date>> = {};\n}\n", "import { StringMap } from 'i18next';\nimport { Color } from '../constants/colors';\nimport { PROPER_OF_TIME_NAME } from '../constants/general-calendar-names';\nimport { PatronTitle, Title } from '../constants/martyrology-metadata';\nimport { Period, Periods } from '../constants/periods';\nimport { Precedence, Precedences } from '../constants/precedences';\nimport { Rank, Ranks } from '../constants/ranks';\nimport { Season, Seasons } from '../constants/seasons';\nimport { Key } from '../types/common';\nimport {\n  BaseLiturgicalDay,\n  DateDef,\n  LiturgyDayDiff,\n  RomcalCalendarMetadata,\n  RomcalCyclesMetadata,\n} from '../types/liturgical-day';\nimport { LiturgicalDayConfigOutput } from '../types/liturgical-day-config';\nimport { MartyrologyItem } from '../types/martyrology';\nimport { LiturgicalDayConfig } from './liturgical-day-config';\nimport LiturgicalDayDef from './liturgical-day-def';\n\nclass LiturgicalDay implements BaseLiturgicalDay {\n  readonly #liturgicalDayDef: LiturgicalDayDef;\n  readonly #liturgicalDayConfig: LiturgicalDayConfig;\n  readonly key: Key;\n  readonly date: string;\n  readonly dateDef: DateDef;\n  readonly precedence: Precedence;\n  readonly rank: Rank;\n  readonly allowSimilarRankItems: boolean;\n  readonly isHolyDayOfObligation: boolean;\n  isOptional: boolean;\n  readonly i18nDef: [string] | [string, StringMap | string];\n  readonly seasons: Season[];\n  readonly periods: Period[];\n  readonly colors: Color[];\n  readonly martyrology: MartyrologyItem[];\n  readonly titles: (Title | PatronTitle)[];\n  readonly calendar: RomcalCalendarMetadata;\n  readonly cycles: RomcalCyclesMetadata;\n  readonly fromCalendar: Lowercase<string>;\n  readonly fromExtendedCalendars: LiturgyDayDiff[];\n  weekday?: LiturgicalDay;\n\n  public get name(): string {\n    return this.#liturgicalDayDef.name;\n  }\n\n  public get rankName(): string {\n    return this.#liturgicalDayDef.rankName;\n  }\n\n  #colorNames?: string[];\n  public get colorNames(): string[] {\n    if (this.#colorNames !== undefined) return this.#colorNames;\n    return (this.#colorNames = this.#liturgicalDayConfig.config.getLiturgicalColorNames(this.colors));\n  }\n\n  #seasonNames?: string[];\n  public get seasonNames(): string[] {\n    if (this.#seasonNames !== undefined) return this.#seasonNames;\n    return (this.#seasonNames = this.#liturgicalDayConfig.config.getSeasonNames(this.seasons));\n  }\n\n  /**\n   * Get the calendar configuration within this liturgical day is computed\n   */\n  public get config(): LiturgicalDayConfigOutput {\n    return this.#liturgicalDayConfig.getConfigObject();\n  }\n\n  /**\n   * Get the liturgical day definition\n   */\n  public get definition(): LiturgicalDayDef {\n    return this.#liturgicalDayDef;\n  }\n\n  constructor(\n    def: LiturgicalDayDef,\n    date: Date,\n    liturgicalDayConfig: LiturgicalDayConfig,\n    calendar: RomcalCalendarMetadata,\n    cycles: RomcalCyclesMetadata,\n    baseData: LiturgicalDay | null,\n    weekday: LiturgicalDay | null,\n  ) {\n    this.#liturgicalDayDef = def;\n    this.#liturgicalDayConfig = liturgicalDayConfig;\n    this.key = def.key;\n    this.date = date.toISOString().substr(0, 10);\n    this.dateDef = def.dateDef;\n    this.precedence = def.precedence;\n    this.rank = def.rank;\n    this.allowSimilarRankItems = def.allowSimilarRankItems;\n    this.isHolyDayOfObligation = calendar.dayOfWeek === 0 ? true : def.isHolyDayOfObligation;\n    this.isOptional = def.isOptional;\n    this.i18nDef = def.i18nDef;\n    this.seasons = baseData?.seasons ?? def.seasons;\n\n    this.periods = baseData?.periods ?? def.periods;\n\n    // The second Sunday after the Christmas octave can be before or after the Epiphany,\n    // and this can be determined from the definition of the Proper of the Time,\n    // without having a liturgical year context.\n    if (def.fromCalendar === PROPER_OF_TIME_NAME && this.key === 'second_sunday_after_christmas') {\n      if (date.getTime() >= liturgicalDayConfig.dates.epiphany().getTime()) {\n        this.periods.unshift(Periods.DaysFromEpiphany);\n      } else if (date.getTime() > liturgicalDayConfig.dates.maryMotherOfGod().getTime()) {\n        this.periods.unshift(Periods.DaysBeforeEpiphany);\n      }\n    }\n\n    // Specify the early/late period of an ordinary time liturgical day item\n    if (def.fromCalendar === PROPER_OF_TIME_NAME && this.seasons[0] === Seasons.OrdinaryTime) {\n      if (date.getTime() < liturgicalDayConfig.dates.pentecostSunday().getTime()) {\n        this.periods.unshift(Periods.EarlyOrdinaryTime);\n      } else {\n        this.periods.unshift(Periods.LateOrdinaryTime);\n      }\n    }\n\n    /**\n     * UNLY #16. Privileged weekdays takes precedences over memorials.\n     * In this situation, we still can refer to the memorial, but the celebrated\n     * mass must be the mass of the weekday, not the memorial.\n     * In romcal, the liturgical colors are thus not indicated.\n     *\n     * UNLY #16 a.\n     * Ash Wednesday and the weekdays of Holy Week, from Monday up to and including\n     * Thursday, take precedence over all other celebrations.\n     *\n     * UNLY #16 b.\n     * The weekdays of Advent from 17 December up to and including 24 December\n     * and all the weekdays of Lent have precedence over Obligatory Memorials.\n     */\n    this.colors =\n      weekday?.precedence === Precedences.PrivilegedWeekday_9 && this.rank === Ranks.Memorial ? [] : def.colors;\n\n    this.martyrology = def.martyrology;\n    this.titles = def.titles;\n    this.calendar = baseData?.calendar ?? calendar;\n    this.cycles = cycles;\n    this.fromCalendar = def.fromCalendar;\n    this.fromExtendedCalendars = def.fromExtendedCalendars;\n\n    // For Memorial and Feast celebrations only, the weekday property is added\n    // containing the LiturgicalDay object of the base weekday.\n    // Otherwise, this object is removed.\n    if (weekday) {\n      this.weekday = weekday;\n    } else {\n      delete this.weekday;\n    }\n  }\n}\n\nexport default LiturgicalDay;\n", "import {\n  ProperCycle,\n  PSALTER_WEEKS,\n  SUNDAYS_CYCLE,\n  SundaysCycle,\n  WEEKDAYS_CYCLE,\n  WeekdaysCycle,\n} from '../constants/cycles';\nimport { PROPER_OF_TIME_NAME } from '../constants/general-calendar-names';\nimport { Periods } from '../constants/periods';\nimport { Precedences, PRECEDENCES } from '../constants/precedences';\nimport { Ranks } from '../constants/ranks';\nimport { Seasons } from '../constants/seasons';\nimport { BaseCalendar, DatesIndex, LiturgicalBuiltData, LiturgicalCalendar } from '../types/calendar';\nimport { Key } from '../types/common';\nimport { RomcalCalendarMetadata, RomcalCyclesMetadata } from '../types/liturgical-day';\nimport { dateDifference, Dates, getUtcDateFromString, isValidDate } from '../utils/dates';\nimport { RomcalConfig } from './config';\nimport LiturgicalDay from './liturgical-day';\nimport { LiturgicalDayConfig } from './liturgical-day-config';\nimport LiturgicalDayDef from './liturgical-day-def';\n\nexport class Calendar implements BaseCalendar {\n  readonly #config: RomcalConfig;\n  readonly #liturgicalDayConfig: LiturgicalDayConfig;\n  readonly dates: Dates;\n  readonly #startOfSeasonsDic: Record<number, Record<Seasons, Date>> = {};\n  readonly #endOfSeasonsDic: Record<number, Record<Seasons, Date>> = {};\n  readonly #cyclesCache: Record<number, Pick<RomcalCyclesMetadata, 'sundayCycle' | 'weekdayCycle'>> = {};\n\n  constructor(config: RomcalConfig, liturgicalDayConfig: LiturgicalDayConfig) {\n    this.#config = config;\n    this.#liturgicalDayConfig = liturgicalDayConfig;\n    this.dates = new Dates(config, liturgicalDayConfig.year);\n  }\n\n  /**\n   * Build calendar metadata\n   * @param def\n   * @param date\n   * @param baseData\n   */\n  #buildCalendarMetadata(def: LiturgicalDayDef, date: Date, baseData: LiturgicalDay | null): RomcalCalendarMetadata {\n    let currentYear = this.#liturgicalDayConfig.year;\n\n    if (\n      this.#config.scope === 'gregorian' &&\n      this.#liturgicalDayConfig.dates.firstSundayOfAdvent(this.#liturgicalDayConfig.year).getTime() <= date.getTime()\n    ) {\n      currentYear++;\n    }\n\n    const startOfSeasonsDic =\n      this.#startOfSeasonsDic[currentYear] ||\n      (this.#startOfSeasonsDic[currentYear] = this.#liturgicalDayConfig.dates.startOfSeasons(currentYear));\n\n    const endOfSeasonsDic =\n      this.#endOfSeasonsDic[currentYear] ||\n      (this.#endOfSeasonsDic[currentYear] = this.#liturgicalDayConfig.dates.endOfSeasons(currentYear));\n\n    const startOfSeason = def.seasons.length ? startOfSeasonsDic[def.seasons[0]] : undefined;\n    const endOfSeason = def.seasons.length ? endOfSeasonsDic[def.seasons[0]] : undefined;\n    const dayOfSeason =\n      baseData?.calendar.dayOfSeason ??\n      def.calendarMetadata.dayOfSeason ??\n      (startOfSeason ? dateDifference(date, startOfSeason) + 2 : NaN);\n\n    return {\n      weekOfSeason:\n        baseData?.calendar.weekOfSeason ??\n        def.calendarMetadata.weekOfSeason ??\n        (Number.isNaN(dayOfSeason) ? NaN : Math.ceil(dayOfSeason / 7)),\n      dayOfSeason,\n      dayOfWeek: baseData?.calendar.dayOfWeek ?? def.calendarMetadata.dayOfWeek ?? date.getDay(),\n      nthDayOfWeekInMonth: Math.ceil(date.getDate() / 7),\n      startOfSeason: startOfSeason ? startOfSeason.toISOString().substr(0, 10) : '',\n      endOfSeason: endOfSeason ? endOfSeason.toISOString().substr(0, 10) : '',\n      startOfLiturgicalYear: startOfSeasonsDic[Seasons.Advent].toISOString().substr(0, 10),\n      endOfLiturgicalYear: endOfSeasonsDic[Seasons.OrdinaryTime].toISOString().substr(0, 10),\n    };\n  }\n\n  /**\n   * Build cycle metadata of the liturgical year.\n   * @param date The date object\n   * @param calendar The calendar metadata\n   * @param properCycle\n   * @private\n   */\n  #buildLiturgicalCycleMetadata(\n    date: Date,\n    calendar: RomcalCalendarMetadata,\n    properCycle: ProperCycle,\n  ): RomcalCyclesMetadata {\n    const year = parseInt(calendar.startOfLiturgicalYear, 10);\n\n    // Compute cycle of the liturgical year,\n    // and cache the data since they are the same for every days of the year\n    if (!this.#cyclesCache[year]) {\n      const firstSundayOfAdvent = getUtcDateFromString(calendar.startOfLiturgicalYear);\n\n      let sundayCycle: SundaysCycle;\n      let weekdayCycle: WeekdaysCycle;\n\n      // Formula to calculate Sunday cycle (Year A, B, C)\n      const thisSundayCycleIndex: number = (year - 1963) % 3;\n      const nextSundayCycleIndex: number = thisSundayCycleIndex === 2 ? 0 : thisSundayCycleIndex + 1;\n\n      // If the date is on or after the First Sunday of Advent,\n      // it is the next liturgical cycle\n      if (date.getTime() >= firstSundayOfAdvent.getTime()) {\n        sundayCycle = SUNDAYS_CYCLE[nextSundayCycleIndex];\n        weekdayCycle = WEEKDAYS_CYCLE[year % 2];\n      } else {\n        sundayCycle = SUNDAYS_CYCLE[thisSundayCycleIndex];\n        weekdayCycle = WEEKDAYS_CYCLE[(year + 1) % 2];\n      }\n\n      this.#cyclesCache[year] = {\n        sundayCycle,\n        weekdayCycle,\n      };\n    }\n\n    // Psalter week cycle restart to 1 at the beginning of each season.\n    // Except during the four first days of lent (ash wednesday to the next saturday),\n    // which are in week 4, to start on week 1 after the first sunday of lent.\n    const weekIndex = (calendar.weekOfSeason % 4) - 1;\n    const psalterWeek = PSALTER_WEEKS[weekIndex > -1 ? weekIndex : 3];\n\n    return { properCycle, ...this.#cyclesCache[year], psalterWeek };\n  }\n\n  /**\n   * Build the LiturgicalDay data collection, with their dates\n   * @private\n   */\n  #buildDatesData(): LiturgicalBuiltData {\n    const builtData: LiturgicalBuiltData = {\n      byKeys: {},\n      datesIndex: {},\n    };\n\n    Object.values(this.#config.liturgicalDayDef).forEach((def) => {\n      // Flag to determine if the current definition is coming from the Proper of Time.\n      // Note: a Proper of Time definition can be extended in a particular calendar;\n      // in this case the `fromCalendar` is taking the name of the particular calendar,\n      // so we need to check the calendar name of the first item in the `fromExtendedCalendars`.\n      const isFromProperOfTime =\n        def.fromCalendar === PROPER_OF_TIME_NAME ||\n        (def.fromExtendedCalendars.length > 0 && def.fromExtendedCalendars[0].fromCalendar === PROPER_OF_TIME_NAME);\n\n      // In a Liturgical Calendar scope:\n      // - Because a Liturgical Year is straddling 2 Gregorian year,\n      //   we need to compute the date on the 2 Gregorian years,\n      //   and then determine the one to keep between both.\n      // - Note: dates from the Proper of Time are already generated within a liturgical year,\n      //   so in this case we don't have to check the previously gregorian year.\n      const previousYearDate =\n        !isFromProperOfTime && this.#config.scope === 'liturgical'\n          ? this.#liturgicalDayConfig.buildDate(def, -1)\n          : null;\n\n      const currentYearDate = this.#liturgicalDayConfig.buildDate(def);\n\n      [previousYearDate, currentYearDate]\n        // Remove all dates that are null. This can occur when a liturgical day isn't celebrated\n        // because of any general/particular calendar settings.\n        // E.g. The 6th Thursday within the Easter Time can be not celebrated\n        // because in some calendars, the Solemnity of the Ascension is taking precedence.\n        .filter((d) => d && isValidDate(d))\n        .forEach((date) => {\n          // Typing: the nullable dates have been removed in the filter above,\n          // so we redefine the date object as a non-nullable Date object\n          date = date as Date;\n\n          const dateStr = date.toISOString().substr(0, 10);\n\n          // All the dates of the whole year (gregorian or liturgical) are already generated\n          // from the Proper of Time.\n          // Then, all dates from the general/particular calendar(s) that don't match\n          // an existing date from the Proper of Time must be ignored,\n          // because they falls outside the year scope defined by the Proper of Time.\n          if (!isFromProperOfTime && !builtData.datesIndex[dateStr]) {\n            return;\n          }\n\n          // Take the first LiturgicalDay object of a specified day.\n          // The first object is always a LiturgicalDay from the Proper of Time,\n          // since a LiturgicalDay is generated for each day of the Liturgical Year.\n          // In the case the LiturgicalDayDef is coming from the Proper of Time,\n          // the baseData must be null.\n          const baseData: LiturgicalDay | null = isFromProperOfTime\n            ? null\n            : builtData.byKeys[builtData.datesIndex[dateStr][0]];\n\n          // Retrieve calendar metadata from the proper of time\n          const calendar: RomcalCalendarMetadata = isFromProperOfTime\n            ? this.#buildCalendarMetadata(def, date, baseData)\n            : baseData!.calendar;\n\n          // Retrieve cycles metadata from the proper of time\n          const cycles: RomcalCyclesMetadata = this.#buildLiturgicalCycleMetadata(\n            date,\n            calendar,\n            def.cycles.properCycle,\n          );\n\n          /**\n           * For Memorial and Feast celebrations only, the weekday property is added\n           * containing the LiturgicalDay object of the base weekday.\n           *\n           * - Memorials: their observance is integrated into the celebration of the occurring weekday\n           *   in accordance with the norms set forth in the General Instruction of the Roman\n           *   Missal and of the Liturgy of the Hours. (UNLY #14)\n           * - Liturgy of the hours: // todo: cite precise sources from the General Instructions of the Liturgy of the hours\n           *    - Memorials: the liturgy of the hour remain the one of the weekday.\n           *    - Feasts: small hours are taken from the weekday.\n           */\n          const weekday: LiturgicalDay | null =\n            baseData && [Ranks.Feast, Ranks.Memorial].some((r) => r === def.rank) ? baseData : null;\n\n          // Create a new LiturgicalDay object, and add it to the builtData object.\n          builtData.byKeys[def.key] = new LiturgicalDay(\n            def,\n            date,\n            this.#liturgicalDayConfig,\n            calendar,\n            cycles,\n            baseData,\n            weekday,\n          );\n\n          // Also add the corresponding date-key object.\n          builtData.datesIndex[dateStr] = [...(builtData.datesIndex[dateStr] ?? []), def.key];\n        });\n    });\n\n    // Order data by date\n    builtData.datesIndex = Object.keys(builtData.datesIndex)\n      .sort()\n      .reduce((obj: DatesIndex, key) => {\n        obj[key] = builtData.datesIndex[key];\n        return obj;\n      }, {});\n\n    return builtData;\n  }\n\n  /**\n   * Get one LiturgicalDay by its key.\n   * Return undefined if not found, or null if the LiturgicalDay do not occur in the provided year.\n   * Note: this function compute only one LiturgicalDay without the liturgical whole year background,\n   * so some metadata may be missing, and the precedence rules between different LiturgicalDay\n   * objects are ignored.\n   * @param key\n   */\n  getOneLiturgicalDay(key: Key): LiturgicalDay | null | undefined {\n    // Return undefined if not found\n    if (!Object.prototype.hasOwnProperty.call(this.#config.liturgicalDayDef, key)) {\n      return undefined;\n    }\n\n    const def = this.#config.liturgicalDayDef[key];\n\n    // Compute the date of the LiturgicalDayDef\n    const date = this.#liturgicalDayConfig.buildDate(def);\n    if (!date || !isValidDate(date)) return null;\n\n    // Try to compute the calendar metadata with the data we have (without the whole year background)\n    const calendar = this.#buildCalendarMetadata(def, date, null);\n\n    // Compute the cycle metadata\n    const cycles = this.#buildLiturgicalCycleMetadata(date, calendar, def.cycles.properCycle);\n\n    // Return the LiturgicalDay object\n    return new LiturgicalDay(def, date, this.#liturgicalDayConfig, calendar, cycles, null, null);\n  }\n\n  /**\n   * Generate a liturgical calendar according to the precedence rules between liturgical days.\n   */\n  generateCalendar(): LiturgicalCalendar {\n    const finalData: LiturgicalCalendar = {};\n\n    const builtData = this.#buildDatesData();\n\n    Object.keys(builtData.datesIndex).forEach((dateStr) => {\n      // Order the LiturgicalDays objects, following the precedence rules defined in the UNLY #49.\n      const dates: LiturgicalDay[] = builtData.datesIndex[dateStr]\n        .map((key) => builtData.byKeys[key])\n        .sort(\n          (\n            {\n              precedence: firstPrecedence,\n              allowSimilarRankItems: firstAllowSimilarRankItems,\n              isOptional: firstIsOptional,\n            },\n            {\n              precedence: nextPrecedence,\n              allowSimilarRankItems: nextAllowSimilarRankItems,\n              isOptional: nextIsOptional,\n            },\n          ) => {\n            if (firstIsOptional === nextIsOptional) {\n              if (firstAllowSimilarRankItems === nextAllowSimilarRankItems) {\n                const type1 = PRECEDENCES.indexOf(firstPrecedence);\n                const type2 = PRECEDENCES.indexOf(nextPrecedence);\n                if (type1 < type2) return -1;\n                if (type1 > type2) return 1;\n                return 0;\n              }\n\n              // Sort definitions marked as allowing similar rank items\n              return firstAllowSimilarRankItems ? -1 : 1;\n            }\n            // Sort definitions marked as optional to the end of the list\n            return firstIsOptional ? 1 : -1;\n          },\n        );\n\n      // Exception the Thursday within the Holy Week, this day contain 2 liturgical days, i.e.:\n      //\n      // - The weekday of Holy Thursday and the season of Lent is finishing just before the\n      //   mass of the Lord\u2019s Supper memorial.\n      //   UNLY #28. The forty days of Lent run from Ash Wednesday up to but excluding the Mass of\n      //   the Lord\u2019s Supper exclusive.\n      //\n      // - The Paschal Triduum starts from the mass of the Lord\u2019s Supper memorial.\n      //   UNLY #19. The Paschal Triduum of the Passion and Resurrection of the Lord begins with the\n      //   evening Mass of the Lord\u2019s Supper, has its centre in the Easter Vigil, and closes with\n      //   Vespers (Evening Prayer) of the Sunday of the Resurrection.\n      //\n      // These 2 liturgical day entities needs to be separated, because they do not have the same\n      // metadata: different liturgical colors, seasons, rank, precedence...\n      // The mass (Chrismal Mass on Holy Thursday, and the Mass the Lord\u2019s Supper the evening), as\n      // well as the liturgy of the hours are also different.\n      let thursdayOfTheLordsSupper: LiturgicalDay | null = null;\n      if (dates[0].key === 'thursday_of_the_lord_s_supper') {\n        thursdayOfTheLordsSupper = dates[0];\n        dates.shift();\n      }\n\n      // - The first item in the array correspond to the Liturgical Day that take precedence.\n      // - When multiple LiturgicalDay objects are output the same day, it means that all other\n      //   object after the first LiturgicalDay object in the array are optionals.\n      //\n      // UNLY #14:\n      // Memorials are either obligatory or optional; their observance is integrated into the celebration\n      // of the occurring weekday in accordance with the norms set forth in the General Instruction of the Roman\n      // Missal and of the Liturgy of the Hours.\n      // Obligatory Memorials which fall on weekdays of Lent may only be celebrated as Optional\n      // Memorials.\n      // If several Optional Memorials are inscribed in the Calendar on the same day, only one may be\n      // celebrated, the others being omitted.\n      const defaultLiturgicalDay = dates[0];\n\n      let optionalMemorials: LiturgicalDay[] = [];\n\n      // If the current day is:\n      //\n      // - a privileged weekday (UNLY #59 9):\n      //     - a weekdays of Advent from December 17 up to and including December 24;\n      //     - a days within the Octave of Christmas;\n      //     - a weekdays of Lent (except Ash Wednesday and all weekdays of the Holy Week, UNLY #16 a).\n      //\n      // - a weekday (UNLY #59 13).\n      //\n      // [1] Output Optional Memorials, which, however, may be celebrated, in the special manner\n      //     described in the General Instruction of the Roman Missal (see below, GIRM #355)\n      //     and of the Liturgy of the Hours, even on the days listed in UNLY #59 9.\n      //\n      // [2] If the current day is a privileged weekday (UNLY #59 9),\n      //       todo: set a \"massIsCelebrated: false\" flag on available memorial LiturgicalDay objects.\n      //     According to the GIRM #355 (see below), the mass of the optional memorials are not celebrated.\n      //     However the memorial can be commemorate, and the Collect may be taken.\n      //\n      // On Optional Memorials: (GIRM #355)\n      // a. On the weekdays of Advent from 17 December to 24 December, on days within\n      //    the Octave of the Nativity of the Lord, and on the weekdays of Lent, except Ash\n      //    Wednesday and during Holy Week, the Mass texts for the current liturgical day\n      //    are used; but the Collect may be taken from a Memorial which happens to be\n      //    inscribed in the General Calendar for that day, except on Ash Wednesday and\n      //    during Holy Week. On weekdays of Easter Time, Memorials of Saints may rightly\n      //    be celebrated in full.\n      // b. On weekdays of Advent before 17 December, on weekdays of Christmas Time\n      //    from 2 January, and on weekdays of Easter Time, one of the following may be\n      //    chosen: either the Mass of the weekday, or the Mass of the Saint or of one of the\n      //    Saints whose Memorial is observed, or the Mass of any Saint inscribed in the\n      //    Martyrology for that day.\n      // c. On weekdays in Ordinary Time, there may be chosen either the Mass of the\n      //    weekday, or the Mass of an Optional Memorial which happens to occur on that\n      //    day, or the Mass of any Saint inscribed in the Martyrology for that day, or a Mass\n      //    for Various Needs, or a Votive Mass.\n      if (\n        (defaultLiturgicalDay.precedence === Precedences.PrivilegedWeekday_9 ||\n          defaultLiturgicalDay.precedence === Precedences.Weekday_13) &&\n        !defaultLiturgicalDay.periods.includes(Periods.HolyWeek)\n      ) {\n        optionalMemorials = optionalMemorials.concat(\n          dates\n            .slice(1)\n            .filter(\n              (d) =>\n                [\n                  Precedences.GeneralMemorial_10,\n                  Precedences.ProperMemorial_SecondPatron_11a,\n                  Precedences.ProperMemorial_11b,\n                  Precedences.OptionalMemorial_12,\n                ].some((p) => p === d.precedence) || d.isOptional,\n            )\n            .map((d) => (d.isOptional = true) && d),\n        );\n      }\n\n      // If the default liturgical day is marked as allowing similar rank types (allowSimilarRankItems: true),\n      // keep the next liturgical(s) day(s) from the list that have also this option enabled,\n      // and finally the one that have the same rank type.\n      // Note: all sibling items are already sorted by precedence (higher first),\n      // so the next items have always the same or a lower precedence type.\n      // e.g. The memorial of the Immaculate heart of Mary, that can falls the same day of another memorial.\n      if (defaultLiturgicalDay.allowSimilarRankItems && dates.length > 1) {\n        const checkNextItems = (d: LiturgicalDay) =>\n          d.rank === defaultLiturgicalDay.rank &&\n          d.precedence !== Precedences.OptionalMemorial_12 &&\n          !optionalMemorials.map((d) => d.key).includes(d.key);\n\n        const nextAllowingSimilarItems = dates.slice(1).filter((d) => d.allowSimilarRankItems && checkNextItems(d));\n        optionalMemorials = [...optionalMemorials, ...nextAllowingSimilarItems];\n\n        const nextItem = dates.slice(1).find((d) => !d.allowSimilarRankItems && checkNextItems(d));\n        if (nextItem) optionalMemorials.push(nextItem);\n      }\n\n      // Also keep liturgical days marked as optional,\n      // and that have a similar or higher precedence type than the default liturgical day.\n      // e.g. The dedication of consecrated Churches is an optional solemnity.\n      if (dates.length > 1) {\n        const optionalDayKeys = optionalMemorials.map((d) => d.key);\n        const defaultPrecedenceIndex = PRECEDENCES.indexOf(defaultLiturgicalDay.precedence);\n        optionalMemorials = optionalMemorials.concat(\n          dates\n            .slice(1)\n            .filter(\n              (d) =>\n                d.isOptional &&\n                PRECEDENCES.indexOf(d.precedence) >= defaultPrecedenceIndex &&\n                !optionalDayKeys.includes(d.key),\n            ),\n        );\n      }\n\n      finalData[dateStr] = [\n        defaultLiturgicalDay,\n        ...optionalMemorials,\n        ...(thursdayOfTheLordsSupper ? [thursdayOfTheLordsSupper] : []),\n      ];\n    });\n\n    return finalData;\n  }\n}\n", "import { StringMap } from 'i18next';\nimport { Color } from '../constants/colors';\nimport { ProperCycle, PsalterWeeksCycle, SundaysCycle, WeekdaysCycle } from '../constants/cycles';\nimport { PatronTitle, Title } from '../constants/martyrology-metadata';\nimport { Period } from '../constants/periods';\nimport { Precedence } from '../constants/precedences';\nimport { Rank } from '../constants/ranks';\nimport { Season } from '../constants/seasons';\nimport LiturgicalDay from '../models/liturgical-day';\nimport LiturgicalDayDef from '../models/liturgical-day-def';\nimport { Dates } from '../utils/dates';\nimport { AllXOR, Key, XOR } from './common';\nimport { MartyrologyItem, SaintCount } from './martyrology';\n\n/**\n * The liturgical day date definition\n */\nexport type DateDef = AllXOR<\n  [\n    DateDefMonthDate,\n    DateDefDateFnAddDay,\n    DateDefDateFnSubtractDay,\n    DateDefMonthDowNthWeekInMonth,\n    DateDefMonthLastDowInMonth,\n  ]\n>;\n\nexport type Month = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\nexport type DayOfWeek = 0 | 1 | 2 | 3 | 4 | 5 | 6;\nexport type DateDefMonthDate = {\n  /**\n   * The month of this liturgical day.\n   */\n  month: Month;\n\n  /**\n   * The date of this liturgical day.\n   */\n  date: number;\n\n  /**\n   * Offset the current year to compute dates in the scope of different years.\n   */\n  yearOffset?: number;\n};\nexport type DateDefDateFnAddDay = {\n  /**\n   * A date function name from the [Date] class.\n   */\n  dateFn: keyof Dates;\n\n  /**\n   * Possible date function arguments that may be required.\n   */\n  dateArgs?: number[];\n\n  /**\n   * Add additional day(s) to the date computed from the 'dateFn' option.\n   */\n  addDay?: number;\n\n  /**\n   * Offset the current year to compute dates in the scope of different years.\n   */\n  yearOffset?: number;\n};\nexport type DateDefDateFnSubtractDay = {\n  /**\n   * A date function name from the [Date] class.\n   */\n  dateFn: keyof Dates;\n\n  /**\n   * Possible date function arguments that may be required.\n   */\n  dateArgs?: number[];\n\n  /**\n   * Subtract some day(s) to the date computed from the 'dateFn' option.\n   */\n  subtractDay?: number;\n\n  /**\n   * Offset the current year to compute dates in the scope of different years.\n   */\n  yearOffset?: number;\n};\nexport type DateDefMonthDowNthWeekInMonth = {\n  /**\n   * The month of this liturgical day.\n   */\n  month: Month;\n\n  /**\n   * The day of week this liturgical year must occur.\n   */\n  dayOfWeek: DayOfWeek;\n\n  /**\n   * The nth week in the month this liturgical year must occur.\n   */\n  nthWeekInMonth: number;\n\n  /**\n   * Offset the current year to compute dates in the scope of different years.\n   */\n  yearOffset?: number;\n};\nexport type DateDefMonthLastDowInMonth = {\n  /**\n   * The month of this liturgical day.\n   */\n  month: Month;\n\n  /**\n   * The last day of week in the month this liturgical year must occur.\n   */\n  lastDayOfWeekInMonth: DayOfWeek;\n\n  /**\n   * Offset the current year to compute dates in the scope of different years.\n   */\n  yearOffset?: number;\n};\n\n/**\n * The liturgical day date definition, can extend a previously defined date\n */\nexport type DateDefExtended = AllXOR<[DateDef, DateDefAddDay, DateDefSubtractDay]>;\n\nexport type DateDefAddDay = { addDay: number };\nexport type DateDefSubtractDay = { subtractDay: number };\n\n/**\n * The liturgical day date exception\n */\nexport type DateDefException =\n  | AllXOR<\n      [\n        {\n          /**\n           * Add an exception if the computed date occur between two dates.\n           */\n          ifIsBetween: { from: DateDef; to: DateDef; inclusive: boolean };\n        },\n        {\n          /**\n           * Add an exception if the computed date occur the same day as another date.\n           */\n          ifIsSameAsDate: DateDef;\n        },\n        {\n          /**\n           * Add an exception if the computed date occur on a specific day of week.\n           */\n          ifIsDayOfWeek: DayOfWeek;\n        },\n      ]\n    > & {\n      /**\n       * Set an updated date from the exception rules\n       */\n      setDate: DateDefExtended;\n    };\n\n/**\n * Calendar definition, to compute then the calendar metadata\n */\nexport type CalendarMetadata = {\n  dayOfSeason?: number;\n  weekOfSeason?: number;\n  dayOfWeek?: number;\n};\n\n/**\n * Cycles Metadata\n */\nexport type RomcalCyclesMetadata = {\n  /**\n   * The proper cycle in which the liturgical day is part.\n   */\n  properCycle: ProperCycle;\n\n  /**\n   * The Sunday yearly cycle in which the liturgical day is part.\n   */\n  sundayCycle: SundaysCycle;\n\n  /**\n   * The weekday yearly cycle in which the liturgical day is part.\n   */\n  weekdayCycle: WeekdaysCycle;\n\n  /**\n   * The psalter week cycle in which the liturgical day is part.\n   */\n  psalterWeek: PsalterWeeksCycle;\n};\n\n/**\n * Partial Cycle Metadata definition\n */\nexport type PartialCyclesDef = Pick<RomcalCyclesMetadata, 'properCycle'>;\n\n/**\n * Calendar Metadata\n */\nexport type RomcalCalendarMetadata = {\n  /**\n   * The week number of the liturgical season.\n   * Starts from `1`, except in the seasons of lent,\n   * the week of Ash Wednesday to the next Saturday is count as `0`.\n   */\n  weekOfSeason: number;\n\n  /**\n   * The day number within the whole season.\n   */\n  dayOfSeason: number;\n\n  /**\n   * The day of the week.\n   * Returns numbers from 0 (Sunday) to 6 (Saturday).\n   */\n  dayOfWeek: number; // 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\n  /**\n   * The nth day of week in month.\n   */\n  nthDayOfWeekInMonth: number;\n\n  /**\n   * The first day of the liturgical day, i.e. the first Sunday of Advent.\n   */\n  startOfLiturgicalYear: string;\n\n  /**\n   * The last day of the liturgical day, i.e. the last Saturday of Ordinary Time, in the 34th week.\n   */\n  endOfLiturgicalYear: string;\n\n  /**\n   * The first day of the current liturgical season.\n   */\n  startOfSeason: string;\n\n  /**\n   * The last day of the current liturgical season.\n   */\n  endOfSeason: string;\n};\n\n/**\n * The associated titles of a liturgical day.\n */\nexport type TitlesDef =\n  | (Title | PatronTitle)[]\n  | {\n      /**\n       * Add title(s) to the end of the existing list of title(s).\n       */\n      append?: (Title | PatronTitle)[];\n      /**\n       * Add title(s) to the  beginning of the existing list of title(s).\n       */\n      prepend?: (Title | PatronTitle)[];\n    };\n\n/**\n * The associated martyrology item.\n */\nexport type MartyrologyItemPointer = string | MartyrologyItemRedefined;\n\n/**\n * The associated martyrology item, with its overridden properties.\n */\nexport type MartyrologyItemRedefined = {\n  /**\n   * The key of the martyrology item.\n   */\n  key: string;\n\n  /**\n   * The redefined titles of the martyrology item.\n   */\n  titles?: TitlesDef;\n\n  /**\n   * Specify if titles should not be displayed. This can occur when a title is already included in\n   * the name of the martyrology item.\n   */\n  hideTitles?: boolean;\n\n  /**\n   * Specify the number of persons this martyrology item is representing.\n   */\n  count?: SaintCount;\n};\n\n/**\n * Base object extended by other derived Liturgical Day objects\n */\ntype LiturgicalDayRoot = {\n  /**\n   * Date definition\n   */\n  dateDef: DateDef;\n\n  /**\n   * Date definition exception\n   */\n  dateExceptions?: DateDefException[];\n\n  /**\n   * Computed date, in ISO 8601 format: YYYY-MM-DD\n   * @param year\n   */\n  date: Lowercase<string>;\n\n  /**\n   * The precedence type of the liturgical day.\n   */\n  precedence: Precedence;\n\n  /**\n   * The rank of the liturgical day.\n   */\n  rank: Rank;\n\n  /**\n   * The localized rank of the liturgical day.\n   */\n  rankName: string;\n\n  /**\n   * In addition to this liturgical day, allow similar items that have the same rank,\n   * and the same or lower precedence,\n   * so the current liturgical day will not overwrite another defined item.\n   */\n  allowSimilarRankItems: boolean;\n\n  /**\n   * The liturgical colors of the liturgical day.\n   */\n  colors: Color[];\n\n  /**\n   * The liturgical localized colors of a liturgical day.\n   */\n  colorNames: string[];\n\n  /**\n   * Holy days of obligation are days on which the faithful are expected to attend Mass,\n   * and engage in rest from work and recreation.\n   */\n  isHolyDayOfObligation: boolean;\n\n  /**\n   * Specify is this LiturgicalDay is optional within a specific liturgical calendar.\n   *\n   * UNLY #14:\n   * Memorials are either obligatory or optional; their observance is integrated into\n   * the celebration of the occurring weekday in accordance with the norms set forth in the\n   * General Instruction of the Roman Missal and of the Liturgy of the Hours\n   *\n   * Note: also used for the dedication of consecrated churches, which is an optional solemnity\n   * that should not overwrite the default weekday.\n   */\n  isOptional: boolean;\n\n  /**\n   * The localized name of the liturgical day.\n   */\n  name: string;\n\n  /**\n   * The i18n definition\n   */\n  i18nDef: [string] | [string, StringMap | string];\n\n  /**\n   * Specify a custom locale key for this date definition, in this calendar.\n   */\n  customLocaleKey?: string;\n\n  /**\n   * Season keys to which the liturgical day is a part.\n   */\n  seasons: Season[];\n\n  /**\n   * Season localized name to which the liturgical day is a part.\n   */\n  seasonNames: string[];\n\n  /**\n   * Period keys to which the liturgical day is a part.\n   */\n  periods: Period[];\n\n  /**\n   * The specific martyrology metadata of a liturgical day, if applies.\n   */\n  martyrology: MartyrologyItem[];\n\n  /**\n   * Combined titles of each Saints linked to this date definition.\n   */\n  titles: (Title | PatronTitle)[];\n\n  /**\n   * Cycle metadata of a liturgical day.\n   */\n  cycles: RomcalCyclesMetadata;\n\n  /**\n   * The proper cycle in which the liturgical day is part.\n   */\n  properCycle?: ProperCycle;\n\n  /**\n   * Function that compute calendar metadata\n   * @param date\n   */\n  calendar: RomcalCalendarMetadata;\n\n  /**\n   * Calendar definition, to compute then the calendar metadata\n   */\n  calendarMetadata: CalendarMetadata;\n\n  /**\n   * The name of the calendar from which the liturgical day is defined.\n   */\n  fromCalendar: Lowercase<string>;\n\n  /**\n   * The names and the object diff of the calendars from which this liturgical day is extended.\n   * From the first extended definitions to the latest extended definition.\n   */\n  fromExtendedCalendars: LiturgyDayDiff[];\n\n  /**\n   * If this liturgical day must be removed from this calendar and from all those it inherits\n   * (the parent calendars), on the final calendar generated by romcal.\n   */\n  drop?: boolean;\n\n  /**\n   * Property used by Memorial and Feast celebrations only:\n   * - Memorials: their observance is integrated into the celebration of the occurring weekday\n   *   in accordance with the norms set forth in the General Instruction of the Roman\n   *   Missal and of the Liturgy of the Hours. (UNLY #14)\n   * - Liturgy of the hours: // todo: cite precise sources from the General Instructions of the Liturgy of the hours\n   *    - Memorials: the liturgy of the hour remain the one of the weekday.\n   *    - Feasts: small hours are taken from the weekday.\n   */\n  weekday?: LiturgicalDay;\n};\n\n/**\n * Generated object containing all metadata in a context of a proper calendar,\n * that can be used then to compute its date in a context of a year\n */\nexport type BaseLiturgicalDayDef = Pick<\n  LiturgicalDayRoot,\n  | 'colors'\n  | 'fromCalendar'\n  | 'periods'\n  | 'i18nDef'\n  | 'calendarMetadata'\n  | 'fromExtendedCalendars'\n  | 'seasons'\n  | 'isHolyDayOfObligation'\n  | 'isOptional'\n  | 'precedence'\n  | 'dateDef'\n  | 'dateExceptions'\n  | 'titles'\n  | 'colorNames'\n  | 'martyrology'\n  | 'name'\n  | 'rank'\n  | 'rankName'\n  | 'seasonNames'\n> & {\n  /**\n   * The unique key of the liturgical day.\n   */\n  key: Key;\n\n  /**\n   * Cycle metadata of a liturgical day.\n   */\n  cycles: PartialCyclesDef;\n\n  /**\n   * Merged input definition, from all calendars this definition input is defined.\n   */\n  input: LiturgicalDayBundleInput[];\n};\n\n/**\n * Input object used in calendar definition files\n */\nexport type LiturgicalDayInput = Partial<\n  Pick<\n    LiturgicalDayRoot,\n    | 'dateDef'\n    | 'precedence'\n    | 'allowSimilarRankItems'\n    | 'isHolyDayOfObligation'\n    | 'isOptional'\n    | 'properCycle'\n    | 'customLocaleKey'\n    | 'drop'\n  >\n> & {\n  /**\n   * Date definition exception\n   */\n  dateExceptions?: DateDefException | DateDefException[];\n\n  /**\n   * The liturgical color(s) of the liturgical day.\n   */\n  colors?: Color | Color[];\n\n  /**\n   * Link one or multiple Saints, Blessed, or any other celebrations from the Martyrology catalog.\n   */\n  martyrology?: MartyrologyItemPointer[];\n\n  /**\n   * Redefine the titles of each Saints linked to this date definition, from the martyrology catalog.\n   */\n  titles?: TitlesDef;\n};\n\nexport type LiturgicalDayBundleInput = XOR<LiturgicalDayInput, LiturgicalDayProperOfTimeInput> &\n  Partial<Pick<LiturgicalDayRoot, 'fromCalendar'>>;\n\n/**\n * Input object with its base properties from the proper of time\n */\n\nexport type LiturgicalDayProperOfTimeInput = Pick<\n  LiturgicalDayRoot,\n  | 'colors'\n  | 'properCycle'\n  | 'drop'\n  | 'periods'\n  | 'i18nDef'\n  | 'calendarMetadata'\n  | 'seasons'\n  | 'customLocaleKey'\n  | 'precedence'\n  | 'dateDef'\n  | 'dateExceptions'\n> &\n  Partial<Pick<LiturgicalDayRoot, 'allowSimilarRankItems' | 'isHolyDayOfObligation' | 'isOptional'>>;\n\n/**\n * Generated object with computed date within a specific year\n */\nexport type BaseLiturgicalDay = Omit<LiturgicalDayRoot, 'properCycle' | 'calendarMetadata' | 'drop'> & {\n  /**\n   * The unique key of the liturgical day.\n   */\n  key: Key;\n};\n\n/**\n * LiturgyDayDiff object used to compare definition iterations\n */\nexport type LiturgyDayDiff = Pick<LiturgicalDayDef, 'fromCalendar'> &\n  Partial<\n    Pick<\n      LiturgicalDayRoot,\n      | 'fromCalendar'\n      // | 'date'\n      | 'dateDef'\n      | 'dateExceptions'\n      | 'precedence'\n      | 'rank'\n      | 'isHolyDayOfObligation'\n      | 'i18nDef'\n      | 'titles'\n      | 'colors'\n    > & { cycles: Partial<Pick<RomcalCyclesMetadata, 'properCycle'>>; martyrology: Key[] }\n  >;\n\n/**\n * Check if the provided object is a [LiturgicalDayProperOfTimeInput] object\n * @param maybeObj\n */\nexport const isLiturgicalDayProperOfTimeInput = (maybeObj: unknown): boolean => {\n  return typeof maybeObj === 'object' && Object.prototype.hasOwnProperty.call(maybeObj, 'periods');\n};\n", "import { StringMap } from 'i18next';\nimport { Color, Colors } from '../constants/colors';\nimport { ProperCycles } from '../constants/cycles';\nimport { GENERAL_ROMAN_NAME, PROPER_OF_TIME_NAME } from '../constants/general-calendar-names';\nimport { isMartyr, PatronTitle, Title } from '../constants/martyrology-metadata';\nimport { Period } from '../constants/periods';\nimport { Precedence, Precedences } from '../constants/precedences';\nimport { Rank, Ranks, RanksFromPrecedence } from '../constants/ranks';\nimport { Season } from '../constants/seasons';\nimport { Key } from '../types/common';\nimport {\n  BaseLiturgicalDayDef,\n  CalendarMetadata,\n  DateDef,\n  DateDefException,\n  isLiturgicalDayProperOfTimeInput,\n  LiturgicalDayBundleInput,\n  LiturgicalDayInput,\n  LiturgicalDayProperOfTimeInput,\n  LiturgyDayDiff,\n  MartyrologyItemRedefined,\n  PartialCyclesDef,\n  TitlesDef,\n} from '../types/liturgical-day';\nimport { MartyrologyItem } from '../types/martyrology';\nimport { RomcalConfig } from './config';\n\nexport default class LiturgicalDayDef implements BaseLiturgicalDayDef {\n  readonly #config: RomcalConfig;\n  readonly key: Key;\n  readonly dateDef: DateDef;\n  readonly dateExceptions: DateDefException[];\n  readonly precedence: Precedence;\n  readonly rank: Rank;\n  readonly isHolyDayOfObligation: boolean;\n  readonly allowSimilarRankItems: boolean;\n  readonly isOptional: boolean;\n  readonly i18nDef: [string] | [string, StringMap | string];\n  readonly seasons: Season[];\n  readonly periods: Period[];\n  readonly calendarMetadata: CalendarMetadata;\n  readonly colors: Color[];\n  readonly martyrology: MartyrologyItem[];\n  readonly titles: (Title | PatronTitle)[];\n  readonly cycles: PartialCyclesDef;\n  readonly fromCalendar: Lowercase<string>;\n  readonly fromExtendedCalendars: LiturgyDayDiff[];\n  readonly input: LiturgicalDayBundleInput[];\n\n  #name?: string;\n  public get name(): string {\n    if (this.#name !== undefined) return this.#name;\n    let name: string;\n    // i18nDef from the proper of time already contains the namespace key\n    if (this.fromCalendar === PROPER_OF_TIME_NAME) {\n      name = this.#config.i18next.t(this.i18nDef[0], this.i18nDef[1]);\n    }\n    // i18nDef from general or particular calendars\n    else {\n      name = this.#config.i18next.t(this.i18nDef[0], this.i18nDef[1]);\n    }\n    this.#name = name;\n\n    return this.#name;\n  }\n\n  #rankName?: string;\n  public get rankName(): string {\n    if (this.#rankName !== undefined) return this.#rankName;\n    const key = `ranks:${(this.rank ?? '').toLowerCase()}`;\n    return (this.#rankName = this.#config.i18next.t(key) ?? key);\n  }\n\n  #seasonNames?: string[];\n  public get seasonNames(): string[] {\n    if (this.#seasonNames !== undefined) return this.#seasonNames;\n    return (this.#seasonNames = this.#config.getSeasonNames(this.seasons));\n  }\n\n  #colorNames?: string[];\n  public get colorNames(): string[] {\n    if (this.#colorNames !== undefined) return this.#colorNames;\n    return (this.#colorNames = this.#config.getLiturgicalColorNames(this.colors));\n  }\n\n  constructor(\n    key: Key,\n    input: LiturgicalDayProperOfTimeInput | LiturgicalDayInput | LiturgicalDayBundleInput,\n    fromCalendar: Lowercase<string>,\n    config: RomcalConfig,\n  ) {\n    this.#config = config;\n\n    this.key = key;\n\n    const previousDef: LiturgicalDayDef | undefined = Object.prototype.hasOwnProperty.call(config.liturgicalDayDef, key)\n      ? config.liturgicalDayDef[key]\n      : undefined;\n\n    if (!input.dateDef && !previousDef) {\n      throw new Error(`In the '${fromCalendar}' calendar, the property 'dateDef' for '${key}' must be defined.`);\n    }\n    this.dateDef = input.dateDef ?? previousDef!.dateDef;\n\n    this.dateExceptions = Array.isArray(input.dateExceptions)\n      ? input.dateExceptions\n      : input.dateExceptions\n      ? [input.dateExceptions]\n      : [];\n\n    if (!input.precedence && !previousDef) {\n      throw new Error(`In the '${fromCalendar}' calendar, the property 'precedence' for '${key}' must be defined.`);\n    }\n    // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n    this.precedence = input.precedence ?? previousDef!.precedence;\n\n    this.rank = LiturgicalDayDef.precedenceToRank(this.precedence, key);\n\n    this.allowSimilarRankItems = input.allowSimilarRankItems ?? previousDef?.allowSimilarRankItems ?? false;\n\n    this.isHolyDayOfObligation = input.isHolyDayOfObligation ?? previousDef?.isHolyDayOfObligation ?? false;\n\n    this.isOptional = input.isOptional ?? previousDef?.isOptional ?? false;\n\n    if (isLiturgicalDayProperOfTimeInput(input)) {\n      const data = input as LiturgicalDayProperOfTimeInput;\n      this.i18nDef = data.i18nDef;\n    } else {\n      this.i18nDef = input.customLocaleKey\n        ? [`names:${input.customLocaleKey}`]\n        : previousDef?.i18nDef || [`names:${key}`];\n    }\n\n    if (isLiturgicalDayProperOfTimeInput(input)) {\n      const data = input as LiturgicalDayProperOfTimeInput;\n      this.seasons = data.seasons ?? [];\n      this.periods = data.periods ?? [];\n    } else {\n      this.seasons = previousDef?.seasons ?? [];\n      this.periods = previousDef?.periods ?? [];\n    }\n\n    if (isLiturgicalDayProperOfTimeInput(input)) {\n      const data = input as LiturgicalDayProperOfTimeInput;\n      this.calendarMetadata = data.calendarMetadata;\n    } else {\n      this.calendarMetadata = {};\n    }\n\n    this.martyrology = this.#retrieveMartyrologyData(key, input, fromCalendar, previousDef);\n\n    // Use a .reverse() twice to ensure that added titles on multiple martyrology items\n    // are placed at the end of the array (not between the contained titles).\n    this.titles = [...new Set(this.martyrology.flatMap((m) => m.titles || []).reverse())].reverse();\n\n    this.colors = Array.isArray(input.colors)\n      ? input.colors\n      : input.colors\n      ? [input.colors]\n      : Array.isArray(previousDef?.colors)\n      ? // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n        previousDef!.colors\n      : isMartyr(this.titles)\n      ? [Colors.Red]\n      : [Colors.White];\n\n    this.cycles = {\n      properCycle: input.properCycle ?? previousDef?.cycles.properCycle ?? ProperCycles.ProperOfSaints,\n    };\n\n    this.fromCalendar = fromCalendar;\n\n    // Check object differences between the previously inherited object\n    // and the new one\n    this.fromExtendedCalendars = previousDef?.fromExtendedCalendars ?? [];\n    if (previousDef) {\n      const diff = this.#getLiturgicalDayDiff(previousDef, this);\n      // Store object diffs in the new LiturgicalDay object\n      if (diff) this.fromExtendedCalendars.push(diff);\n    }\n\n    // Store input object, that will be required to generate a calendar bundle.\n    this.input = [...(previousDef?.input || []), { ...input, fromCalendar }];\n\n    // Delete a date definition that has the `drop: true` property,\n    if (input.drop) {\n      if (!previousDef) {\n        throw new Error(\n          `In the '${fromCalendar}' calendar, trying to drop a LiturgicalDay that doesn't exists: '${key}'.`,\n        );\n      } else if (previousDef.fromCalendar === PROPER_OF_TIME_NAME) {\n        throw new Error(\n          `In the '${fromCalendar}' calendar, you can't drop a LiturgicalDay from the Proper of Time: '${key}'.`,\n        );\n      } else {\n        delete config.liturgicalDayDef[key];\n      }\n\n      return;\n    }\n\n    // Add or combine the new definition to the collection\n    config.liturgicalDayDef[key] = this;\n  }\n\n  /**\n   * Return the corresponding Rank that correspond to a Precedence.\n   * @private\n   * @param precedence The Precedence type of the liturgical day.\n   * @param key The key of the liturgical day.\n   * @private\n   */\n  static precedenceToRank(precedence: Precedence, key: string): Rank {\n    // Easter Sunday\n    if (precedence === Precedences.Triduum_1 && key === 'easter_sunday') {\n      return Ranks.Solemnity;\n    }\n\n    return RanksFromPrecedence[precedence];\n  }\n\n  /**\n   * Retrieve the Martyrology items from the inherited LiturgicalDay object.\n   * @param key The key of the LiturgicalDay to create.\n   * @param input The definition of the liturgical day.\n   * @param fromCalendar\n   * @param previousDef\n   * @private\n   */\n  #retrieveMartyrologyData(\n    key: Key,\n    input: LiturgicalDayInput,\n    fromCalendar: Key,\n    previousDef?: LiturgicalDayDef,\n  ): MartyrologyItem[] {\n    // Retrieve the Martyrology items from the inherited LiturgicalDay object,\n    // or create a new empty list.\n    const martyrology: MartyrologyItem[] = previousDef?.martyrology ?? [];\n\n    // [1] Then, check if Martyrology data exists from the date definition;\n    // [2] if martyrology data do not exists, but an inherited LiturgicalDay exists: do nothing more;\n    // [3] if martyrology no not exists, and there is no inheritance: take the def key as the martyrology item key.\n    (input.martyrology ?? (previousDef && []) ?? [key]).forEach((id: string | MartyrologyItemRedefined) => {\n      const pointer = typeof id === 'string' ? { key: id } : id;\n\n      // Add the matching Martyrology item in the Martyrology list defined above this forEach loop.\n      if (this.#config.martyrologyCatalog[pointer.key]) {\n        // Check if the matching Martyrology item already exists\n        let martyrologyItem = martyrology.find((item) => item.key === pointer.key);\n\n        // Otherwise, add it.\n        if (!martyrologyItem) {\n          martyrology.push(\n            (martyrologyItem = {\n              key: pointer.key,\n              ...this.#config.martyrologyCatalog[pointer.key],\n            }),\n          );\n        }\n\n        // Combine `hideTitles` if provided.\n        if (typeof pointer.hideTitles === 'boolean') {\n          martyrologyItem.hideTitles = pointer.hideTitles;\n        }\n\n        // Combine `count` if provided.\n        if (typeof pointer.count === 'number' || pointer.count === 'many') {\n          martyrologyItem.count = pointer.count;\n        }\n\n        // Combine specific martyrology item `titles`, if provided.\n        if (pointer.titles) {\n          martyrologyItem.titles = this.#combineTitles(pointer.titles, pointer.key, previousDef);\n        }\n      }\n      // If the Martyrology item is not found, it means this item is badly referenced in the date definition.\n      // In this situation, romcal must report en error.\n      // Note: romcal do not report an error when the liturgical day key is used to find a martyrology item,\n      // because this liturgical day definition may not be related to a martyrology item.\n      else if (input.martyrology) {\n        // If the martyrology catalog as 0 items, we take the assumption that a new romcal instance\n        // has been created, without a specified localized calendar. In this case romcal compute the\n        // General Roman Calendar without localization and martyrology data.\n        if (\n          Object.keys(this.#config.martyrologyCatalog).length > 0 &&\n          this.#config.calendarName === GENERAL_ROMAN_NAME\n        ) {\n          throw new Error(\n            `In the '${fromCalendar}' calendar, a LiturgicalDay with the key '${key}', have a badly referenced martyrology item: '${pointer.key}'.`,\n          );\n        }\n      }\n    });\n\n    // Combine `titles` from the main date definition, if provided.\n    if (input.titles) {\n      martyrology.forEach((m, i) => {\n        m.titles = this.#combineTitles(input.titles!, martyrology[i].key, previousDef);\n      });\n      if (martyrology.length === 0) {\n        throw new Error(\n          `In the '${fromCalendar}' calendar, in the LiturgicalDay with the key '${key}', you cannot add titles because there is no martyrology items associated.`,\n        );\n      }\n    }\n\n    return martyrology;\n  }\n\n  /**\n   * Helper function to combine defined martyrology titles\n   * @param titlesDef\n   * @param martyrologyKey\n   * @param previousDef\n   */\n  #combineTitles(titlesDef: TitlesDef, martyrologyKey: Key, previousDef?: LiturgicalDayDef): (Title | PatronTitle)[] {\n    return Array.isArray(titlesDef)\n      ? titlesDef\n      : typeof titlesDef === 'object'\n      ? [\n          // Use a [...new Set(array)] to remove duplicates in the array\n          ...new Set([\n            ...(titlesDef.prepend ?? []),\n            ...(previousDef?.martyrology.find((m) => m.key === martyrologyKey)?.titles ??\n              this.#config.martyrologyCatalog[martyrologyKey].titles ??\n              []),\n            ...(titlesDef.append ?? []),\n          ]),\n        ]\n      : [];\n  }\n\n  /**\n   * Get a partial LiturgicalDay object containing the difference\n   * between 2 LiturgicalDay objects that have the same date.\n   * @private\n   * @param dayA\n   * @param dayB\n   */\n  #getLiturgicalDayDiff(dayA: LiturgicalDayDef, dayB: LiturgicalDayDef): LiturgyDayDiff | null {\n    const diff = {\n      // date\n      // ...(dayA instanceof LiturgicalDay && dayB instanceof LiturgicalDay && dayA.date !== dayB.date\n      //   ? { date: dayA.date }\n      //   : {}),\n\n      // dateDef\n      ...(JSON.stringify(dayA.dateDef) !== JSON.stringify(dayB.dateDef) ? { dateDef: dayA.dateDef } : {}),\n\n      // dateExceptions\n      ...(JSON.stringify(dayA.dateExceptions) !== JSON.stringify(dayB.dateExceptions)\n        ? { dateExceptions: dayA.dateExceptions }\n        : {}),\n\n      // precedence\n      ...(dayA.precedence !== dayB.precedence ? { precedence: dayA.precedence } : {}),\n\n      // rank\n      ...(dayA.rank !== dayB.rank ? { rank: dayA.rank } : {}),\n\n      // isHolyDayOfObligation\n      ...(dayA.isHolyDayOfObligation !== dayB.isHolyDayOfObligation\n        ? { isHolyDayOfObligation: dayA.isHolyDayOfObligation }\n        : {}),\n\n      // isOptional\n      ...(dayA.isOptional !== dayB.isOptional ? { isOptional: dayA.isOptional } : {}),\n\n      // i18n\n      ...(JSON.stringify(dayA.i18nDef) !== JSON.stringify(dayB.i18nDef) ? { i18nDef: dayA.i18nDef } : {}),\n\n      // colors\n      ...(dayA.colors\n        .filter((x) => !dayB.colors.includes(x))\n        .concat(dayB.colors.filter((x) => !dayA.colors.includes(x))).length\n        ? { colors: dayA.colors }\n        : {}),\n\n      // titles\n      ...(JSON.stringify(dayA.titles) !== JSON.stringify(dayB.titles) ? { titles: dayA.titles } : {}),\n\n      // martyrology\n      ...(JSON.stringify(dayA.martyrology) !== JSON.stringify(dayB.martyrology)\n        ? { martyrology: dayA.martyrology.map((m) => m.key) }\n        : {}),\n\n      // cycles.properCycle\n      ...(dayA.cycles.properCycle !== dayB.cycles.properCycle\n        ? { cycles: { properCycle: dayA.cycles.properCycle } }\n        : {}),\n    };\n\n    return Object.keys(diff).length ? { ...diff, fromCalendar: dayA.fromCalendar } : null;\n  }\n}\n", "import {\n  BaseCalendarDef,\n  BundleInputs,\n  CalendarDefInputs,\n  CalendarDefInstance,\n  ParticularConfig,\n} from '../types/calendar-def';\nimport { Key } from '../types/common';\nimport { RomcalConfigInput } from '../types/config';\nimport { LiturgicalDayBundleInput } from '../types/liturgical-day';\nimport { Dates } from '../utils/dates';\nimport { RomcalConfig } from './config';\nimport LiturgicalDayDef from './liturgical-day-def';\n\nexport class CalendarDef implements BaseCalendarDef {\n  readonly #config: RomcalConfig;\n  readonly dates: typeof Dates;\n  parentCalendar?: CalendarDefInstance | null;\n  parentCalendarInstance?: InstanceType<CalendarDefInstance>;\n  readonly particularConfig?: ParticularConfig;\n  inputs: CalendarDefInputs = {};\n  #definitionsBuilt = false;\n\n  /**\n   * Get the name of the CalendarDef class.\n   */\n  public get calendarName(): string {\n    if (!this.#calendarName) {\n      this.#calendarName = this.constructor.name\n        .split(/(?=[A-Z])/)\n        .join('_')\n        .toLowerCase();\n    }\n    return this.#calendarName;\n  }\n  #calendarName?: string;\n\n  constructor(config: RomcalConfig, inputs?: BundleInputs) {\n    this.#config = config;\n    this.dates = this.#config.dates;\n    if (inputs) this.inputs = inputs;\n  }\n\n  /**\n   * Initialize inherited calendars (the parent calendars), and update the main RomcalConfig\n   * from the provided user config or from any particular config from the calendar definitions.\n   * @param input - The input configuration provided by the user.\n   */\n  updateConfig(input?: RomcalConfigInput): void {\n    // Init the parent calendar\n    if (this.parentCalendar) {\n      this.parentCalendarInstance = new this.parentCalendar(this.#config);\n\n      // Update first the configuration from the parent calendar(s)\n      this.parentCalendarInstance.updateConfig(input);\n    }\n\n    // Combine the provided user configuration,\n    // the particular configuration from this calendar,\n    // and the sanitized configuration.\n\n    this.#config.epiphanyOnSunday =\n      input?.epiphanyOnSunday ?? this.particularConfig?.epiphanyOnSunday ?? this.#config.epiphanyOnSunday;\n\n    this.#config.ascensionOnSunday =\n      input?.ascensionOnSunday ?? this.particularConfig?.ascensionOnSunday ?? this.#config.ascensionOnSunday;\n\n    this.#config.corpusChristiOnSunday =\n      input?.corpusChristiOnSunday ??\n      this.particularConfig?.corpusChristiOnSunday ??\n      this.#config.corpusChristiOnSunday;\n  }\n\n  /**\n   * Recursive method that retrieve all parent calendars definitions\n   * @private\n   * @param parentCal - The parent calendar object.\n   * @private\n   */\n  #retrieveParentCalInputs(parentCal: InstanceType<CalendarDefInstance>): void {\n    if (parentCal.parentCalendarInstance) {\n      this.#retrieveParentCalInputs(parentCal.parentCalendarInstance);\n    }\n\n    parentCal.buildAllDefinitions();\n  }\n\n  buildAllDefinitions(): void {\n    if (this.#definitionsBuilt) return;\n\n    const inputs = Object.keys(this.inputs);\n\n    if (this.parentCalendarInstance) {\n      this.#retrieveParentCalInputs(this.parentCalendarInstance);\n    }\n\n    inputs.forEach((key) => {\n      const inputValues: LiturgicalDayBundleInput[] = Array.isArray(this.inputs[key])\n        ? (this.inputs[key] as LiturgicalDayBundleInput[])\n        : [this.inputs[key] as LiturgicalDayBundleInput];\n      inputValues.forEach((input) => this.#buildDefinition(key, input));\n    });\n\n    this.#definitionsBuilt = true;\n  }\n\n  /**\n   *\n   * @param key\n   * @param input\n   * @private\n   */\n  #buildDefinition(key: Key, input: LiturgicalDayBundleInput): void {\n    // Create a new LiturgicalDay object from its definition\n    new LiturgicalDayDef(\n      key,\n      {\n        dateDef: input.dateDef,\n        dateExceptions: input.dateExceptions,\n        precedence: input.precedence,\n        allowSimilarRankItems: input.allowSimilarRankItems,\n        customLocaleKey: input.customLocaleKey,\n        isHolyDayOfObligation: input.isHolyDayOfObligation,\n        isOptional: input.isOptional,\n        colors: input.colors,\n        martyrology: input.martyrology,\n        titles: input.titles,\n        properCycle: input.properCycle,\n        drop: input.drop,\n      },\n      input.fromCalendar ?? this.calendarName,\n      this.#config,\n    );\n  }\n}\n", "export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}", "export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}", "import defineProperty from \"./defineProperty.js\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}", "export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}", "function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}", "export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}", "import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}", "export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}", "export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}", "import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}", "import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }, this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (typeof mix === 'string') return mix;\n      if (p && typeof mix[p] === 'string') return mix[p];\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceStore).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread({}, pack, resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread({}, {}, this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Translator).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS;\n\n      if (nsSeparator && key.indexOf(nsSeparator) > -1) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          return namespace + nsSeparator + key;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread({}, options, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread({}, options, {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread({}, options, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, fallbackValue) {\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, updateMissing ? fallbackValue : resForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, updateMissing ? fallbackValue : resForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, options, resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread({}, options, {\n          interpolation: _objectSpread({}, this.options.interpolation, options.interpolation)\n        }));\n        var skipOnVariables = options.interpolation && options.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables;\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread({}, this.options.interpolation.defaultVariables, data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKey = key;\n            var finalKeys = [finalKey];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count);\n              if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);\n              if (needsContextHandling) finalKeys.push(finalKey += \"\".concat(_this4.options.contextSeparator).concat(options.context));\n              if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.whitelist = this.options.supportedLngs || false;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isWhitelisted\",\n    value: function isWhitelisted(code) {\n      this.logger.deprecate('languageUtils.isWhitelisted', 'function \"isWhitelisted\" will be renamed to \"isSupportedCode\" in the next major - please make sure to rename it\\'s usage asap.');\n      return this.isSupportedCode(code);\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var rule = this.getRule(code);\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      return this.getSuffixes(code).map(function (suffix) {\n        return key + suffix;\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var rule = this.getRule(code);\n\n      if (!rule) {\n        return [];\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var _this2 = this;\n\n      var rule = this.getRule(code);\n\n      if (rule) {\n        var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n        var suffix = rule.numbers[idx];\n\n        if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          if (suffix === 2) {\n            suffix = 'plural';\n          } else if (suffix === 1) {\n            suffix = '';\n          }\n        }\n\n        var returnSuffix = function returnSuffix() {\n          return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n        };\n\n        if (this.options.compatibilityJSON === 'v1') {\n          if (suffix === 1) return '';\n          if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n          return returnSuffix();\n        } else if (this.options.compatibilityJSON === 'v2') {\n          return returnSuffix();\n        } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          return returnSuffix();\n        }\n\n        return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread({}, options, data, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread({}, options, data, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          value = handleFormat(match[1].trim());\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += safeValue.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread({}, inheritedOptions, clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread({}, options, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction remove(arr, what) {\n  var found = arr.indexOf(what);\n\n  while (found !== -1) {\n    arr.splice(found, 1);\n    found = arr.indexOf(what);\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = [];\n      var pending = [];\n      var toLoadLanguages = [];\n      var toLoadNamespaces = [];\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending.indexOf(name) < 0) pending.push(name);\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending.indexOf(name) < 0) pending.push(name);\n            if (toLoad.indexOf(name) < 0) toLoad.push(name);\n            if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages.push(lng);\n      });\n\n      if (toLoad.length || pending.length) {\n        this.queue.push({\n          pending: pending,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: toLoad,\n        pending: pending,\n        toLoadLanguages: toLoadLanguages,\n        toLoadNamespaces: toLoadNamespaces\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        remove(q.pending, name);\n        if (err) q.errors.push(err);\n\n        if (q.pending.length === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = [];\n\n            if (q.loaded[l].length) {\n              q.loaded[l].forEach(function (ns) {\n                if (loaded[l].indexOf(ns) < 0) loaded[l].push(ns);\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      return this.backend[fcName](lng, ns, function (err, data) {\n        if (err && data && tried < 5) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread({}, options, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    whitelist: false,\n    nonExplicitWhitelist: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: false\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.whitelist) {\n    if (options.whitelist && options.whitelist.indexOf('cimode') < 0) {\n      options.whitelist = options.whitelist.concat(['cimode']);\n    }\n\n    options.supportedLngs = options.whitelist;\n  }\n\n  if (options.nonExplicitWhitelist) {\n    options.nonExplicitSupportedLngs = options.nonExplicitWhitelist;\n  }\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction noop() {}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(I18n).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (options.whitelist && !options.supportedLngs) {\n        this.logger.deprecate('whitelist', 'option \"whitelist\" will be renamed to \"supportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      if (options.nonExplicitWhitelist && !options.nonExplicitSupportedLngs) {\n        this.logger.deprecate('whitelist', 'options \"nonExplicitWhitelist\" will be renamed to \"nonExplicitSupportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      this.options = _objectSpread({}, get(), this.options, transformOptions(options));\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, usedCallback);\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var done = function done(err, l) {\n        if (l) {\n          _this4.language = l;\n          _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            _this4.language = l;\n            _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = keyPrefix ? \"\".concat(keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"createInstance\",\n    value: function createInstance() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      return new I18n(options, callback);\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread({}, this.options, options, {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\nvar i18next = new I18n();\n\nexport default i18next;\n", "import { Colors } from '../constants/colors';\nimport { ProperCycles } from '../constants/cycles';\nimport { Precedences } from '../constants/precedences';\nimport { CalendarDef } from '../models/calendar-def';\nimport { Inputs, ParticularConfig } from '../types/calendar-def';\n\n// Note: Liturgical colors are added automatically, leaning on the martyrology catalog.\n// But since Romcal can be run without a localized calendar (so without martyrology and title data),\n// we must set manually the RED color on all martyrs in this General Roman Calendar,\n// which is the default calendar if no options are provided.\n\nexport class GeneralRoman extends CalendarDef {\n  particularConfig: ParticularConfig = {\n    epiphanyOnSunday: true,\n    ascensionOnSunday: false,\n    corpusChristiOnSunday: true,\n  };\n\n  inputs: Inputs = {\n    basil_the_great_and_gregory_nazianzen_bishops: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 2 },\n      martyrology: ['basil_the_great_bishop', 'gregory_nazianzen_bishop'],\n    },\n\n    most_holy_name_of_jesus: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 3 },\n    },\n\n    raymond_of_penyafort_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 7 },\n    },\n\n    hilary_of_poitiers_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 13 },\n    },\n\n    anthony_of_egypt_abbot: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 17 },\n    },\n\n    fabian_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 20 },\n      colors: Colors.Red,\n    },\n\n    sebastian_of_milan_martyr: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 20 },\n      colors: Colors.Red,\n    },\n\n    agnes_of_rome_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 21 },\n      colors: Colors.Red,\n    },\n\n    vincent_of_saragossa_deacon: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 22 },\n      colors: Colors.Red,\n    },\n\n    francis_de_sales_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 24 },\n    },\n\n    conversion_of_saint_paul_the_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 1, date: 25 },\n      colors: Colors.White,\n    },\n\n    timothy_of_ephesus_and_titus_of_crete_bishops: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 26 },\n      martyrology: ['timothy_of_ephesus_bishop', 'titus_of_crete_bishop'],\n    },\n\n    angela_merici_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 1, date: 27 },\n    },\n\n    thomas_aquinas_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 28 },\n    },\n\n    john_bosco_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 1, date: 31 },\n    },\n\n    presentation_of_the_lord: {\n      precedence: Precedences.GeneralLordFeast_5,\n      // 02-02\n      dateDef: { dateFn: 'presentationOfTheLord' },\n      colors: Colors.White,\n    },\n\n    blaise_of_sebaste_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 3 },\n      colors: Colors.Red,\n    },\n\n    ansgar_of_hamburg_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 3 },\n    },\n\n    agatha_of_sicily_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 2, date: 5 },\n      colors: Colors.Red,\n    },\n\n    paul_miki_and_companions_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 2, date: 6 },\n      martyrology: ['paul_miki_martyr', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    jerome_emiliani: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 8 },\n    },\n\n    josephine_bakhita_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 8 },\n    },\n\n    scholastica_of_nursia_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 2, date: 10 },\n    },\n\n    our_lady_of_lourdes: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 11 },\n    },\n\n    cyril_the_philosopher_monk_and_methodius_of_thessaloniki_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 2, date: 14 },\n      martyrology: ['cyril_the_philosopher_monk', 'methodius_of_thessaloniki_bishop'],\n    },\n\n    seven_holy_founders_of_the_servite_order: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 17 },\n    },\n\n    peter_damian_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 21 },\n    },\n\n    chair_of_saint_peter_the_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 2, date: 22 },\n      colors: Colors.White,\n    },\n\n    polycarp_of_smyrna_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 2, date: 23 },\n      colors: Colors.Red,\n    },\n\n    gregory_of_narek_abbot: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 2, date: 27 },\n    },\n\n    casimir_of_poland: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 4 },\n    },\n\n    perpetua_of_carthage_and_felicity_of_carthage_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 3, date: 7 },\n      martyrology: ['perpetua_of_carthage_martyr', 'felicity_of_carthage_martyr'],\n      colors: Colors.Red,\n    },\n\n    john_of_god_duarte_cidade_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 8 },\n    },\n\n    frances_of_rome_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 9 },\n    },\n\n    patrick_of_ireland_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 17 },\n    },\n\n    cyril_of_jerusalem_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 18 },\n    },\n\n    joseph_spouse_of_mary: {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { month: 3, date: 19 },\n      dateExceptions: [\n        { ifIsDayOfWeek: 0, setDate: { addDay: 1 } },\n        {\n          ifIsBetween: {\n            from: { dateFn: 'palmSunday' },\n            to: { dateFn: 'divineMercySunday' },\n            inclusive: true,\n          },\n          setDate: { dateFn: 'palmSunday', subtractDay: 1 },\n        },\n      ],\n      isHolyDayOfObligation: true,\n      colors: Colors.White,\n    },\n\n    turibius_of_mogrovejo_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 3, date: 23 },\n    },\n\n    annunciation: {\n      precedence: Precedences.GeneralSolemnity_3,\n      // 03-25\n      dateDef: { dateFn: 'annunciation' },\n      colors: Colors.White,\n    },\n\n    francis_of_paola_hermit: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 2 },\n    },\n\n    isidore_of_seville_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 4 },\n    },\n\n    vincent_ferrer_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 5 },\n    },\n\n    john_baptist_de_la_salle_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 4, date: 7 },\n    },\n\n    stanislaus_of_szczepanow_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 4, date: 11 },\n      colors: Colors.Red,\n    },\n\n    martin_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 13 },\n      colors: Colors.Red,\n    },\n\n    anselm_of_canterbury_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 21 },\n    },\n\n    george_of_lydda_martyr: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 23 },\n      colors: Colors.Red,\n    },\n\n    adalbert_of_prague_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 23 },\n      colors: Colors.Red,\n    },\n\n    fidelis_of_sigmaringen_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 24 },\n      colors: Colors.Red,\n    },\n\n    mark_evangelist: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 4, date: 25 },\n      colors: Colors.Red,\n    },\n\n    peter_chanel_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 28 },\n      colors: Colors.Red,\n    },\n\n    louis_grignion_de_montfort_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 28 },\n    },\n\n    catherine_of_siena_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 4, date: 29 },\n    },\n\n    pius_v_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 4, date: 30 },\n    },\n\n    joseph_the_worker: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 1 },\n    },\n\n    athanasius_of_alexandria_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 5, date: 2 },\n    },\n\n    philip_and_james_apostles: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 5, date: 3 },\n      martyrology: ['philip_apostle', 'james_apostle'],\n      colors: Colors.Red,\n    },\n\n    john_of_avila_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 10 },\n    },\n\n    nereus_of_terracina_and_achilleus_of_terracina_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 12 },\n      martyrology: ['nereus_of_terracina_martyr', 'achilleus_of_terracina_martyr'],\n      colors: Colors.Red,\n    },\n\n    pancras_of_rome_martyr: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 12 },\n      colors: Colors.Red,\n    },\n\n    our_lady_of_fatima: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 13 },\n    },\n\n    matthias_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 5, date: 14 },\n      colors: Colors.Red,\n    },\n\n    john_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 18 },\n      colors: Colors.Red,\n    },\n\n    bernardine_of_siena_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 20 },\n    },\n\n    christopher_magallanes_priest_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 21 },\n      martyrology: ['christopher_magallanes_priest', { key: 'companions_martyrs', count: 24 }],\n      colors: Colors.Red,\n    },\n\n    rita_of_cascia_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 22 },\n    },\n\n    bede_the_venerable_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 25 },\n    },\n\n    gregory_vii_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 25 },\n    },\n\n    mary_magdalene_de_pazzi_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 25 },\n    },\n\n    philip_neri_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 5, date: 26 },\n    },\n\n    augustine_of_canterbury_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 27 },\n    },\n\n    paul_vi_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 5, date: 29 },\n    },\n\n    visitation_of_mary: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 5, date: 31 },\n    },\n\n    mary_mother_of_the_church: {\n      precedence: Precedences.GeneralMemorial_10,\n      // The Monday, after Pentecost Sunday\n      dateDef: { dateFn: 'pentecostSunday', addDay: 1 },\n      properCycle: ProperCycles.ProperOfTime,\n    },\n\n    immaculate_heart_of_mary: {\n      precedence: Precedences.GeneralMemorial_10,\n      // The Saturday, after the Solemnity of the Most Sacred Heart of Jesus\n      dateDef: { dateFn: 'immaculateHeartOfMary' },\n      // If this liturgical day and a memorial occur on the same day,\n      // do not replace the latter, but output them both.\n      allowSimilarRankItems: true,\n      colors: Colors.White,\n      properCycle: ProperCycles.ProperOfTime,\n    },\n\n    justin_martyr: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 1 },\n      colors: Colors.Red,\n    },\n\n    marcellinus_of_rome_and_peter_the_exorcist_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 2 },\n      martyrology: ['marcellinus_of_rome_martyr', 'peter_the_exorcist_martyr'],\n      colors: Colors.Red,\n    },\n\n    charles_lwanga_and_companions_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 3 },\n      martyrology: ['charles_lwanga_martyr', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    boniface_of_mainz_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 5 },\n      colors: Colors.Red,\n    },\n\n    norbert_of_xanten_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 6 },\n    },\n\n    ephrem_the_syrian_deacon: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 9 },\n    },\n\n    barnabas_apostle: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 11 },\n      colors: Colors.Red,\n    },\n\n    anthony_of_padua_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 13 },\n    },\n\n    romuald_of_ravenna_abbot: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 19 },\n    },\n\n    aloysius_gonzaga_religious: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 21 },\n    },\n\n    paulinus_of_nola_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 22 },\n    },\n\n    john_fisher_bishop_and_thomas_more_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 22 },\n      martyrology: ['john_fisher_bishop', 'thomas_more_martyr'],\n      colors: Colors.Red,\n    },\n\n    nativity_of_john_the_baptist: {\n      precedence: Precedences.GeneralSolemnity_3,\n      // 06-24\n      dateDef: { dateFn: 'nativityOfJohnTheBaptist' },\n      colors: Colors.White,\n    },\n\n    cyril_of_alexandria_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 27 },\n    },\n\n    irenaeus_of_lyon_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 6, date: 28 },\n      colors: Colors.Red,\n    },\n\n    peter_and_paul_apostles: {\n      precedence: Precedences.GeneralSolemnity_3,\n      // 06-29\n      dateDef: { dateFn: 'peterAndPaulApostles' },\n      isHolyDayOfObligation: true,\n      colors: Colors.Red,\n      martyrology: ['peter_apostle', 'paul_apostle'],\n    },\n\n    first_martyrs_of_the_holy_roman_church: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 6, date: 30 },\n      colors: Colors.Red,\n    },\n\n    thomas_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 7, date: 3 },\n      colors: Colors.Red,\n    },\n\n    elizabeth_of_portugal: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 4 },\n    },\n\n    anthony_zaccaria_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 5 },\n    },\n\n    maria_goretti_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 6 },\n      colors: Colors.Red,\n    },\n\n    augustine_zhao_rong_priest_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 9 },\n      martyrology: ['augustine_zhao_rong_priest', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    benedict_of_nursia_abbot: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 7, date: 11 },\n    },\n\n    henry_ii_emperor: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 13 },\n    },\n\n    camillus_de_lellis_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 14 },\n    },\n\n    bonaventure_of_bagnoregio_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 7, date: 15 },\n    },\n\n    our_lady_of_mount_carmel: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 16 },\n    },\n\n    apollinaris_of_ravenna_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 20 },\n      colors: Colors.Red,\n    },\n\n    lawrence_of_brindisi_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 21 },\n    },\n\n    mary_magdalene: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 7, date: 22 },\n    },\n\n    bridget_of_sweden_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 23 },\n    },\n\n    sharbel_makhluf_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 24 },\n    },\n\n    james_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 7, date: 25 },\n      colors: Colors.Red,\n    },\n\n    joachim_and_anne_parents_of_mary: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 7, date: 26 },\n      martyrology: ['joachim_father_of_mary', 'anne_mother_of_mary'],\n    },\n\n    martha_of_bethany_mary_of_bethany_and_lazarus_of_bethany: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 7, date: 29 },\n      martyrology: ['martha_of_bethany', 'mary_of_bethany', 'lazarus_of_bethany'],\n    },\n\n    peter_chrysologus_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 7, date: 30 },\n    },\n\n    ignatius_of_loyola_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 7, date: 31 },\n    },\n\n    alphonsus_liguori_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 1 },\n    },\n\n    eusebius_of_vercelli_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 2 },\n    },\n\n    peter_julian_eymard_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 2 },\n    },\n\n    john_mary_vianney_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 4 },\n    },\n\n    dedication_of_the_basilica_of_saint_mary_major: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 5 },\n    },\n\n    transfiguration: {\n      precedence: Precedences.GeneralLordFeast_5,\n      // 08-06\n      dateDef: { dateFn: 'transfiguration' },\n      colors: Colors.White,\n    },\n\n    sixtus_ii_pope_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 7 },\n      martyrology: ['sixtus_ii_pope', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    cajetan_of_thiene_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 7 },\n    },\n\n    dominic_de_guzman_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 8 },\n    },\n\n    teresa_benedicta_of_the_cross_stein_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 9 },\n      colors: Colors.Red,\n    },\n\n    lawrence_of_rome_deacon: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 8, date: 10 },\n      colors: Colors.Red,\n    },\n\n    clare_of_assisi_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 11 },\n    },\n\n    jane_frances_de_chantal_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 12 },\n    },\n\n    pontian_i_pope_and_hippolytus_of_rome_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 13 },\n      martyrology: ['pontian_i_pope', 'hippolytus_of_rome_priest'],\n      colors: Colors.Red,\n    },\n\n    maximilian_kolbe_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 14 },\n      colors: Colors.Red,\n    },\n\n    assumption: {\n      precedence: Precedences.ProperOfTimeSolemnity_2,\n      // 08-15\n      dateDef: { dateFn: 'assumption' },\n      isHolyDayOfObligation: true,\n      colors: Colors.White,\n    },\n\n    stephen_i_of_hungary: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 16 },\n    },\n\n    john_eudes_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 19 },\n    },\n\n    bernard_of_clairvaux_abbot: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 20 },\n    },\n\n    pius_x_pope: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 21 },\n    },\n\n    queenship_of_mary: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 22 },\n    },\n\n    rose_of_lima_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 23 },\n    },\n\n    bartholomew_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 8, date: 24 },\n      colors: Colors.Red,\n    },\n\n    louis_ix_of_france: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 25 },\n    },\n\n    joseph_of_calasanz_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 8, date: 25 },\n    },\n\n    monica_of_hippo: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 27 },\n    },\n\n    augustine_of_hippo_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 28 },\n    },\n\n    passion_of_saint_john_the_baptist: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 8, date: 29 },\n    },\n\n    gregory_i_the_great_pope: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 3 },\n    },\n\n    nativity_of_mary: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 9, date: 8 },\n    },\n\n    peter_claver_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 9 },\n    },\n\n    most_holy_name_of_mary: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 12 },\n    },\n\n    john_chrysostom_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 13 },\n    },\n\n    exaltation_of_the_holy_cross: {\n      precedence: Precedences.GeneralLordFeast_5,\n      // 09-14\n      dateDef: { dateFn: 'exaltationOfTheHolyCross' },\n      colors: Colors.Red,\n    },\n\n    our_lady_of_sorrows: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 15 },\n    },\n\n    cornelius_i_pope_and_cyprian_of_carthage_bishop_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 16 },\n      martyrology: ['cornelius_i_pope', 'cyprian_of_carthage_bishop'],\n      colors: Colors.Red,\n    },\n\n    hildegard_of_bingen_abbess: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 17 },\n    },\n\n    robert_bellarmine_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 17 },\n    },\n\n    januarius_i_of_benevento_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 19 },\n      colors: Colors.Red,\n    },\n\n    andrew_kim_tae_gon_priest_paul_chong_ha_sang_and_companions_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 20 },\n      martyrology: ['andrew_kim_tae_gon_priest', 'paul_chong_ha_sang_martyr', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    matthew_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 9, date: 21 },\n      colors: Colors.Red,\n    },\n\n    pius_of_pietrelcina_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 23 },\n    },\n\n    cosmas_of_cilicia_and_damian_of_cilicia_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 26 },\n      martyrology: ['cosmas_of_cilicia_martyr', 'damian_of_cilicia_martyr'],\n      colors: Colors.Red,\n    },\n\n    vincent_de_paul_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 27 },\n    },\n\n    wenceslaus_i_of_bohemia_martyr: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 28 },\n      colors: Colors.Red,\n    },\n\n    lawrence_ruiz_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 9, date: 28 },\n      martyrology: ['lawrence_ruiz_martyr', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    michael_gabriel_and_raphael_archangels: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 9, date: 29 },\n      martyrology: ['michael_archangel', 'gabriel_archangel', 'raphael_archangel'],\n    },\n\n    jerome_of_stridon_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 9, date: 30 },\n    },\n\n    therese_of_the_child_jesus_and_the_holy_face_of_lisieux_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 1 },\n    },\n\n    guardian_angels: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 2 },\n    },\n\n    francis_of_assisi: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 4 },\n    },\n\n    faustina_kowalska_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 5 },\n    },\n\n    bruno_of_cologne_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 6 },\n    },\n\n    our_lady_of_the_rosary: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 7 },\n    },\n\n    denis_of_paris_bishop_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 9 },\n      martyrology: ['denis_of_paris_bishop', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    john_leonardi_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 9 },\n    },\n\n    john_xxiii_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 11 },\n    },\n\n    john_paul_ii_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 22 },\n    },\n\n    callistus_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 14 },\n      colors: Colors.Red,\n    },\n\n    teresa_of_jesus_of_avila_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 15 },\n    },\n\n    hedwig_of_silesia_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 16 },\n    },\n\n    margaret_mary_alacoque_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 16 },\n    },\n\n    ignatius_of_antioch_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 10, date: 17 },\n      colors: Colors.Red,\n    },\n\n    luke_evangelist: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 10, date: 18 },\n      colors: Colors.Red,\n    },\n\n    john_de_brebeuf_isaac_jogues_priests_and_companions_martyrs: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 19 },\n      martyrology: ['john_de_brebeuf_priest', 'isaac_jogues_priest', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    paul_of_the_cross_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 19 },\n    },\n\n    john_of_capistrano_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 23 },\n    },\n\n    anthony_mary_claret_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 10, date: 24 },\n    },\n\n    dedication_of_consecrated_churches_on_october_25: {\n      precedence: Precedences.ProperSolemnity_DedicationOfTheOwnChurch_4b,\n      customLocaleKey: 'dedication_of_consecrated_churches',\n      dateDef: { month: 10, date: 25 },\n      isOptional: true,\n    },\n\n    dedication_of_consecrated_churches_on_last_sunday_of_october: {\n      precedence: Precedences.ProperSolemnity_DedicationOfTheOwnChurch_4b,\n      customLocaleKey: 'dedication_of_consecrated_churches',\n      dateDef: { month: 10, lastDayOfWeekInMonth: 0 },\n      isOptional: true,\n    },\n\n    simon_and_jude_apostles: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 10, date: 28 },\n      martyrology: ['simon_apostle', 'jude_apostle'],\n      colors: Colors.Red,\n    },\n\n    all_saints: {\n      precedence: Precedences.GeneralSolemnity_3,\n      // 11-01\n      dateDef: { dateFn: 'allSaints' },\n      isHolyDayOfObligation: true,\n      colors: Colors.White,\n    },\n\n    all_souls: {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { month: 11, date: 2 },\n      colors: [Colors.Purple, Colors.Black],\n    },\n\n    martin_de_porres_religious: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 3 },\n    },\n\n    charles_borromeo_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 4 },\n    },\n\n    dedication_of_the_lateran_basilica: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 11, date: 9 },\n    },\n\n    leo_i_the_great_pope: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 10 },\n    },\n\n    martin_of_tours_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 11 },\n    },\n\n    josaphat_kuntsevych_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 12 },\n      colors: Colors.Red,\n    },\n\n    albert_the_great_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 15 },\n    },\n\n    margaret_of_scotland: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 16 },\n    },\n\n    gertrude_the_great_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 16 },\n    },\n\n    elizabeth_of_hungary_religious: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 17 },\n    },\n\n    dedication_of_the_basilicas_of_saints_peter_and_paul_apostles: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 18 },\n    },\n\n    presentation_of_mary: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 21 },\n    },\n\n    cecilia_of_rome_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 22 },\n      colors: Colors.Red,\n    },\n\n    clement_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 23 },\n      colors: Colors.Red,\n    },\n\n    columban_of_luxeuil_abbot: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 23 },\n    },\n\n    andrew_dung_lac_priest_and_companions_martyrs: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 11, date: 24 },\n      martyrology: ['andrew_dung_lac_priest', 'companions_martyrs'],\n      colors: Colors.Red,\n    },\n\n    catherine_of_alexandria_virgin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 11, date: 25 },\n      colors: Colors.Red,\n    },\n\n    andrew_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 11, date: 30 },\n      colors: Colors.Red,\n    },\n\n    francis_xavier_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 12, date: 3 },\n    },\n\n    john_damascene_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 4 },\n    },\n\n    nicholas_of_myra_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 6 },\n    },\n\n    ambrose_of_milan_bishop: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 12, date: 7 },\n    },\n\n    immaculate_conception_of_mary: {\n      precedence: Precedences.GeneralSolemnity_3,\n      // 12-08\n      dateDef: { dateFn: 'immaculateConceptionOfMary' },\n      isHolyDayOfObligation: true,\n      colors: Colors.White,\n    },\n\n    juan_diego_cuauhtlatoatzin: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 9 },\n    },\n\n    our_lady_of_loreto: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 10 },\n    },\n\n    damasus_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 11 },\n    },\n\n    our_lady_of_guadalupe: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 12 },\n    },\n\n    lucy_of_syracuse_virgin: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 12, date: 13 },\n      colors: Colors.Red,\n    },\n\n    john_of_the_cross_priest: {\n      precedence: Precedences.GeneralMemorial_10,\n      dateDef: { month: 12, date: 14 },\n    },\n\n    peter_canisius_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 21 },\n    },\n\n    john_of_kanty_priest: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 23 },\n    },\n\n    stephen_the_first_martyr: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 12, date: 26 },\n      colors: Colors.Red,\n    },\n\n    john_apostle: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 12, date: 27 },\n      colors: Colors.White,\n    },\n\n    holy_innocents_martyrs: {\n      precedence: Precedences.GeneralFeast_7,\n      dateDef: { month: 12, date: 28 },\n      colors: Colors.Red,\n    },\n\n    thomas_becket_bishop: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 29 },\n      colors: Colors.Red,\n    },\n\n    sylvester_i_pope: {\n      precedence: Precedences.OptionalMemorial_12,\n      dateDef: { month: 12, date: 31 },\n    },\n  };\n}\n", "import { Colors } from '../constants/colors';\nimport { ProperCycles } from '../constants/cycles';\nimport { PROPER_OF_TIME_NAME } from '../constants/general-calendar-names';\nimport { MONTHS } from '../constants/months';\nimport { Periods } from '../constants/periods';\nimport { Precedences } from '../constants/precedences';\nimport { Seasons } from '../constants/seasons';\nimport { WEEKDAYS } from '../constants/weekdays';\nimport { CalendarDef } from '../models/calendar-def';\nimport { RomcalConfig } from '../models/config';\nimport LiturgicalDayDef from '../models/liturgical-day-def';\nimport { BundleInputs } from '../types/calendar-def';\nimport { Key } from '../types/common';\nimport { LiturgicalDayProperOfTimeInput } from '../types/liturgical-day';\n\nexport class ProperOfTime extends CalendarDef {\n  readonly #config: RomcalConfig;\n  readonly #weekdays = WEEKDAYS;\n  readonly #months = MONTHS;\n  #calendarName: string = PROPER_OF_TIME_NAME;\n\n  public get calendarName(): string {\n    return this.#calendarName;\n  }\n\n  constructor(config: RomcalConfig, inputs?: BundleInputs) {\n    super(config, inputs);\n    this.#config = config;\n  }\n\n  buildAllDefinitions = (): void => {\n    if (Object.keys(Object.keys(this.#config.liturgicalDayDef)).length > 0) return;\n\n    if (this.#config.scope === 'gregorian') {\n      this.lateChristmasTime();\n      this.lent();\n      this.paschalTriduum();\n      this.easterTime();\n      this.ordinaryTime();\n      this.advent(+1);\n      this.earlyChristmasTime(+1);\n    } else {\n      this.advent();\n      this.christmasTime();\n      this.lent();\n      this.paschalTriduum();\n      this.easterTime();\n      this.ordinaryTime();\n    }\n  };\n\n  /**\n   * Helper function to create new LiturgicalDayDef object\n   * @param key\n   * @param input\n   * @private\n   */\n  #newLiturgicalDayDef(key: Key, input: LiturgicalDayProperOfTimeInput): void {\n    new LiturgicalDayDef(key, { properCycle: ProperCycles.ProperOfTime, ...input }, PROPER_OF_TIME_NAME, this.#config);\n  }\n\n  /**\n   * Compute the Proper of Advent\n   * @param yearOffset A Liturgical year offset\n   */\n  advent(yearOffset = 0): void {\n    // All days, from the 1st Sunday of Advent to the Friday of the 3rd week of Advent.\n    for (let i = 0; i < 20; i++) {\n      const week = Math.floor(i / 7) + 1;\n      const dow = i - (week - 1) * 7;\n\n      this.#newLiturgicalDayDef(`advent_${week}_${this.#weekdays[dow]}`, {\n        precedence: dow === 0 ? Precedences.PrivilegedSunday_2 : Precedences.Weekday_13,\n        dateDef:\n          dow === 0\n            ? { dateFn: 'sundayOfAdvent', dateArgs: [week], yearOffset: -1 + yearOffset }\n            : {\n                dateFn: 'unprivilegedWeekdayOfAdvent',\n                dateArgs: [dow, week],\n                yearOffset: -1 + yearOffset,\n              },\n        isHolyDayOfObligation: dow === 0,\n        seasons: [Seasons.Advent],\n        periods: [],\n        calendarMetadata: { weekOfSeason: week, dayOfSeason: i + 1, dayOfWeek: dow },\n        colors: [\n          ...(week === 3 && dow === 0 ? [Colors.Rose] : []), // Gaudete\n          Colors.Purple,\n        ],\n        i18nDef:\n          dow === 0 ? ['seasons:advent.sunday', { week: week }] : ['seasons:advent.weekday', { week: week, dow }],\n      });\n    }\n\n    // Fourth Sunday of Advent.\n    this.#newLiturgicalDayDef(`advent_4_${this.#weekdays[0]}`, {\n      precedence: Precedences.PrivilegedSunday_2,\n      dateDef: { dateFn: 'sundayOfAdvent', dateArgs: [4], yearOffset: -1 + yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.Advent],\n      periods: [],\n      calendarMetadata: { weekOfSeason: 4, dayOfSeason: 22, dayOfWeek: 0 },\n      colors: [Colors.Purple],\n      i18nDef: ['seasons:advent.sunday', { week: 4 }],\n    });\n\n    // Week before Christmas, from the 17 to 24 December.\n    for (let day = 17; day < 25; day++) {\n      this.#newLiturgicalDayDef(`advent_${this.#months[11]}_${day}`, {\n        precedence: Precedences.PrivilegedWeekday_9,\n        dateDef: {\n          dateFn: 'privilegedWeekdayOfAdvent',\n          dateArgs: [day],\n          yearOffset: -1 + yearOffset,\n        },\n        seasons: [Seasons.Advent],\n        periods: [],\n        calendarMetadata: {},\n        colors: [Colors.Purple],\n        i18nDef: ['seasons:advent.privileged_weekday', { day }],\n      });\n    }\n  }\n\n  /**\n   * Compute the Proper of the Christmas Time\n   * @param yearOffset A Liturgical year offset\n   */\n  christmasTime(yearOffset = 0): void {\n    this.earlyChristmasTime(yearOffset);\n    this.lateChristmasTime(yearOffset);\n  }\n\n  /**\n   * Compute the Proper of the first part of the Christmas Time,\n   * which is in the first Gregorian year of the liturgical year.\n   * e.g.: A liturgical year that occur between the years 2019-2020,\n   * it returns the Proper that correspond to the year 2019.\n   * @param yearOffset A Liturgical year offset\n   */\n  earlyChristmasTime(yearOffset = 0): void {\n    // The Nativity of the Lord.\n    this.#newLiturgicalDayDef(`christmas`, {\n      precedence: Precedences.ProperOfTimeSolemnity_2,\n      dateDef: { dateFn: 'christmas', yearOffset: -1 + yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.ChristmasTime],\n      periods: [Periods.ChristmasOctave, Periods.ChristmasToPresentationOfTheLord],\n      calendarMetadata: { weekOfSeason: 1, dayOfSeason: 1 },\n      colors: [Colors.White],\n      i18nDef: [`names:christmas`],\n    });\n\n    // Octave of the Nativity of the Lord (without December 25 and January 1).\n    for (let count = 2; count < 8; count++) {\n      this.#newLiturgicalDayDef(`christmas_octave_day_${count}`, {\n        precedence: Precedences.PrivilegedWeekday_9,\n        dateDef: {\n          dateFn: 'weekdayWithinOctaveOfChristmas',\n          dateArgs: [count],\n          yearOffset: -1 + yearOffset,\n        },\n        seasons: [Seasons.ChristmasTime],\n        periods: [Periods.ChristmasOctave, Periods.ChristmasToPresentationOfTheLord],\n        calendarMetadata: { dayOfSeason: count },\n        colors: [Colors.White],\n        i18nDef: ['seasons:christmas_time.octave', { count }],\n      });\n    }\n\n    // The Sunday within the Octave of the Nativity of the Lord,\n    // Feast of the Holy Family of Jesus, Mary and Joseph.\n    this.#newLiturgicalDayDef(`holy_family`, {\n      precedence: Precedences.GeneralLordFeast_5,\n      dateDef: { dateFn: 'holyFamily', yearOffset: -1 + yearOffset },\n      isHolyDayOfObligation: false,\n      seasons: [Seasons.ChristmasTime],\n      periods: [Periods.ChristmasOctave, Periods.ChristmasToPresentationOfTheLord],\n      calendarMetadata: {},\n      colors: [Colors.White],\n      i18nDef: [`names:holy_family`],\n    });\n  }\n\n  /**\n   * Compute the Proper of the second part of the Christmas Time,\n   * which is in the second Gregorian year of the liturgical year.\n   * e.g.: A liturgical year that occur between the years 2019-2020,\n   * it returns the Proper that correspond to the year 2020.\n   * @param yearOffset A Liturgical year offset\n   */\n  lateChristmasTime(yearOffset = 0): void {\n    // Solemnity of Mary, the Holy Mother of God.\n    this.#newLiturgicalDayDef(`mary_mother_of_god`, {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { dateFn: 'maryMotherOfGod', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.ChristmasTime],\n      periods: [Periods.ChristmasOctave, Periods.ChristmasToPresentationOfTheLord],\n      calendarMetadata: { dayOfSeason: 8 },\n      colors: [Colors.White],\n      i18nDef: ['names:mary_mother_of_god'],\n    });\n\n    // Second Sunday after the Nativity.\n    this.#newLiturgicalDayDef(`second_sunday_after_christmas`, {\n      precedence: Precedences.UnprivilegedSunday_6,\n      dateDef: { dateFn: 'secondSundayAfterChristmas', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.ChristmasTime],\n      periods: [\n        // Note: before / from Epiphany flag is added during the creation of the liturgical day object,\n        // because this can only be determined within a liturgical year scope.\n        Periods.ChristmasToPresentationOfTheLord,\n      ],\n      calendarMetadata: {},\n      colors: [Colors.White],\n      i18nDef: ['seasons:christmas_time.second_sunday_after_christmas'],\n    });\n\n    // Weekdays of Christmas Time, before the Epiphany of the Lord.\n    for (let day = 2; day < 9; day++) {\n      this.#newLiturgicalDayDef(`christmas_time_${this.#months[0]}_${day}`, {\n        precedence: Precedences.Weekday_13,\n        dateDef: { dateFn: 'weekdayBeforeEpiphany', dateArgs: [day], yearOffset: yearOffset },\n        seasons: [Seasons.ChristmasTime],\n        periods: [Periods.DaysBeforeEpiphany, Periods.ChristmasToPresentationOfTheLord],\n        calendarMetadata: { dayOfSeason: 7 + day },\n        colors: [Colors.White],\n        i18nDef: ['seasons:christmas_time.before_epiphany', { day }],\n      });\n    }\n\n    // The Epiphany of the Lord.\n    this.#newLiturgicalDayDef(`epiphany`, {\n      precedence: Precedences.ProperOfTimeSolemnity_2,\n      dateDef: { dateFn: 'epiphany', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.ChristmasTime],\n      periods: [Periods.DaysFromEpiphany, Periods.ChristmasToPresentationOfTheLord],\n      calendarMetadata: {},\n      colors: [Colors.White],\n      i18nDef: ['names:epiphany'],\n    });\n\n    // Weekdays of Christmas Time, after the Epiphany of the Lord.\n    for (let dow = 1; dow < 7; dow++) {\n      this.#newLiturgicalDayDef(`${this.#weekdays[dow]}_after_epiphany`, {\n        precedence: Precedences.Weekday_13,\n        dateDef: { dateFn: 'weekdayAfterEpiphany', dateArgs: [dow], yearOffset: yearOffset },\n        seasons: [Seasons.ChristmasTime],\n        periods: [Periods.DaysFromEpiphany, Periods.ChristmasToPresentationOfTheLord],\n        calendarMetadata: {},\n        colors: [Colors.White],\n        i18nDef: ['seasons:christmas_time.after_epiphany', { dow }],\n      });\n    }\n\n    // The Baptism of the Lord.\n    this.#newLiturgicalDayDef(`baptism_of_the_lord`, {\n      precedence: Precedences.ProperOfTimeSolemnity_2,\n      dateDef: { dateFn: 'baptismOfTheLord', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.ChristmasTime],\n      periods: [Periods.DaysFromEpiphany, Periods.ChristmasToPresentationOfTheLord],\n      calendarMetadata: {},\n      colors: [Colors.White],\n      i18nDef: ['names:baptism_of_the_lord'],\n    });\n  }\n\n  /**\n   * Compute the Proper of Lent\n   * @param yearOffset A Liturgical year offset\n   */\n  lent(yearOffset = 0): void {\n    // Ash Wednesday.\n    this.#newLiturgicalDayDef(`ash_wednesday`, {\n      precedence: Precedences.AshWednesday_2,\n      dateDef: { dateFn: 'ashWednesday', yearOffset: yearOffset },\n      seasons: [Seasons.Lent],\n      periods: [Periods.PresentationOfTheLordToHolyThursday],\n      calendarMetadata: { weekOfSeason: 0, dayOfSeason: 1, dayOfWeek: 3 },\n      colors: [Colors.Purple],\n      i18nDef: [`names:ash_wednesday`],\n    });\n\n    // Days after Ash Wednesday.\n    for (let dow = 4; dow < 7; dow++) {\n      this.#newLiturgicalDayDef(`${this.#weekdays[dow]}_after_ash_wednesday`, {\n        precedence: Precedences.PrivilegedWeekday_9,\n        dateDef: { dateFn: 'ashWednesday', addDay: dow - 3, yearOffset: yearOffset },\n        seasons: [Seasons.Lent],\n        periods: [Periods.PresentationOfTheLordToHolyThursday],\n        calendarMetadata: { weekOfSeason: 0, dayOfSeason: dow - 2, dayOfWeek: dow },\n        colors: [Colors.Purple],\n        i18nDef: ['seasons:lent.day_after_ash_wed', { dow }],\n      });\n    }\n\n    // All days, from the 1st Sunday of Lent to the Saturday of the 5th week of Lent.\n    for (let i = 0; i < 35; i++) {\n      const week = Math.floor(i / 7) + 1;\n      const dow = i - (week - 1) * 7;\n      this.#newLiturgicalDayDef(`lent_${week}_${this.#weekdays[dow]}`, {\n        precedence: dow === 0 ? Precedences.PrivilegedSunday_2 : Precedences.PrivilegedWeekday_9,\n        dateDef: { dateFn: 'ashWednesday', addDay: i + 4, yearOffset: yearOffset },\n        isHolyDayOfObligation: dow === 0,\n        seasons: [Seasons.Lent],\n        periods: [Periods.PresentationOfTheLordToHolyThursday],\n        calendarMetadata: { weekOfSeason: week, dayOfSeason: i + 4, dayOfWeek: dow },\n        colors: [\n          ...(week === 4 && dow === 0 ? [Colors.Rose] : []), // Laetare\n          Colors.Purple,\n        ],\n        i18nDef: dow === 0 ? ['seasons:lent.sunday', { week: week }] : ['seasons:lent.weekday', { week: week, dow }],\n      });\n    }\n\n    // Palm Sunday of the Passion of the Lord.\n    this.#newLiturgicalDayDef(`palm_sunday`, {\n      precedence: Precedences.PrivilegedSunday_2,\n      dateDef: { dateFn: 'palmSunday', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.Lent],\n      periods: [Periods.HolyWeek, Periods.PresentationOfTheLordToHolyThursday],\n      calendarMetadata: { weekOfSeason: 6, dayOfSeason: 35, dayOfWeek: 0 },\n      colors: [Colors.Red],\n      i18nDef: [`names:palm_sunday`],\n    });\n\n    // Holy Week, Monday to Thursday.\n    for (let dow = 1; dow < 5; dow++) {\n      this.#newLiturgicalDayDef(`holy_${this.#weekdays[dow]}`, {\n        precedence: Precedences.PrivilegedWeekday_9,\n        dateDef: { dateFn: 'palmSunday', addDay: dow, yearOffset: yearOffset },\n        seasons: [Seasons.Lent],\n        periods: [Periods.HolyWeek, Periods.PresentationOfTheLordToHolyThursday],\n        calendarMetadata: { weekOfSeason: 6, dayOfSeason: 35 + dow, dayOfWeek: dow },\n        colors: [Colors.Purple],\n        i18nDef: ['seasons:lent.holy_week_day', { dow }],\n      });\n    }\n  }\n\n  /**\n   * Compute the Proper of the Paschal Triduum\n   * @param yearOffset A Liturgical year offset\n   */\n  paschalTriduum(yearOffset = 0): void {\n    // Thursday of the Lord's Supper (at the Evening Mass).\n    this.#newLiturgicalDayDef(`thursday_of_the_lord_s_supper`, {\n      precedence: Precedences.Triduum_1,\n      dateDef: { dateFn: 'holyThursday', yearOffset: yearOffset },\n      seasons: [Seasons.PaschalTriduum],\n      periods: [Periods.HolyWeek],\n      calendarMetadata: { weekOfSeason: 1, dayOfSeason: 0, dayOfWeek: 4 },\n      colors: [Colors.White],\n      i18nDef: [`names:thursday_of_the_lord_s_supper`],\n    });\n\n    // Friday of the Passion of the Lord.\n    this.#newLiturgicalDayDef(`good_friday`, {\n      precedence: Precedences.Triduum_1,\n      dateDef: { dateFn: 'goodFriday', yearOffset: yearOffset },\n      seasons: [Seasons.PaschalTriduum],\n      periods: [Periods.HolyWeek],\n      calendarMetadata: { weekOfSeason: 1, dayOfSeason: 1, dayOfWeek: 5 },\n      colors: [Colors.Red],\n      i18nDef: [`names:good_friday`],\n    });\n\n    // Holy Saturday\n    this.#newLiturgicalDayDef(`holy_saturday`, {\n      precedence: Precedences.Triduum_1,\n      dateDef: { dateFn: 'holySaturday', yearOffset: yearOffset },\n      seasons: [Seasons.PaschalTriduum],\n      periods: [Periods.HolyWeek],\n      calendarMetadata: { weekOfSeason: 1, dayOfSeason: 2, dayOfWeek: 6 },\n      colors: [],\n      i18nDef: [`names:holy_saturday`],\n    });\n\n    // Easter Sunday of the Resurrection of the Lord.\n    this.#newLiturgicalDayDef(`easter_sunday`, {\n      precedence: Precedences.Triduum_1,\n      dateDef: { dateFn: 'easterSunday', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.PaschalTriduum, Seasons.EasterTime],\n      periods: [Periods.EasterOctave],\n      calendarMetadata: { weekOfSeason: 1, dayOfSeason: 1, dayOfWeek: 1 },\n      colors: [Colors.White],\n      i18nDef: [`names:easter_sunday`],\n    });\n  }\n\n  /**\n   * Compute the Proper of the Easter Time\n   * @param yearOffset A Liturgical year offset\n   */\n  easterTime(yearOffset = 0): void {\n    // Octave of Easter.\n    for (let dow = 1; dow < 7; dow++) {\n      this.#newLiturgicalDayDef(`easter_${this.#weekdays[dow]}`, {\n        precedence: Precedences.WeekdayOfEasterOctave_2,\n        dateDef: { dateFn: 'easterSunday', addDay: dow, yearOffset: yearOffset },\n        seasons: [Seasons.EasterTime],\n        periods: [Periods.EasterOctave],\n        calendarMetadata: { weekOfSeason: 1, dayOfSeason: dow + 1, dayOfWeek: dow },\n        colors: [Colors.White],\n        i18nDef: ['seasons:easter_time.octave', { dow }],\n      });\n    }\n\n    // Second Sunday of Easter, or of Divine Mercy.\n    this.#newLiturgicalDayDef(`divine_mercy_sunday`, {\n      precedence: Precedences.PrivilegedSunday_2,\n      dateDef: { dateFn: 'divineMercySunday', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.EasterTime],\n      periods: [Periods.EasterOctave],\n      calendarMetadata: { weekOfSeason: 2, dayOfSeason: 8, dayOfWeek: 0 },\n      colors: [Colors.White],\n      i18nDef: [`names:divine_mercy_sunday`],\n    });\n\n    // All days, from the 2nd Monday to the 7th Saturday of Easter Time.\n    for (let i = 8; i < 49; i++) {\n      const week = Math.floor(i / 7) + 1;\n      const dow = i - (week - 1) * 7;\n\n      const data: LiturgicalDayProperOfTimeInput = {\n        precedence: dow === 0 ? Precedences.PrivilegedSunday_2 : Precedences.Weekday_13,\n        dateDef: {\n          dateFn: 'weekdayOrSundayOfEasterTime',\n          dateArgs: [dow, week],\n          yearOffset: yearOffset,\n        },\n        isHolyDayOfObligation: dow === 0,\n        seasons: [Seasons.EasterTime],\n        periods: [],\n        calendarMetadata: { weekOfSeason: week, dayOfSeason: i + 1, dayOfWeek: dow },\n        colors: [Colors.White],\n        i18nDef: dow === 0 ? ['seasons:easter_time.sunday', { week }] : ['seasons:easter_time.weekday', { week, dow }],\n      };\n      // The Ascension of the Lord.\n      if (week === 6 && dow === 4) {\n        this.#newLiturgicalDayDef(`ascension`, {\n          ...data,\n          precedence: Precedences.ProperOfTimeSolemnity_2,\n          dateDef: { dateFn: 'ascension', yearOffset: yearOffset },\n          isHolyDayOfObligation: true,\n          calendarMetadata: {},\n          i18nDef: [`names:ascension`],\n        });\n      }\n      // All other Sundays and weekdays.\n      this.#newLiturgicalDayDef(`easter_time_${week}_${this.#weekdays[dow]}`, data);\n    }\n\n    // Pentecost Sunday.\n    this.#newLiturgicalDayDef(`pentecost_sunday`, {\n      precedence: Precedences.ProperOfTimeSolemnity_2,\n      dateDef: { dateFn: 'pentecostSunday', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.EasterTime],\n      periods: [],\n      calendarMetadata: { weekOfSeason: 8, dayOfSeason: 50, dayOfWeek: 0 },\n      colors: [Colors.Red],\n      i18nDef: [`names:pentecost_sunday`],\n    });\n  }\n\n  /**\n   * Compute the Proper of the Ordinary Time\n   * @param yearOffset A Liturgical year offset\n   */\n  ordinaryTime(yearOffset = 0): void {\n    // The Most Holy Trinity.\n    this.#newLiturgicalDayDef(`trinity_sunday`, {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { dateFn: 'trinitySunday', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.OrdinaryTime],\n      periods: [],\n      calendarMetadata: { dayOfWeek: 0 },\n      colors: [Colors.White],\n      i18nDef: [`names:trinity_sunday`],\n    });\n\n    // The Most Holy Body and Blood of Christ (Corpus Christi).\n    this.#newLiturgicalDayDef(`corpus_christi`, {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { dateFn: 'corpusChristi', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.OrdinaryTime],\n      periods: [],\n      calendarMetadata: {},\n      colors: [Colors.White],\n      i18nDef: [`names:corpus_christi`],\n    });\n\n    // The Most Sacred Heart of Jesus.\n    this.#newLiturgicalDayDef(`most_sacred_heart_of_jesus`, {\n      precedence: Precedences.GeneralSolemnity_3,\n      dateDef: { dateFn: 'mostSacredHeartOfJesus', yearOffset: yearOffset },\n      isHolyDayOfObligation: true,\n      seasons: [Seasons.OrdinaryTime],\n      periods: [],\n      calendarMetadata: { dayOfWeek: 5 },\n      colors: [Colors.White],\n      i18nDef: [`names:most_sacred_heart_of_jesus`],\n    });\n\n    // Ordinary Time.\n    for (let i = 1; i < 238; i++) {\n      const week = Math.floor(i / 7) + 1;\n      const dow = i - (week - 1) * 7;\n\n      const data: LiturgicalDayProperOfTimeInput = {\n        precedence: dow === 0 ? Precedences.UnprivilegedSunday_6 : Precedences.Weekday_13,\n        dateDef: { dateFn: 'dateOfOrdinaryTime', dateArgs: [dow, week], yearOffset: yearOffset },\n        isHolyDayOfObligation: dow === 0,\n        seasons: [Seasons.OrdinaryTime],\n        periods: [], // todo: add early / late ordinary time\n        calendarMetadata: { weekOfSeason: week, dayOfSeason: i, dayOfWeek: dow },\n        colors: [Colors.Green],\n        i18nDef:\n          dow === 0 ? ['seasons:ordinary_time.sunday', { week }] : ['seasons:ordinary_time.weekday', { week, dow }],\n      };\n\n      // Sunday of the Word of God\n      // http://www.vatican.va/content/francesco/en/motu_proprio/documents/papa-francesco-motu-proprio-20190930_aperuit-illis.html\n      if (week === 3 && dow === 0) {\n        this.#newLiturgicalDayDef(`sunday_of_the_word_of_god`, {\n          ...data,\n          i18nDef: [`names:sunday_of_the_word_of_god`],\n        });\n      }\n\n      // 34th week in Ordinary Time,\n      // or the Solemnity of our Lord Jesus Christ, King of the Universe.\n      else if (week === 34 && dow === 0) {\n        this.#newLiturgicalDayDef(`christ_the_king_sunday`, {\n          ...data,\n          precedence: Precedences.GeneralSolemnity_3,\n          colors: [Colors.White],\n          i18nDef: [`names:christ_the_king_sunday`],\n        });\n      }\n\n      // All other Sundays and weekdays.\n      else {\n        this.#newLiturgicalDayDef(`ordinary_time_${week}_${this.#weekdays[dow]}`, data);\n      }\n    }\n  }\n}\n", "const numerals: Record<string, number> = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XL: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1,\n};\n\n/**\n * Convert arabic numbers to roman numerals.\n * Inspired by https://github.com/jonschlinkert/romanize\n */\nexport const toRomanNumber = (number: number): string => {\n  const keys = Object.keys(numerals);\n  let str = '';\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    str += key.repeat((number / numerals[key]) >>> 0);\n    number %= numerals[key];\n  }\n  return str;\n};\n", "import i18next, { i18n } from 'i18next';\nimport { Color } from '../constants/colors';\nimport { Season } from '../constants/seasons';\nimport { GeneralRoman } from '../general-calendar/proper-of-saints';\nimport { ProperOfTime } from '../general-calendar/proper-of-time';\nimport { RomcalBundleObject } from '../types/bundle';\nimport { CalendarDefInstance, LiturgicalDayDefinitions } from '../types/calendar-def';\nimport { CalendarScope, IRoncalConfig, RomcalConfigInput, RomcalConfigOutput } from '../types/config';\nimport { Locale } from '../types/locale';\nimport { MartyrologyCatalog } from '../types/martyrology';\nimport { Dates } from '../utils/dates';\nimport { toRomanNumber } from '../utils/numbers';\nimport { CalendarDef } from './calendar-def';\n\n/**\n * The [[Config]] class encapsulates all options that can be sent to this library to adjust date output.\n */\nexport class RomcalConfig implements IRoncalConfig {\n  readonly #input: RomcalConfigInput;\n  readonly localizedCalendar?: RomcalBundleObject;\n  readonly localeKey: string;\n  readonly calendarName: string;\n  epiphanyOnSunday: boolean;\n  corpusChristiOnSunday: boolean;\n  ascensionOnSunday: boolean;\n  readonly scope: CalendarScope;\n  readonly i18next: i18n;\n  readonly dates: typeof Dates;\n  readonly martyrologyCatalog: MartyrologyCatalog;\n\n  readonly calendarsDef: InstanceType<CalendarDefInstance>[];\n  liturgicalDayDef: LiturgicalDayDefinitions = {};\n\n  /**\n   * Clone the RomcalConfig object\n   */\n  clone(): RomcalConfig {\n    return new RomcalConfig({ ...this.#input });\n  }\n\n  /**\n   * Constructs a new [[Config]] object.\n   * @param config [[RomcalConfig]] object representing all settings.\n   * @param martyrologyCatalog\n   * @param locale\n   * @param particularCalendar\n   */\n  constructor(\n    config?: RomcalConfigInput,\n    martyrologyCatalog?: MartyrologyCatalog,\n    locale?: Locale,\n    particularCalendar?: typeof CalendarDef,\n  ) {\n    this.#input = config || {};\n\n    if (config?.localizedCalendar) {\n      this.localizedCalendar = config.localizedCalendar;\n    }\n\n    this.scope = config?.scope ?? 'gregorian';\n\n    this.epiphanyOnSunday =\n      config?.epiphanyOnSunday ?? this.localizedCalendar?.particularConfig.epiphanyOnSunday ?? false;\n    this.corpusChristiOnSunday =\n      config?.corpusChristiOnSunday ?? this.localizedCalendar?.particularConfig.corpusChristiOnSunday ?? true;\n    this.ascensionOnSunday =\n      config?.ascensionOnSunday ?? this.localizedCalendar?.particularConfig.ascensionOnSunday ?? false;\n\n    const localeObj: Locale | undefined = this.localizedCalendar?.i18n ?? locale;\n    this.localeKey = localeObj?.key ?? 'dev';\n\n    // Create an instance and set up the i18next library.\n    this.i18next = i18next.createInstance(\n      {\n        fallbackLng: ['dev'],\n        lng: this.localeKey,\n        initImmediate: false,\n        // contextSeparator: '__',\n        interpolation: {\n          format: function (value, format) {\n            if (value === '') return value;\n            if (format === 'romanize') return toRomanNumber(parseInt(value, 10));\n            if (format === 'uppercase') return value.toUpperCase();\n            if (format === 'capitalize') return value[0].toUpperCase() + value.slice(1);\n            return value;\n          },\n        },\n      },\n      (err) => {\n        if (err) throw new Error(err);\n      },\n    );\n\n    // If another locale is specified, load associated ressources in the\n    // i18next library.\n    if (localeObj) this.#addResourceBundles(localeObj);\n\n    // Initialize the Date library.\n    this.dates = Dates;\n\n    // Initiate the CalendarDef objects.\n    this.calendarsDef = [];\n\n    // Initiate the Martyrology Catalog object.\n    this.martyrologyCatalog = this.localizedCalendar?.martyrology ?? martyrologyCatalog ?? {};\n\n    // In all cases, generate the ProperOfTime calendar\n    this.calendarsDef.push(new ProperOfTime(this));\n\n    // Then, import input definitions within a new CalendarDef object\n    if (config?.localizedCalendar) {\n      this.calendarsDef.push(new CalendarDef(this, config.localizedCalendar.inputs));\n    }\n    // Otherwise, it's mean that the GRC or particular calendar must be computed from scratch,\n    // probably by using the RomcalBuilder class helper, or Romcal without a specific localizedCalendar.\n    else {\n      this.calendarsDef.push(new GeneralRoman(this));\n      if (particularCalendar) {\n        this.calendarsDef.push(new particularCalendar(this));\n      }\n    }\n\n    this.calendarName =\n      config?.localizedCalendar?.calendarName ?? this.calendarsDef[this.calendarsDef.length - 1].calendarName;\n\n    // Update the config by checking if a particularConfig is present in all CalendarDef objects.\n    this.calendarsDef.map((cal) => cal.updateConfig(config));\n  }\n\n  /**\n   * Add ressource bundles to the i18next library\n   * @param locale\n   * @private\n   */\n  #addResourceBundles(locale: Locale): void {\n    this.i18next.addResourceBundle(locale.key, 'seasons', locale.seasons);\n    this.i18next.addResourceBundle(locale.key, 'periods', locale.periods);\n    this.i18next.addResourceBundle(locale.key, 'ranks', locale.ranks);\n    this.i18next.addResourceBundle(locale.key, 'weekdays', locale.weekdays);\n    this.i18next.addResourceBundle(locale.key, 'months', locale.months);\n    this.i18next.addResourceBundle(locale.key, 'colors', locale.colors);\n    this.i18next.addResourceBundle(locale.key, 'ordinals', locale.ordinals);\n    this.i18next.addResourceBundle(locale.key, 'names', locale.names);\n  }\n\n  /**\n   * Return localised liturgical colors from color keys\n   * @param colors\n   */\n  getLiturgicalColorNames(colors: Color[]): string[] {\n    return colors.map((s) => {\n      const key = `colors:${(s ?? '').toLowerCase()}`;\n      return this.i18next.t(key) ?? key;\n    });\n  }\n\n  /**\n   * Return localised season names from season keys\n   * @param seasons\n   */\n  getSeasonNames(seasons: Season[]): string[] {\n    return seasons.map((s) => {\n      const key = `seasons:${(s ?? '').toLowerCase()}.season`;\n      return this.i18next.t(key) ?? key;\n    });\n  }\n\n  /**\n   * Return the config settings as an Object.\n   */\n  toObject(): RomcalConfigOutput {\n    return {\n      epiphanyOnSunday: this.epiphanyOnSunday,\n      corpusChristiOnSunday: this.corpusChristiOnSunday,\n      ascensionOnSunday: this.ascensionOnSunday,\n      localeKey: this.localeKey,\n      calendarName: this.calendarName,\n      scope: this.scope,\n    };\n  }\n}\n", "import { DateDef, DateDefExtended, DayOfWeek } from '../types/liturgical-day';\nimport { BaseLiturgicalDayConfig, LiturgicalDayConfigOutput } from '../types/liturgical-day-config';\nimport { addDays, Dates, daysInMonth, getUtcDate, isSameDate, isValidDate, subtractsDays } from '../utils/dates';\nimport { RomcalConfig } from './config';\nimport LiturgicalDayDef from './liturgical-day-def';\n\nexport class LiturgicalDayConfig implements BaseLiturgicalDayConfig {\n  readonly config: RomcalConfig;\n  readonly year: number;\n  readonly dates: Dates;\n\n  /**\n   * Constructs a new [[Config]] object.\n   * @param config\n   * @param year\n   */\n  constructor(config: RomcalConfig, year?: number) {\n    this.config = config;\n\n    const currentYear = new Date().getFullYear();\n    this.year =\n      year ??\n      // When year is undefined, determine the current year\n      (config.scope === 'gregorian'\n        ? // Current Gregorian year\n          currentYear\n        : // Current Liturgical year\n        new Date().getTime() < Dates.firstSundayOfAdvent(currentYear + 1).getTime()\n        ? // We are before the first Sunday of Advent, taking the current year\n          currentYear\n        : // We are after the first Sunday of Advent, setting the next Gregorian year\n          // hat represent the main part of this Liturgical year\n          currentYear + 1);\n\n    // Initialise the Dates class\n    this.dates = new Dates(config, this.year);\n  }\n\n  /**\n   * Get the next day of week from the provided date until the next 6 days\n   * @param date\n   * @param dayOfWeek\n   * @private\n   */\n  static #getNextDayOfWeek(date: Date, dayOfWeek: DayOfWeek): Date {\n    return addDays(date, (7 + dayOfWeek - date.getDay()) % 7);\n  }\n\n  /**\n   * Lookup the date of a LiturgicalDayDef object, from a defined year scope\n   * @param dateDef\n   * @param yearOffset\n   */\n  #dateLookup(dateDef: DateDef | DateDefExtended, yearOffset = 0): Date | null {\n    let date: Date | null = null;\n    const year = this.year + (dateDef.yearOffset ?? 0) + yearOffset;\n\n    // DateDefMonthDate\n    if (Number.isInteger(dateDef.month) && Number.isInteger(dateDef.date) && dateDef.month! > 0 && dateDef.date! > 0) {\n      date = getUtcDate(year, dateDef.month!, dateDef.date!);\n    }\n\n    // DateDefDateFnAddDay or DateDefDateFnSubtractDay\n    else if (typeof dateDef.dateFn === 'string' && Object.prototype.hasOwnProperty.call(this.dates, dateDef.dateFn)) {\n      const args = [...(dateDef.dateArgs ?? []), year];\n      // todo: improve TS typing here\n      const dates = this.dates[dateDef.dateFn].apply<ThisType<Dates>, any, any>(this, args);\n      date = (Array.isArray(dates) ? dates.find((e) => e) : isValidDate(dates) ? dates : null) || null;\n\n      if (date && Number.isInteger(dateDef.addDay)) date = addDays(date, dateDef.addDay!);\n      if (date && Number.isInteger(dateDef.subtractDay)) date = subtractsDays(date, dateDef.subtractDay!);\n    }\n\n    // DateDefMonthDowNthWeekInMonth\n    else if (\n      Number.isInteger(dateDef.month) &&\n      Number.isInteger(dateDef.dayOfWeek) &&\n      Number.isInteger(dateDef.nthWeekInMonth)\n    ) {\n      const firstDayOf7Days = getUtcDate(year, dateDef.month!, 7 * dateDef.nthWeekInMonth! - 6);\n\n      date = LiturgicalDayConfig.#getNextDayOfWeek(firstDayOf7Days, dateDef.dayOfWeek!);\n    }\n\n    // DateDefMonthLastDowInMonth\n    else if (Number.isInteger(dateDef.month) && Number.isInteger(dateDef.lastDayOfWeekInMonth)) {\n      const firstDayOfMonth = getUtcDate(year, dateDef.month!, 1);\n      const firstDayOfLast7DaysOfMonth = subtractsDays(\n        getUtcDate(year, dateDef.month!, daysInMonth(firstDayOfMonth)),\n        6,\n      );\n\n      date = LiturgicalDayConfig.#getNextDayOfWeek(firstDayOfLast7DaysOfMonth, dateDef.lastDayOfWeekInMonth!);\n    }\n\n    return date;\n  }\n\n  /**\n   * Lookup the date of a LiturgicalDayDef object (from a defined year scope)\n   * and manage defined date exceptions\n   * @param def\n   * @param yearOffset\n   * @private\n   */\n  buildDate(def: LiturgicalDayDef, yearOffset = 0): Date | null {\n    let date = this.#dateLookup(def.dateDef, yearOffset);\n\n    const setDate = (dateDefExtended: DateDefExtended) => {\n      if (Number.isInteger(dateDefExtended.addDay)) {\n        date = addDays(date!, dateDefExtended.addDay!);\n      } else if (Number.isInteger(dateDefExtended.subtractDay)) {\n        date = subtractsDays(date!, dateDefExtended.subtractDay!);\n      } else {\n        date = this.#dateLookup(dateDefExtended, yearOffset);\n      }\n    };\n\n    if (date) {\n      def.dateExceptions.forEach((exception) => {\n        // ifIsBetween\n        if (typeof exception.ifIsBetween === 'object') {\n          const from = this.#dateLookup(exception.ifIsBetween.from, yearOffset);\n          const to = this.#dateLookup(exception.ifIsBetween.to, yearOffset);\n          if (from && to) {\n            // From-To inclusive\n            if (exception.ifIsBetween.inclusive) {\n              if (date!.getTime() >= from.getTime() && date!.getTime() <= to.getTime()) {\n                setDate(exception.setDate);\n              }\n            }\n            // From-To exclusive\n            else {\n              if (date!.getTime() > from.getTime() && date!.getTime() < to.getTime()) {\n                setDate(exception.setDate);\n              }\n            }\n          }\n        }\n\n        // ifIsSameAsDate\n        else if (typeof exception.ifIsSameAsDate === 'object') {\n          const dateComparison = this.#dateLookup(exception.ifIsSameAsDate, yearOffset);\n          if (dateComparison && isSameDate(dateComparison, date!)) {\n            setDate(exception.setDate);\n          }\n        }\n\n        // ifIsDayOfWeek\n        else if (Number.isInteger(exception.ifIsDayOfWeek)) {\n          if (date!.getDay() === exception.ifIsDayOfWeek) {\n            setDate(exception.setDate);\n          }\n        }\n      });\n    }\n\n    return date;\n  }\n\n  /**\n   * Return the config settings as an Object.\n   */\n  getConfigObject(): LiturgicalDayConfigOutput {\n    return {\n      ...this.config.toObject(),\n      year: this.year,\n    };\n  }\n}\n", "import { BundleInputs, ParticularConfig } from './calendar-def';\nimport { Key } from './common';\nimport { Locale } from './locale';\nimport { MartyrologyCatalog } from './martyrology';\n\nexport interface BaseRomcalBundle {\n  calendarName: Key;\n  particularConfig: ParticularConfig;\n  inputs: BundleInputs;\n  martyrology: MartyrologyCatalog;\n  i18n: Locale;\n}\n\nexport type RomcalBundleObject = BaseRomcalBundle;\n", "/**\n * Liturgical Calendar, containing LiturgicalDay objects, within the context of a year\n */\nimport LiturgicalDay from '../models/liturgical-day';\nimport { Dates } from '../utils/dates';\nimport { Key } from './common';\n\nexport type LiturgicalCalendar = Record<string, LiturgicalDay[]>;\n\n/**\n * General date definition collection\n */\n\nexport type ByKeys = Record<Key, LiturgicalDay>;\nexport type DatesIndex = Record<string, Key[]>;\n\nexport type LiturgicalBuiltData = {\n  byKeys: ByKeys;\n  datesIndex: DatesIndex;\n};\n\n/**\n * Base [CalendarDef] interface\n */\nexport interface BaseCalendar {\n  dates: Dates;\n  generateCalendar: (builtData: LiturgicalBuiltData) => LiturgicalCalendar;\n}\n", "import { RomcalConfig } from '../models/config';\nimport LiturgicalDayDef from '../models/liturgical-day-def';\nimport { Dates } from '../utils/dates';\nimport { Key, XOR } from './common';\nimport { RomcalConfigInput } from './config';\nimport { LiturgicalDayBundleInput, LiturgicalDayInput } from './liturgical-day';\n\n/**\n * Specific and proper configuration of a particular calendar\n */\nexport type ParticularConfig = Partial<\n  Pick<RomcalConfig, 'ascensionOnSunday' | 'epiphanyOnSunday' | 'corpusChristiOnSunday'>\n>;\n\n/**\n * General date definition collection\n */\nexport type CalendarDefInputs = XOR<Inputs, BundleInputs>;\nexport type Inputs = Record<Key, LiturgicalDayInput | LiturgicalDayInput[]>;\nexport type BundleInputs = Record<Key, LiturgicalDayBundleInput[]>;\nexport type LiturgicalDayDefinitions = Record<Key, LiturgicalDayDef>;\n\n/**\n * Base [CalendarDef] interface\n */\nexport interface BaseCalendarDef {\n  parentCalendar?: CalendarDefInstance | null;\n  parentCalendarInstance?: InstanceType<CalendarDefInstance>;\n  particularConfig?: ParticularConfig;\n  inputs: CalendarDefInputs;\n  dates: typeof Dates;\n  updateConfig: (config?: RomcalConfigInput) => void;\n  buildAllDefinitions: () => void;\n  calendarName: string;\n}\n\ninterface IConstructor<InstanceInterface> {\n  new (config: RomcalConfig, definitions?: BundleInputs): InstanceInterface;\n}\n\nexport type CalendarDefInstance = IConstructor<BaseCalendarDef>;\n", "/**\n * Utility types\n */\n\nexport type Without<T, U> = { [P in Exclude<keyof T, keyof U>]?: never };\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type XOR<T, U> = T | U extends object ? (Without<T, U> & U) | (Without<U, T> & T) : T | U;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type AllXOR<T extends any[]> = T extends [infer Only]\n  ? Only\n  : T extends [infer A, infer B, ...infer Rest]\n  ? AllXOR<[XOR<A, B>, ...Rest]>\n  : never;\n\n/**\n * Template literal types\n */\n\ntype UpperChar =\n  | 'A'\n  | 'B'\n  | 'C'\n  | 'D'\n  | 'E'\n  | 'F'\n  | 'G'\n  | 'H'\n  | 'I'\n  | 'J'\n  | 'K'\n  | 'L'\n  | 'M'\n  | 'N'\n  | 'O'\n  | 'P'\n  | 'Q'\n  | 'R'\n  | 'S'\n  | 'T'\n  | 'U'\n  | 'V'\n  | 'W'\n  | 'X'\n  | 'Y'\n  | 'Z';\n\n/**\n * PascalCaseToUpperSnakeCase\n */\nexport type ScreamingSnakeCase<S extends string> = CamelToUpperSnakeCase<Uncapitalize<S>>;\n\n/**\n * CamelToUpperSnakeCase (using template literal types).\n * Note: first per 3 chars, then per 2 chars (to optimize performance and avoid TS2589 error),\n * and finally per 1 char.\n */\n// todo: fix extra _ added, and _ added before numbers\nexport type CamelToUpperSnakeCase<S extends string> = S extends `${infer C0}${infer C1}${infer C2}${infer R}`\n  ? `${`${C0}${C1}${C2}` extends `${UpperChar}${Lowercase<C1>}${Lowercase<C2>}`\n      ? `_${Uppercase<C0>}${Uppercase<C1>}${Uppercase<C2>}`\n      : `${`${C0}${C1}${C2}` extends `${Lowercase<C0>}${UpperChar}${Lowercase<C2>}`\n          ? `${Uppercase<C0>}_${Uppercase<C1>}${Uppercase<C2>}`\n          : `${`${C0}${C1}${C2}` extends `${Lowercase<C0>}${Lowercase<C1>}${UpperChar}`\n              ? `${Uppercase<C0>}${Uppercase<C1>}_${Uppercase<C2>}`\n              : `${`${C0}${C1}${C2}` extends `${UpperChar}${UpperChar}${Lowercase<C2>}`\n                  ? `_${Uppercase<C0>}_${Uppercase<C1>}${Uppercase<C2>}`\n                  : `${`${C0}${C1}${C2}` extends `${UpperChar}${Lowercase<C1>}${UpperChar}`\n                      ? `_${Uppercase<C0>}${Uppercase<C1>}_${Uppercase<C2>}`\n                      : `${`${C0}${C1}${C2}` extends `${Lowercase<C0>}${UpperChar}${UpperChar}`\n                          ? `${Uppercase<C0>}_${Uppercase<C1>}_${Uppercase<C2>}`\n                          : `${`${C0}${C1}${C2}` extends `${UpperChar}${UpperChar}${UpperChar}`\n                              ? `_${Uppercase<C0>}_${Uppercase<C1>}_${Uppercase<C2>}`\n                              : `${Uppercase<C0>}${Uppercase<C1>}${Uppercase<C2>}`}`}`}`}`}`}`}${CamelToUpperSnakeCase<R>}`\n  : S extends `${infer C0}${infer C1}${infer R}`\n  ? `${`${C0}${C1}` extends `${UpperChar}${Lowercase<C1>}`\n      ? `_${Uppercase<C0>}${Uppercase<C1>}`\n      : `${`${C0}${C1}` extends `${Lowercase<C0>}${UpperChar}`\n          ? `${Uppercase<C0>}_${Uppercase<C1>}`\n          : `${`${C0}${C1}` extends `${UpperChar}${UpperChar}`\n              ? `_${Uppercase<C0>}_${Uppercase<C1>}`\n              : `${Uppercase<C0>}${Uppercase<C1>}`}`}`}${CamelToUpperSnakeCase<R>}`\n  : S extends `${infer C0}${infer R}`\n  ? `${C0 extends UpperChar ? '_' : ''}${Uppercase<C0>}${CamelToUpperSnakeCase<R>}`\n  : S;\n\n/**\n * A key, in lower_underscore_case\n */\nexport type Key = Lowercase<string>;\n", "import { i18n } from 'i18next';\nimport { RomcalBundleObject } from './bundle';\nimport { CalendarDefInstance } from './calendar-def';\n\n/**\n * The configuration object that is passed either to the [[Calendar.calendarFor]]\n * methods to retrieve an array of [[DateItems]].\n */\nexport interface BaseRomcalConfig {\n  /**\n   * The localized calendar bundle object.\n   */\n  readonly localizedCalendar?: RomcalBundleObject;\n\n  /**\n   * If `false`, fixes Epiphany on January 6th. Usually, Epiphany will be set to a\n   * Sunday between the 2nd - 8th Jan based on an internal calculation.\n   *\n   * Defaults to `true`.\n   */\n  readonly epiphanyOnSunday?: boolean;\n\n  /**\n   * Determines if Corpus Christi should be celebrated on Sunday (63 days after Easter)\n   * or on Thursday of the 7th week of Easter (60 days after Easter).\n   * (Corpus Christi is celebrated on Sunday by default).\n   *\n   * Defaults to `true`\n   */\n  readonly corpusChristiOnSunday?: boolean;\n\n  /**\n   * If true, Ascension is moved to the 7th Sunday of Easter)\n   *\n   * (defaults to false)\n   */\n  readonly ascensionOnSunday?: boolean;\n\n  /**\n   * The calendar scope to query for.\n   *\n   * The scope can be specified either as:\n   * 1. **gregorian**: Which is the civil year for the majority of countries (January 1 to December 31); or\n   * 2. **liturgical**: Religious calendar year (1st Sunday of Advent of the current year to the Saturday before the 1st Sunday of Advent in the next year).\n   */\n  readonly scope?: CalendarScope;\n\n  /**\n   * All calendar definitions\n   */\n  readonly calendarsDef: InstanceType<CalendarDefInstance>[];\n\n  /**\n   * The locale key\n   */\n  readonly localeKey: string;\n\n  /**\n   * The calendar name\n   */\n  readonly calendarName: string;\n}\n\nexport interface IRoncalConfig extends BaseRomcalConfig {\n  readonly i18next: i18n;\n}\n\n/**\n * A modified variant of [[RomcalConfig]] specifically for the [[Config]] class constructor\n * where all properties are **required**.\n */\nexport type RomcalConfigInput = Omit<Partial<BaseRomcalConfig>, 'localeKey' | 'calendarName'>;\n\n/**\n * Output object of the romcal config.\n */\nexport type RomcalConfigOutput = Required<Omit<BaseRomcalConfig, 'localizedCalendar' | 'calendarsDef'>>;\n\nexport type CalendarScope = 'gregorian' | 'liturgical';\n", "import { RomcalConfigOutput } from './config';\n\nexport interface BaseLiturgicalDayConfig {\n  /**\n   * The calendar year to obtain.\n   */\n  readonly year: number;\n}\n\nexport type LiturgicalDayConfigOutput = RomcalConfigOutput & BaseLiturgicalDayConfig;\n", "export interface Locale {\n  key: string;\n  ordinals?: LocaleOrdinals;\n  weekdays?: LocaleWeeks;\n  months?: LocaleMonths;\n  colors?: LocaleColors;\n  seasons?: {\n    advent?: {\n      season?: string;\n      weekday?: string;\n      sunday?: string;\n      privileged_weekday?: string;\n    };\n    christmas_time?: {\n      season?: string;\n      day?: string;\n      octave?: string;\n      before_epiphany?: string;\n      second_sunday_after_christmas?: string;\n      after_epiphany?: string;\n    };\n    ordinary_time?: {\n      season?: string;\n      weekday?: string;\n      sunday?: string;\n    };\n    lent?: {\n      season?: string;\n      weekday?: string;\n      sunday?: string;\n      day_after_ash_wed?: string;\n      holy_week_day?: string;\n    };\n    paschal_triduum?: {\n      season?: string;\n    };\n    easter_time?: {\n      season?: string;\n      weekday?: string;\n      sunday?: string;\n      octave?: string;\n    };\n  };\n  periods?: {\n    epiphany?: string;\n    holy_week?: string;\n  };\n  ranks?: {\n    solemnity?: string;\n    sunday?: string;\n    feast?: string;\n    memorial?: string;\n    weekday?: string;\n  };\n  names?: LocaleLiturgicalDayNames;\n}\n\n// export type LocaleOrdinals = Record<string, string | ((n: number) => string)>;\nexport type LocaleOrdinals = Record<string, string>;\n\nexport type LocaleWeeks = Record<string, string>;\n\nexport type LocaleMonths = Record<string, string>;\n\nexport type LocaleColors = {\n  black?: string;\n  gold?: string;\n  green?: string;\n  purple?: string;\n  red?: string;\n  rose: string;\n  white?: string;\n};\n\nexport type LocaleLiturgicalDayNames = Record<string, string>;\n", "import { CanonizationLevel, PatronTitle, Sex, Title } from '../constants/martyrology-metadata';\n\nexport type MartyrologyDef = {\n  /**\n   * The canonization level of a person.\n   */\n  canonizationLevel?: CanonizationLevel;\n\n  /**\n   * Specify if the canonization level should not be displayed.\n   * It's generally the case when the canonization are already included in the name.\n   */\n  hideCanonizationLevel?: boolean;\n\n  /**\n   * Temporarily property.\n   * The content of this property will be move to the corresponding locale file.\n   * @deprecated\n   */\n  name?: string;\n\n  /**\n   * Titles of the Saint or the Blessed\n   */\n  titles?: (Title | PatronTitle)[];\n\n  /**\n   * Determine if the Saint or the Blessed is a male or a female.\n   */\n  sex?: Sex;\n\n  /**\n   * Specify if the titles should not be displayed.\n   * It's generally the case when titles are already included in the name.\n   */\n  hideTitles?: boolean;\n\n  /**\n   * Date of Death, as a Number (year), a String (in 'YYYY-MM' or 'YYYY-MM-DD' format),\n   * or an object describing date range, multiple possible date, or a century.\n   */\n  dateOfDeath?: SaintDateDef;\n\n  /**\n   * Specify if an approximative indicator should be added, when the date is displayed.\n   * For example in English: 'c. 201'.\n   */\n  dateOfDeathIsApproximative?: boolean;\n\n  /**\n   * Number of person that this definition represent.\n   * It could be set as 'many' if the number is not defined.\n   */\n  count?: SaintCount;\n};\n\nexport type SaintCount = number | 'many';\nexport type SaintDate = number | string;\nexport type SaintDateDef = SaintDate | { between: [SaintDate, SaintDate] } | { or: SaintDate[] } | { century: number };\nexport type MartyrologyCatalog = Record<string, MartyrologyDef>;\nexport type MartyrologyItem = { key: string } & MartyrologyDef;\n", "import { version } from '../package.json';\nimport { CALENDAR_PKG_NAMES, CALENDAR_VAR_NAMES } from '../tmp/constants/calendars';\nimport { LOCALE_KEYS, LOCALE_VAR_NAMES } from '../tmp/constants/locales';\nimport { Color, COLORS, Colors, isColor } from './constants/colors';\nimport {\n  PROPER_CYCLE,\n  ProperCycle,\n  ProperCycles,\n  PSALTER_WEEKS,\n  PsalterWeeksCycle,\n  PsalterWeeksCycles,\n  SUNDAYS_CYCLE,\n  SundaysCycle,\n  SundaysCycles,\n  WEEKDAYS_CYCLE,\n  WeekdaysCycle,\n  WeekdaysCycles,\n} from './constants/cycles';\nimport { GENERAL_ROMAN_NAME, PROPER_OF_TIME_NAME } from './constants/general-calendar-names';\nimport {\n  CANONIZATION_LEVEL,\n  CanonizationLevel,\n  CanonizationLevels,\n  isMartyr,\n  PATRON_TITLES,\n  PatronTitle,\n  PatronTitles,\n  Sex,\n  SEXES,\n  Sexes,\n  Title,\n  TITLES,\n  Titles,\n} from './constants/martyrology-metadata';\nimport { Months, MONTHS } from './constants/months';\nimport { Period, PERIODS, Periods } from './constants/periods';\nimport { Precedence, PRECEDENCES, Precedences } from './constants/precedences';\nimport { Rank, RANKS, Ranks, RanksFromPrecedence } from './constants/ranks';\nimport { Season, SEASONS, Seasons } from './constants/seasons';\nimport { WEEKDAYS } from './constants/weekdays';\nimport { RomcalBundle } from './models/bundle';\nimport { Calendar } from './models/calendar';\nimport { CalendarDef } from './models/calendar-def';\nimport { RomcalConfig } from './models/config';\nimport LiturgicalDay from './models/liturgical-day';\nimport { LiturgicalDayConfig } from './models/liturgical-day-config';\nimport LiturgicalDayDef from './models/liturgical-day-def';\nimport { RomcalBundleObject } from './types/bundle';\nimport { LiturgicalCalendar } from './types/calendar';\nimport {\n  BundleInputs,\n  CalendarDefInputs,\n  Inputs,\n  LiturgicalDayDefinitions,\n  ParticularConfig,\n} from './types/calendar-def';\nimport { Key } from './types/common';\nimport { CalendarScope, RomcalConfigInput, RomcalConfigOutput } from './types/config';\nimport {\n  BaseLiturgicalDay,\n  BaseLiturgicalDayDef,\n  CalendarMetadata,\n  DateDef,\n  DateDefAddDay,\n  DateDefDateFnAddDay,\n  DateDefDateFnSubtractDay,\n  DateDefException,\n  DateDefExtended,\n  DateDefMonthDate,\n  DateDefMonthDowNthWeekInMonth,\n  DateDefMonthLastDowInMonth,\n  DateDefSubtractDay,\n  DayOfWeek,\n  LiturgicalDayInput,\n  LiturgyDayDiff,\n  MartyrologyItemPointer,\n  MartyrologyItemRedefined,\n  Month,\n  PartialCyclesDef,\n  RomcalCalendarMetadata,\n  RomcalCyclesMetadata,\n  TitlesDef,\n} from './types/liturgical-day';\nimport { LiturgicalDayConfigOutput } from './types/liturgical-day-config';\nimport {\n  Locale,\n  LocaleColors,\n  LocaleLiturgicalDayNames,\n  LocaleMonths,\n  LocaleOrdinals,\n  LocaleWeeks,\n} from './types/locale';\nimport { MartyrologyCatalog, MartyrologyItem, SaintCount, SaintDate, SaintDateDef } from './types/martyrology';\nimport {\n  addDays,\n  computeGregorianEasterDate,\n  dateDifference,\n  Dates,\n  daysInMonth,\n  getUtcDate,\n  getUtcDateFromString,\n  getWeekNumber,\n  isSameDate,\n  isValidDate,\n  rangeContainsDate,\n  rangeOfDays,\n  startOfWeek,\n  subtractsDays,\n} from './utils/dates';\nimport { toRomanNumber } from './utils/numbers';\n\nclass Romcal {\n  readonly #config: RomcalConfig;\n  #computedCalendars: Record<number, LiturgicalCalendar> = {};\n  #dates: Record<number, Dates> = {};\n\n  /**\n   * Utility helpers to compute the date(s) of specific liturgical days or seasons.\n   */\n  constructor(config?: RomcalConfigInput) {\n    this.#config = new RomcalConfig(config);\n  }\n\n  /**\n   * Get the complete configuration, used to create and generate a calendar.\n   */\n  public get config(): RomcalConfigOutput {\n    return this.#config.toObject();\n  }\n\n  /**\n   * Sanitize the provided year\n   * @param year\n   * @private\n   */\n  static #sanitizeYear(year?: number | string): number | undefined {\n    const y: number | undefined = typeof year === 'string' ? parseInt(year, 10) : year;\n    if ((y !== undefined && !Number.isInteger(y)) || (Number.isInteger(y) && (y! < 0 || y! > 9999))) {\n      throw new Error('The provided year is incorrect');\n    }\n    return y;\n  }\n\n  /**\n   * Dates library\n   * @param year\n   */\n  dates(year?: number | string): Dates {\n    const y = Romcal.#sanitizeYear(year);\n    const ldConfig = new LiturgicalDayConfig(this.#config, y);\n    if (this.#dates[ldConfig.year]) return this.#dates[ldConfig.year];\n    return (this.#dates[ldConfig.year] = ldConfig.dates);\n  }\n\n  /**\n   * Get one LiturgicalDay by its key.\n   * Return undefined if not found, or null if the LiturgicalDay do not occur in the provided year.\n   * Note: this function compute only one LiturgicalDay without the liturgical whole year background,\n   * so some metadata may be missing, and the precedence rules between different LiturgicalDay\n   * objects are ignored.\n   *\n   * Optionally, you can set the `computeInWholeYear` option to `true`,\n   * so all the liturgical calendar will be computed before returning the desired liturgical day.\n   * With this option enabled, all the metadata and precedence rules are correctly computed.\n   *\n   * @param key\n   * @param options\n   */\n  getOneLiturgicalDay(\n    key: Key,\n    options: { year?: number | string; computeInWholeYear?: boolean } = {\n      computeInWholeYear: false,\n    },\n  ): Promise<LiturgicalDay | null | undefined> {\n    return new Promise((resolve, reject) => {\n      try {\n        const y = Romcal.#sanitizeYear(options.year);\n        const ldConfig = new LiturgicalDayConfig(this.#config, y);\n\n        this.getAllDefinitions().then(() => {\n          const partialLd = new Calendar(this.#config, ldConfig).getOneLiturgicalDay(key);\n          if (!options.computeInWholeYear) return resolve(partialLd);\n\n          if (!partialLd) resolve(partialLd);\n          return this.generateCalendar(ldConfig.year).then((value) => {\n            resolve(\n              Object.values(value)\n                .flat()\n                .find((d) => d.key === key),\n            );\n          });\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Generate a liturgical calendar, within a Liturgical or Gregorian scope.\n   */\n  generateCalendar(year?: number | string): Promise<LiturgicalCalendar> {\n    // Wrap the calendar computing process in a Promise.\n    // Even if this method is called with async/await, this makes this method running in a microtask queue:\n    // it does not run on the main thread, meaning other things can occur (click events, rendering, etc.).\n    return new Promise((resolve, reject) => {\n      try {\n        const y = Romcal.#sanitizeYear(year);\n        const ldConfig = new LiturgicalDayConfig(this.#config, y);\n\n        // Return cached data, if the calendar has been already computed\n        if (this.#computedCalendars[ldConfig.year]) {\n          return resolve(this.#computedCalendars[ldConfig.year]);\n        }\n\n        this.getAllDefinitions().then(() => {\n          this.#computedCalendars[ldConfig.year] = new Calendar(this.#config, ldConfig).generateCalendar();\n          resolve(this.#computedCalendars[ldConfig.year]);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Get all possible liturgical days from the currently selected calendar,\n   * (including all possible inherited calendars until the General Roman Calendar,\n   * and the Proper of the Time), outside the context of a specific year.\n   */\n  getAllDefinitions(): Promise<LiturgicalDayDefinitions> {\n    return new Promise((resolve, reject) => {\n      try {\n        this.#config.calendarsDef.forEach((cal) => cal.buildAllDefinitions());\n        resolve(this.#config.liturgicalDayDef);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Get Romcal version\n   */\n  getVersion(): string {\n    return Romcal.getVersion();\n  }\n\n  /**\n   * Get Romcal version\n   */\n  static getVersion(): string {\n    return version;\n  }\n\n  // constants/colors.ts\n  static Colors = Colors;\n  static COLORS = COLORS;\n  static isColor = isColor;\n  // constants/cycles.ts\n  static ProperCycles = ProperCycles;\n  static PROPER_CYCLE = PROPER_CYCLE;\n  static SundaysCycles = SundaysCycles;\n  static SUNDAYS_CYCLE = SUNDAYS_CYCLE;\n  static WeekdaysCycles = WeekdaysCycles;\n  static WEEKDAYS_CYCLE = WEEKDAYS_CYCLE;\n  static PsalterWeeksCycles = PsalterWeeksCycles;\n  static PSALTER_WEEKS = PSALTER_WEEKS;\n  // constants/general-calendar-names.ts\n  static PROPER_OF_TIME_NAME = PROPER_OF_TIME_NAME;\n  static GENERAL_ROMAN_NAME = GENERAL_ROMAN_NAME;\n  static CanonizationLevels = CanonizationLevels;\n  static CANONIZATION_LEVEL = CANONIZATION_LEVEL;\n  static Sexes = Sexes;\n  static SEXES = SEXES;\n  static Titles = Titles;\n  static TITLES = TITLES;\n  static isMartyr = isMartyr;\n  static PatronTitles = PatronTitles;\n  static PATRON_TITLES = PATRON_TITLES;\n  // constants/months.ts\n  static MONTHS = MONTHS;\n  // constants/periods.ts\n  static Periods = Periods;\n  static PERIODS = PERIODS;\n  // constants/precedences.ts\n  static Precedences = Precedences;\n  static PRECEDENCES = PRECEDENCES;\n  // constants/ranks.ts\n  static Ranks = Ranks;\n  static RANKS = RANKS;\n  static RanksFromPrecedence = RanksFromPrecedence;\n  // constants/seasons.ts\n  static Seasons = Seasons;\n  static SEASONS = SEASONS;\n  // constants/weekdays.ts\n  static WEEKDAYS = WEEKDAYS;\n  // models/*\n  static RomcalBundle = RomcalBundle;\n  static Calendar = Calendar;\n  static CalendarDef = CalendarDef;\n  static RomcalConfig = RomcalConfig;\n  static LiturgicalDay = LiturgicalDay;\n  static LiturgicalDayConfig = LiturgicalDayConfig;\n  static LiturgicalDayDef = LiturgicalDayDef;\n  // utils/dates.ts\n  static getUtcDate = getUtcDate;\n  static getUtcDateFromString = getUtcDateFromString;\n  static addDays = addDays;\n  static subtractsDays = subtractsDays;\n  static isSameDate = isSameDate;\n  static dateDifference = dateDifference;\n  static startOfWeek = startOfWeek;\n  static isValidDate = isValidDate;\n  static daysInMonth = daysInMonth;\n  static getWeekNumber = getWeekNumber;\n  static computeGregorianEasterDate = computeGregorianEasterDate;\n  static rangeContainsDate = rangeContainsDate;\n  static rangeOfDays = rangeOfDays;\n  // utils/numbers.ts\n  static toRomanNumber = toRomanNumber;\n  // generated data from build\n  static CALENDAR_VAR_NAMES = CALENDAR_VAR_NAMES;\n  static CALENDAR_PKG_NAMES = CALENDAR_PKG_NAMES;\n  static LOCALE_VAR_NAMES = LOCALE_VAR_NAMES;\n  static LOCALE_KEYS = LOCALE_KEYS;\n}\n\nexport default Romcal;\n\nexport {\n  // constants/colors.ts\n  Color,\n  // constants/cycles.ts\n  ProperCycle,\n  SundaysCycle,\n  WeekdaysCycle,\n  PsalterWeeksCycle,\n  // constants/martyrology-metadata.ts\n  CanonizationLevel,\n  Title,\n  PatronTitle,\n  Sex,\n  // constants/months.ts\n  Months,\n  // constants/periods.ts\n  Period,\n  // constants/precedences.ts\n  Precedence,\n  // constants/ranks.ts\n  Rank,\n  // constants/seasons.ts\n  Season,\n  // types/bundle.ts\n  RomcalBundleObject,\n  // types/calendar.ts\n  LiturgicalCalendar,\n  // types/calendar-def.ts\n  CalendarDefInputs,\n  ParticularConfig,\n  Inputs,\n  BundleInputs,\n  LiturgicalDayDefinitions,\n  // types/common.ts\n  Key,\n  // types/config.ts\n  RomcalConfigInput,\n  RomcalConfigOutput,\n  CalendarScope,\n  // types/liturgical-day.ts\n  BaseLiturgicalDay,\n  BaseLiturgicalDayDef,\n  DateDef,\n  Month,\n  DayOfWeek,\n  DateDefMonthDate,\n  DateDefDateFnAddDay,\n  DateDefDateFnSubtractDay,\n  DateDefMonthDowNthWeekInMonth,\n  DateDefMonthLastDowInMonth,\n  DateDefExtended,\n  DateDefAddDay,\n  DateDefSubtractDay,\n  DateDefException,\n  CalendarMetadata,\n  RomcalCyclesMetadata,\n  PartialCyclesDef,\n  RomcalCalendarMetadata,\n  TitlesDef,\n  MartyrologyItemPointer,\n  MartyrologyItemRedefined,\n  LiturgicalDayInput,\n  LiturgyDayDiff,\n  // types/liturgical-day-config.ts\n  LiturgicalDayConfigOutput,\n  // types/locale.ts\n  Locale,\n  LocaleOrdinals,\n  LocaleWeeks,\n  LocaleMonths,\n  LocaleColors,\n  LocaleLiturgicalDayNames,\n  // types/martyrology.ts\n  SaintCount,\n  SaintDate,\n  SaintDateDef,\n  MartyrologyCatalog,\n  MartyrologyItem,\n};\n", "/**\n * Workaround to avoid the issue with default class export in CJS/IIFE for now.\n *\n * This workaround will avoid having to import Romcal as:\n * - CJS:  Romcal = require('romcal').default;\n * - IIFE: const romcal = new Romcal.default();\n *\n * More info here: https://github.com/evanw/esbuild/issues/1182\n */\nimport Romcal from './index';\n\nmodule.exports = Romcal;\n"],
  "mappings": "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",
  "names": []
}
